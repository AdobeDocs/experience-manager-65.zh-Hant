---
title: '"[!DNL Assets] 大小調整指南」'
description: 判斷有效率指標的最佳實務，以評估部署所需的基礎結構和資源 [!DNL Adobe Experience Manager Assets].
contentOwner: AG
role: Architect, Admin
feature: Asset Management
exl-id: fd58ead9-5e18-4f55-8d20-1cf4402fad97
source-git-commit: e24316cb9495a552960ae0620e4198f10a08b691
workflow-type: tm+mt
source-wordcount: '1615'
ht-degree: 0%

---

# [!DNL Assets] 大小調整指南 {#assets-sizing-guide}

調整環境大小時 [!DNL Adobe Experience Manager Assets] 實作時，請務必確保有足夠的可用資源，例如磁碟、CPU、記憶體、IO和網路傳輸量。 調整其中許多資源的大小需要瞭解載入系統的資產數量。 如果沒有更好的量度，您可以依程式庫年齡來分割現有程式庫的大小，以找出建立資產的速率。

## 磁碟 {#disk}

### 資料存放區 {#datastore}

在調整所需的磁碟空間大小時，經常會犯錯 [!DNL Assets] 實施是根據要擷取到系統中的原始影像大小來計算。 依預設， [!DNL Experience Manager] 除了原始影像之外，還會建立三個轉譯，以用於轉譯 [!DNL Experience Manager] 使用者介面元素。 在先前的實施中，已觀察到這些轉譯假設的資產大小是擷取的兩倍。

除了現成可用的轉譯外，大部分使用者還會定義自訂轉譯。 除了轉譯之外， [!DNL Assets] 可讓您從常見檔案型別擷取子資產，例如 [!DNL Adobe InDesign] 和 [!DNL Adobe Illustrator].

最後，版本設定功能 [!DNL Experience Manager] 在版本記錄中儲存資產的重複專案。 您可以設定要經常清除的版本。 不過，許多使用者選擇將版本保留在系統中很長時間，這會消耗額外的儲存空間。

考量到這些因素，您需要一種方法來計算儲存使用者資產時所能接受的精確儲存空間。

1. 決定要載入系統的資產大小和數量。
1. 取得要上傳至的代表性資產範例 [!DNL Experience Manager]. 例如，如果您計畫將PSD、JPG、AI和PDF檔案載入系統，則需要每種檔案格式的多個範例影像。 此外，這些範例應能代表不同檔案大小和影像的複雜程度。
1. 定義要使用的轉譯。
1. 在中建立轉譯 [!DNL Experience Manager] 使用 [!DNL ImageMagick] 或 [!DNL Adobe Creative Cloud] 應用程式。 除了使用者指定的轉譯外，請建立現成可用的轉譯。 對於實作Dynamic Media的使用者，您可以使用IC二進位檔來產生PTIFF轉譯，以儲存為Experience Manager。
1. 如果您打算使用子資產，請針對適當的檔案型別產生子資產。
1. 比較輸出影像、轉譯和子資產與原始影像的大小。 它可讓您在系統載入時產生預期的成長因子。 例如，如果您在處理1 GB資產後產生合併大小為3 GB的轉譯和子資產，轉譯增長係數為3。
1. 決定要在系統中維護資產版本的最長時間。
1. 決定系統中修改現有資產的頻率。 若 [!DNL Experience Manager] 在創意工作流程中作為共同作業中心使用，變更量相當大。 如果僅將完成的資產上傳到系統，則此數字會低得多。
1. 決定每個月將多少資產載入系統。 如果您不確定，請確定目前可用的資產數量，然後將該數量除以最舊資產的年齡，以計算大致數字。

執行上述步驟可協助您判斷下列專案：

* 要載入的資產原始大小。
* 要載入的資產數量。
* 轉譯成長因素。
* 每月進行的資產修改次數。
* 維護資產版本的月數。
* 每月載入的新資產數目。
* 儲存空間配置的多年成長期。

您可以在「網路大小調整試算表」中指定這些數字，以決定資料存放區所需的總空間。 此外，它還是判斷在中維護資產版本或修改資產所產生影響的實用工具。 [!DNL Experience Manager] 在磁碟成長上。

工具中填入的範例資料說明了執行上述步驟的重要性。 如果您僅根據載入的原始影像來設定資料存放區的大小(1 TB)，您可能會將存放庫大小低估了15倍。

[取得檔案](assets/disk_sizing_tool.xlsx)

### 共用資料存放區 {#shared-datastores}

對於大型資料存放區，您可以透過網路附加磁碟機上的共用檔案資料存放區或Amazon S3資料存放區來實作共用資料存放區。 在這種情況下，個別執行個體不需要維護二進位檔的復本。 此外，共用資料存放區有助於進行無二進位檔的複製，並有助於減少將資產複製到發佈環境所使用的頻寬。

#### 使用案例 {#use-cases}

資料存放區可在主要和待命製作執行個體之間共用，以將主要執行個體中所做的變更更新待命執行個體所花費的時間減到最少。 您也可以在製作和發佈執行個體之間共用資料存放區，以將復寫期間的流量降至最低。

#### 缺點 {#drawbacks}

由於某些缺陷，不建議在所有情況下共用資料存放區。

#### 單一失敗點 {#single-point-of-failure}

擁有共用資料存放區，會導致基礎架構出現單一故障點。 假設您的系統有一個作者和兩個發佈例項，每個例項都有自己的資料存放區。 如果其中一個當機，其他兩個仍可繼續執行。 不過，如果資料存放區是共用的，單一磁碟故障可能會毀壞整個基礎架構。 因此，請務必維護共用資料存放區的備份，以便快速還原資料存放區。

建議將AWS S3服務部署至共用資料存放區，因為相較於一般磁碟架構，此服務可大幅降低失敗的可能性。

#### 增加複雜性 {#increased-complexity}

共用資料存放區也會增加操作的複雜性，例如垃圾收集。 通常，只需按一下即可起始獨立資料存放區的垃圾收集。 不過，共用資料存放區除了在單一節點上執行實際集合外，還需要對使用該資料存放區的每個成員執行標籤清除作業。

對於AWS作業而言，實作單一中心位置(透過Amazon S3)而不是建置EBS磁碟區的RAID陣列，可以大幅降低系統的複雜性和作業風險。

#### 效能考量 {#performance-concerns}

共用資料存放區要求將二進位檔儲存在所有執行個體之間共用的網路掛載磁碟機上。 由於這些二進位檔是透過網路存取，因此系統效能會受到不利的影響。 您可以使用快速網路連線到快速磁碟陣列，來部分減輕影響。 不過，這是一項昂貴的提議。 在AWS作業中，所有磁碟都是遠端磁碟，且需要網路連線。 執行個體啟動或停止時，臨時磁碟區會遺失資料。

#### 延遲 {#latency}

S3實施中的延遲是由背景寫入對話串所引入。 備份程式必須考慮到此延遲。 此外，進行備份時，Lucene索引可能會保持不完整。 它適用於寫入S3資料存放區並從其他執行個體存取的任何時效性檔案。

### 節點存放區或檔案存放區 {#node-store-document-store}

由於下列資源耗用，很難得出NodeStore或DocumentStore的精確大小數字：

* 資產中繼資料
* 資產版本
* 稽核記錄
* 已封存及使用中的工作流程

因為二進位檔儲存在資料存放區中，所以每個二進位檔都會佔用一些空間。 大部分存放庫的大小都低於100GB。 不過，可能有更大的存放庫大小最多1 TB。 此外，若要執行離線壓縮，您需要在磁碟區上有足夠的可用空間，以便與預先壓縮的版本一起重寫壓縮的存放庫。 一個好的經驗法則是將磁碟大小調整為存放庫預期大小的1.5倍。

對於存放庫，請使用IOPS等級大於3000的SSD或磁碟。 為了避免IOPS造成效能瓶頸的可能性，請監控CPU IO等待層級，以找出問題的早期跡象。

[取得檔案](assets/aem_environment_sizingtool.xlsx)

## 網路 {#network}

[!DNL Assets] 有許多使用案例，讓網路效能比我們的許多使用案例更重要 [!DNL Experience Manager] 專案。 客戶可以擁有快速伺服器，但如果網路連線不夠大，無法支援從系統上傳和下載資產的使用者載入，則伺服器仍會顯得緩慢。 判斷使用者網路連線中的咽喉栓塞點的方法很好。 [!DNL Experience Manager] 於 [使用者體驗、執行個體規模調整、工作流程評估和網路拓撲的資產考量事項](/help/assets/assets-network-considerations.md).

## 限制 {#limitations}

調整實作規模時，請務必牢記系統限制。 如果建議的實作超過這些限制，請使用創意策略，例如將資產分割成多個區段 [!DNL Assets] 實作。

檔案大小並非造成記憶體不足(OOM)問題的唯一因素。 這也取決於影像的尺寸。 您可在啟動時提供較大的棧積大小，以避免OOM問題 [!DNL Experience Manager].

此外，您還可以編輯的臨界值大小屬性 `com.day.cq.dam.commons.handler.StandardImageHandler` 元件來使用大於零的中繼暫存檔案。

## 資產數量上限 {#maximum-number-of-assets}

由於檔案系統的限制，資料存放區中可以存在的檔案數量上限為21億。 存放庫很可能在達到資料存放區限制之前很長時間會因為大量節點而遇到問題。

如果轉譯的產生不正確，請使用Camera Raw的程式庫。 不過，在此情況下，影像的最長邊不應大於65000畫素。 此外，影像不應包含超過512 MP （512 x 1024 x 1024畫素）。 資產大小並不重要。

很難準確估計具有特定棧積且現成可用的TIFF檔案的大小 [!DNL Experience Manager] 因為其他因素（例如畫素大小）會影響處理作業。 有可能 [!DNL Experience Manager] 可立即處理大小為255 MB的檔案，但無法處理大小為18 MB的檔案，因為後者包含的數目異常高於前者。

## 資產大小 {#size-of-assets}

依預設， [!DNL Experience Manager] 可讓您上傳檔案大小最大為2 GB的資產。 若要上傳超大型資產於 [!DNL Experience Manager]，請參閱 [上傳超大型資產的設定](managing-video-assets.md#configuration-to-upload-assets-that-are-larger-than-gb).
