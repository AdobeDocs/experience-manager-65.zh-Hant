---
title: 配置業務日曆
seo-title: 配置業務日曆
description: 業務日曆可定義組織的業務日和非業務日。 瞭解如何設定商業日曆。
seo-description: 業務日曆可定義組織的業務日和非業務日。 瞭解如何設定商業日曆。
uuid: 0ba610b8-72a8-480c-8783-70d98cbe890a
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/configuring_forms_workflow
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: 7a85e13d-4800-47c4-812a-5c6e2355298a
translation-type: tm+mt
source-git-commit: 58fa0f05bae7ab5ba51491be3171b5c6ffbe870d

---


# 配置業務日曆 {#configuring-business-calendars}

*業務日曆* 可定義組織的業務和非業務日（例如法定假日、週末和公司關閉日）。 使用商業日曆時，AEM表格在執行特定日期計算時會跳過非工作日。 在Workbench中，您可以指定是使用商業日曆來處理使用者相關的事件，例如工作提醒、期限和呈報，或是使用與使用者無關的動作，例如計時器事件和等待服務。

例如，任務提醒被配置為在任務分配給用戶後三個工作天內發生。 任務在星期四分配。 不過，由於週五是全國假日，接下來的三天不是週末， 因此，提醒會在下週三發出。

>[!NOTE]
>
>當使用商業日曆計算日期和時間時，AEM表格會使用執行中伺服器的日期和時間，而不會針對時區間的差異進行調整。 例如，如果任務提醒排程在倫敦執行的伺服器上上午10:00發生，但收到提醒的使用者位於紐約市，則使用者會在當地時間上午5:00收到提醒。

## 使用預設商業日曆 {#using-the-default-business-calendar}

AEM表格提供預設的商業日曆(稱為 *內建日曆*)，可將星期六和星期日指定為非工作日。 如果組織中的所有使用者都有相同的非工作日，您可以更新預設的業務日曆以符合您的組織。 僅使用預設業務日曆時，您無需在「用戶管理」中啟用業務日曆或提供任何映射。 當未定義其他商業日曆時，AEM表單會使用預設的商業日曆。

## 設定多個業務日曆 {#setting-up-multiple-business-calendars}

如果組織中的某些用戶有不同的非工作日，您可以定義多個業務日曆並配置映射，以允許用戶對業務日曆執行時期解析。

### 定義多個業務日曆 {#define-multiple-business-calendars}

1. 決定如何將適當的業務日曆與用戶關聯。 將業務日曆與用戶關聯有兩種方法：

   **** 群組成員資格：您可以根據使用者的群組成員資格，將商業日曆指派給使用者。 在這種情況下，群組中的每個使用者都會使用相同的商業日曆。

   如果使用者是兩個不同群組的成員，而這些群組已對應至兩個不同的商業日曆，AEM表單會使用其搜尋結果中找到的第一個日曆。 在這種情況下，請考慮使用業務日曆鍵將用戶與業務日曆關聯。

   **** 業務日曆鍵：您可以根據業務日曆鍵（在「用戶管理」中指定的設定）將業務日曆分配給用戶。 然後，您就可以在表單工作流程中將業務日曆索引鍵映射至業務日曆。

   您指派商業日曆索引鍵給使用者的方式取決於您是使用企業、本機或混合網域。 如需設定網域的詳細資訊，請參 [閱新增網域](/help/forms/using/admin-help/adding-domains.md#adding-domains)。

   如果您使用本機或混合網域，則使用者的相關資訊只會儲存在使用者管理資料庫中。 要為這些用戶設定業務日曆鍵，請在「用戶管理」中添加或編輯用戶時，在「業務日曆鍵」欄位中輸入字串。 (請參 [閱新增和設定使用者](/help/forms/using/admin-help/adding-configuring-users.md#adding-and-configuring-users)。)然後，您就可以在表單工作流程中將業務日曆鍵（字串）對應至業務日曆。 (請參 [閱將使用者和群組對應至業務日曆](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar))。

   如果您使用企業域，則有關用戶的資訊駐留在第三方儲存系統中，如用戶管理與用戶管理資料庫同步的LDAP目錄。 這允許您將業務日曆鍵映射到LDAP目錄中的欄位。 例如，如果目錄中的每個用戶記錄都包含「國家」欄位，並且您想根據用戶所在的國家分配業務日曆，請在指定目錄的用戶設定時，在「業務日曆關鍵字」欄位中指定「國家」欄位名稱。 (請參 [閱配置目錄](/help/forms/using/admin-help/configuring-directories.md#configuring-directories)。)然後，您可以將業務日曆鍵（為LDAP目錄中的「國家」欄位定義的值）映射到表單工作流中的業務日曆。 (請參 [閱將使用者和群組對應至業務日曆](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar))。

1. 在表單工作流程中，為共用相同非工作日的每組使用者定義日曆。 (請參 [閱建立或更新業務日曆](configuring-business-calendars.md#create-or-update-a-business-calendar)。)
1. 在表單工作流程中，對應每個日曆的商業日曆索引鍵或群組成員資格。 (請參 [閱將使用者和群組對應至業務日曆](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar))。
1. 在Workbench中，流程開發人員會選擇是否使用商業日曆來提醒、截止期限和呈報。 (請參 [閱工作台說明](https://www.adobe.com/go/learn_aemforms_workbench_63)。)

   如果流程開發人員選擇使用商業日曆，AEM表單會根據「使用者管理」設定和「管理控制台」中定義的商業日曆對應，動態選取適當的商業日曆，或者，如果沒有對應，則會使用預設日曆。

   如果流程開發人員不使用業務日曆，則事件的日期計算會將每天視為業務日。 例如，將任務期限配置為在任務分配給用戶後三天內完成。 任務在星期四分配。 任務期限是週日，儘管是週末。

## 建立或更新業務日曆 {#create-or-update-a-business-calendar}

如果您的組織包含具有不同非工作日的不同使用者集，您可以定義多個業務日曆。 您也可以變更現有的日曆，包括隨AEM表單提供的預設內建日曆。

>[!NOTE]
>
>如果您未建立新的商業日曆，則會使用預設日曆。

1. 在管理控制台中，按一下「服務>表單工作流程>商業日曆」。
1. 要添加新的業務日曆，請單 ![擊bus_cal_plus](assets/bus_cal_plus.png)。 「新 *日曆* 」文字會出現在下拉式清單中。 選取文字，然後輸入日曆的其他名稱。

   若要編輯現有的業務日曆，請從下拉式清單中選取它。

1. 在「預設非工作日」下，選擇任何每週非工作日，如週末。
1. [可選] ：選擇使用工作時數，並指定工作日的開始和結束時間。

   如果您選取此選項，在指定時間範圍之前發生的事件會移至時間範圍的開始，而在時間範圍之後發生的事件則會移至下一個工作日的開始時間。

   例如，假設某個情況是，某位用戶在星期二的凌晨2:00被指派了一個任務，該任務的提醒設定為兩個工作天。 如果沒有營業時間，提醒會在週四凌晨2點發生。 如果營業時間設定為上午8:00至下午5:00，提醒會推至週四上午8:00。 如果沒有營業時間，如果週二下午6:00建立了提醒活動，則提醒將發生在週四的營業時間之後。 營業時間設定為上午8:00至下午5:00，提醒會在星期五上午8:00發出。

1. 在左邊的日曆中，按兩下任何其他非工作日，例如節假日。 不能選擇過去的天數。 您選取的非工作日會顯示在右側的清單中，而日期會在一行中顯示兩次。 選擇左側的日期，以輸入非工作日的名稱或說明。

   若要從清單中移除非工作日，請按一 ![下該日旁的bus_cal_trash](assets/bus_cal_trash.png) 。

1. [可選] ：如果此日曆將是預設日曆，請選擇預設日曆。 當用戶關聯事件不存在其他日曆映射或沒有為計時器事件或等待服務指定業務日曆時，將使用預設日曆。 您無法刪除預設日曆。
1. 定義完非工作日後，選擇「啟用日曆」使其處於活動狀態，然後按一下「保存」。

   如果您要更新現有日曆，新版本會立即生效，並用於所有商業日曆計算，包括已執行的任務。

   >[!NOTE]
   >
   >如果您未啟用日曆，則會使用預設日曆。

## 將使用者和群組對應至業務行事歷 {#mapping-users-and-groups-to-a-business-calendar}

您可以使用兩種方法將業務日曆與用戶關聯。 您可以根據業務日曆密鑰或根據用戶所屬的目錄組將業務日曆分配給用戶。 您可以使用「對應」標籤來指定AEM表單將使用的方法，也可以將商業日曆索引鍵和群組對應至商業日曆。 有關將業務日曆鍵與用戶關聯的詳細資訊，請參 [閱設定多個業務日曆](configuring-business-calendars.md#setting-up-multiple-business-calendars)。

### 根據業務日曆鍵將業務日曆與用戶關聯 {#associate-business-calendars-with-users-based-on-business-calendar-keys}

1. 在管理控制台中，按一下「服務>表單工作流程>商業日曆」，然後按一下「對應」標籤。
1. 在「系統將使用」清單中，選擇「用戶管理器」「業務日曆」「關鍵解析度」。
1. 選擇顯示用戶管理器業務日曆鍵。 此時會顯示一個清單，其中包含在「用戶管理」中定義的一組唯一的業務日曆鍵。

   對於本機和混合網域，清單會顯示在「使用者管理」的「商業日曆索引鍵」欄位中輸入的值。 對於企業(LDAP)網域，該清單顯示從LDAP域設定中配置的LDAP欄位（例如「國家」）返回的唯一集。

   如果用戶管理管理員尚未定義任何業務日曆鍵，則清單將為空。

1. 對於UM業務日曆鍵清單中的每個項目，選擇一個日曆。
1. 按一下「儲存」。

### 根據目錄服務組將業務日曆與用戶和組關聯 {#associate-business-calendars-with-users-and-groups-based-on-directory-service-groups}

1. 在管理控制台中，按一下「服務>表單工作流程>商業日曆」，然後按一下「對應」標籤。
1. 在「系統將使用」清單中，選擇「目錄伺服器定義的組」。
1. 在「映射」頁籤上，選擇「顯示目錄服務組」。 此時會顯示一個清單，其中包含已在「使用者管理」中定義的群組。 (請參 [閱目錄設定](/help/forms/using/admin-help/configuring-directories.md#directory-settings)。)

   >[!NOTE]
   >
   >在Workbench中，如果您已設定使用者服務來使用商業日曆，且服務已指派給群組，AEM表單會使用此處指定的群組對應來解析群組的日曆。 AEM表格一律會使用群組對應來解析群組的行事歷，即使您使用商業行事歷索引鍵來解析使用者的行事歷。 如果找不到群組對應，則會使用預設的商業日曆。

1. 對於「目錄服務組」清單中的每個項目，選擇一個日曆。
1. 按一下「儲存」。

## 導出和導入業務日曆 {#exporting-and-importing-business-calendars}

AEM表格可讓您將商業日曆匯出並匯入為XML檔案。 您可以使用此功能將日曆從測試系統移至生產系統。

>[!NOTE]
>
>此功能會匯出和匯入所有已定義的商業日曆，包括AEM表單提供的預設商業日曆。 與現有日曆同名的匯入商業日曆將覆寫現有日曆。

### 匯出業務日曆 {#export-business-calendars}

1. 在管理主控台中，按一下「服務>表單工作流程>商業日曆」。
1. 按一下「匯出」並儲存XML檔案。

### 匯入業務日曆 {#import-business-calendars}

1. 在管理主控台中，按一下「服務>表單工作流程>商業日曆」。
1. 按一下「匯入」。
1. 選擇包含導出的業務日曆的XML檔案，然後按一下「開啟」。

## 刪除業務日曆 {#delete-a-business-calendar}

您可以移除組織不再需要的任何業務日曆。 如果您刪除仍對應至使用者和群組的商業日曆，則會使用預設日曆。

1. 在管理控制台中，按一下「服務>表單工作流程>商業日曆」。
1. 選擇日曆。
1. 按一下「刪除」。

