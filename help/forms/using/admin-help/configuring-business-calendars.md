---
title: 配置業務日曆
seo-title: Configuring Business Calendars
description: 業務日曆為您的組織定義業務日和非業務日。 瞭解如何配置業務日曆。
seo-description: Business calendars define business and non-business days for your organization. Learn how to configure the business calendars.
uuid: 0ba610b8-72a8-480c-8783-70d98cbe890a
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/configuring_forms_workflow
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: 7a85e13d-4800-47c4-812a-5c6e2355298a
exl-id: 4282718a-41f1-411a-9cd7-8c470005107d
source-git-commit: b220adf6fa3e9faf94389b9a9416b7fca2f89d9d
workflow-type: tm+mt
source-wordcount: '1908'
ht-degree: 0%

---

# 配置業務日曆 {#configuring-business-calendars}

*業務日曆* 為您的組織定義業務日和非業務日（例如法定假日、週末和公司關閉日）。 使用業務日曆時，AEM表單在執行特定日期計算時跳過非業務日。 在Workbench中，您可以指定是使用業務日曆來處理與用戶關聯的事件，如任務提醒、截止日期和升級，還是使用與用戶不關聯的活動，如計時器事件和等待服務。

例如，將任務提醒配置為在將任務分配給用戶後三個工作日進行。 任務在星期四分配。 但是，接下來的三天不是工作日，因為星期五是全國假日，接下來的兩天是週末。 因此，下週三將發出提醒。

>[!NOTE]
>
>在使用業務日曆計算日期和時間時AEM，表單使用運行它的伺服器的日期和時間，並且不會根據時區之間的差異進行調整。 例如，如果任務提醒計畫在倫敦運行的伺服器上上午10:00發生，但接收提醒的用戶位於紐約市，則用戶將在當地時間上午5:00接收提醒。

## 使用預設業務日曆 {#using-the-default-business-calendar}

表AEM單提供預設業務日曆(命名為 *內置日曆*)，將星期六和星期日指定為非工作日。 如果組織中的所有用戶具有相同的非工作日，則您可以更新預設業務日曆以適合您的組織。 僅使用預設業務日曆時，您無需在「用戶管理」中啟用業務日曆或提供任何映射。 如果沒有定義其他業務日曆，AEM表單將使用預設業務日曆。

## 設定多個業務日曆 {#setting-up-multiple-business-calendars}

如果組織中的某些用戶具有不同的非工作日，則您可以定義多個業務日曆並配置允許用戶運行時解析業務日曆的映射。

### 定義多個業務日曆 {#define-multiple-business-calendars}

1. 確定如何將相應的業務日曆與用戶關聯。 將業務日曆與用戶關聯有兩種方法：

   **組成員身份：** 您可以根據用戶的組成員身份將業務日曆分配給用戶。 在這種情況下，組中的每個用戶將使用相同的業務日曆。

   如果用戶是兩個不同組的成員，並且這些組映射到兩個不同的業務日曆AEM，則表單將使用它在搜索結果中找到的第一個日曆。 在這種情況下，請考慮使用業務日曆鍵將用戶與業務日曆關聯。

   **業務日曆鍵：** 您可以根據業務日曆鍵（在用戶管理中指定的設定）將業務日曆分配給用戶。 然後，在表單工作流中將業務日曆鍵映射到業務日曆。

   您為用戶分配業務日曆密鑰的方式取決於您是使用企業域、本地域還是混合域。 有關設定域的詳細資訊，請參見 [添加域](/help/forms/using/admin-help/adding-domains.md#adding-domains)。

   如果使用本地域或混合域，則有關用戶的資訊僅儲存在用戶管理資料庫中。 要為這些用戶設定業務日曆鍵，請在「用戶管理」中添加或編輯用戶時在「業務日曆鍵」欄位中輸入一個字串。 (請參閱 [添加和配置用戶](/help/forms/using/admin-help/adding-configuring-users.md#adding-and-configuring-users)。) 然後，在表單工作流中將業務日曆鍵（字串）映射到業務日曆。 (請參閱 [將用戶和組映射到業務日曆](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)。)

   如果使用的是企業域，則有關用戶的資訊將駐留在第三方儲存系統中，如「用戶管理」與「用戶管理」資料庫同步的LDAP目錄。 這允許您將業務日曆密鑰映射到LDAP目錄中的欄位。 例如，如果目錄中的每個用戶記錄都包含「國家」欄位，並且要根據用戶所在的國家分配業務日曆，則在指定目錄的用戶設定時，在「業務日曆密鑰」欄位中指定「國家」欄位名稱。 (請參閱 [配置目錄](/help/forms/using/admin-help/configuring-directories.md#configuring-directories)。) 然後，您可以將業務日曆鍵（為LDAP目錄中的「國家」欄位定義的值）映射到表單工作流中的業務日曆。 (請參閱 [將用戶和組映射到業務日曆](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)。)

1. 在表單工作流中，為共用相同非工作日的每組用戶定義日曆。 (請參閱 [建立或更新業務日曆](configuring-business-calendars.md#create-or-update-a-business-calendar)。)
1. 在表單工作流中，映射每個日曆的業務日曆密鑰或組成員資格。 (請參閱 [將用戶和組映射到業務日曆](configuring-business-calendars.md#mapping-users-and-groups-to-a-business-calendar)。)
1. 在Workbench中，流程開發人員選擇是否使用業務日曆來提醒、截止期和升級。 (請參閱 [工作台幫助](https://www.adobe.com/go/learn_aemforms_workbench_63)。)

   如果流程開發人員選擇使用業務日曆AEM，則表單將根據「用戶管理」設定和在管理控制台中定義的業務日曆映射動態選擇相應的業務日曆，或者，如果不存在映射，則使用預設日曆。

   如果流程開發人員不使用業務日曆，則事件的日期計算會將每天視為業務日。 例如，將任務截止時間配置為在將任務分配給用戶後三天進行。 任務在星期四分配。 任務截止日期是週日，儘管是週末。

## 建立或更新業務日曆 {#create-or-update-a-business-calendar}

如果您的組織包含具有不同非工作日的不同用戶集，則您可以定義多個業務日曆。 您還可以更改現有日曆，包括隨表單提供的預設內置日AEM歷。

>[!NOTE]
>
>如果您未建立新的業務日曆，則將使用預設日曆。

1. 在管理控制台中，按一下「服務」>「Forms」工作流>「業務日曆」。
1. 要添加新業務日曆，請按一下 ![bus_cal_plus](assets/bus_cal_plus.png)。 文本 *新建日曆* 清單中。 選擇文本並鍵入日曆的另一個名稱。

   要編輯現有業務日曆，請從下拉清單中選擇該日曆。

1. 在預設非工作日下，選擇任何每週非工作日，如週末。
1. [可選] 選擇「使用營業時間」並指定營業日的開始時間和結束時間。

   如果選擇此選項，則在指定時間範圍之前發生的事件將移至時間範圍的開始，而在時間範圍之後發生的事件將移至下一個工作日的開始時間。

   例如，考慮一種情況，即在星期二的凌晨2:00為用戶分配了任務，並且該任務的提醒設定為兩個工作日。 如果沒有營業時間，提醒將在週四凌晨2點發生。 如果將營業時間設定為上午8:00至下午5:00，則提醒將推至週四上午8:00。 如果沒有營業時間，如果週二下午6點建立了提醒事件，則提醒將在週四營業時間之後發生。 營業時間設定為上午8:00至下午5:00，提醒將在星期五上午8:00發出。

1. 在左側的日曆中，按兩下任何其他非工作日（如節假日）。 不能選擇過去的天數。 您選擇的非工作日顯示在右側的清單中，日期在一行中出現兩次。 選擇左側的日期以鍵入非工作日的名稱或說明。

   要從清單中刪除非工作日，請按一下 ![匯流排_cal_垃圾](assets/bus_cal_trash.png) 就在這裡。

1. [可選] 如果此日曆將是預設日曆，請選擇預設日曆。 當用戶關聯事件不存在其他日曆映射或沒有為計時器事件或等待服務指定業務日曆時，將使用預設日曆。 無法刪除預設日曆。
1. 定義完非工作日後，選擇「啟用日曆」使其處於活動狀態，然後按一下「保存」。

   如果要更新現有日曆，則新版本將立即生效，並用於所有業務日曆計算，包括已運行的任務。

   >[!NOTE]
   >
   >如果未啟用日曆，則將使用預設日曆。

## 將用戶和組映射到業務日曆 {#mapping-users-and-groups-to-a-business-calendar}

可以使用兩種方法將業務日曆與用戶關聯。 您可以根據業務日曆密鑰或用戶所屬的目錄組將業務日曆分配給用戶。 使用「映射」頁籤可以指定表單AEM將使用的方法，還可以將業務日曆鍵和組映射到業務日曆。 有關將業務日曆鍵與用戶關聯的詳細資訊，請參閱 [設定多個業務日曆](configuring-business-calendars.md#setting-up-multiple-business-calendars)。

### 根據業務日曆鍵將業務日曆與用戶關聯 {#associate-business-calendars-with-users-based-on-business-calendar-keys}

1. 在管理控制台中，按一下「服務」>「表單」工作流>「業務日曆」，然後按一下「映射」頁籤。
1. 在「系統將使用」清單中，選擇「用戶管理器」「業務日曆」「密鑰解析」。
1. 選擇「顯示用戶管理器」「業務日曆密鑰」。 此時將顯示一個清單，其中包含在用戶管理中定義的一組唯一的業務日曆鍵。

   對於本地和混合域，該清單將顯示在用戶管理的「業務日曆關鍵字」欄位中輸入的值。 對於企業(LDAP)域，該清單顯示從LDAP域設定中配置的LDAP欄位（例如「國家/地區」）返回的唯一集。

   如果用戶管理管理員未定義任何業務日曆鍵，則清單將為空。

1. 對於UM業務日曆密鑰清單中的每個項目，選擇一個日曆。
1. 按一下「儲存」。

### 將業務日曆與基於目錄服務組的用戶和組關聯 {#associate-business-calendars-with-users-and-groups-based-on-directory-service-groups}

1. 在管理控制台中，按一下「服務」>「表單」工作流>「業務日曆」，然後按一下「映射」頁籤。
1. 在「系統將使用」清單中，選擇由目錄伺服器定義的組。
1. 在「映射」頁籤上，選擇「顯示目錄服務組」。 此時將顯示一個清單，其中包含已在用戶管理中定義的組。 (請參閱 [目錄設定](/help/forms/using/admin-help/configuring-directories.md#directory-settings)。)

   >[!NOTE]
   >
   >在Workbench中，如果已將用戶服務配置為使用業務日曆，並且服務已分配給組，AEM則表單將使用此處指定的組映射來解析組的日曆。 AEM表單始終使用組映射來解析組的日曆，即使您使用業務日曆鍵來解析用戶的日曆。 如果未找到組映射，則將使用預設業務日曆。

1. 對於目錄服務組清單中的每個項目，選擇日曆。
1. 按一下「儲存」。

## 導出和導入業務日曆 {#exporting-and-importing-business-calendars}

AEM表單使您能夠將業務日曆作為XML檔案導出和導入。 您可以使用此功能將日曆從臨時系統移動到生產系統。

>[!NOTE]
>
>此功能導出和導入所有定義的業務日曆，包括表單提供的預設業AEM務日曆。 與現有日曆同名的導入業務日曆將覆蓋現有日曆。

### 導出業務日曆 {#export-business-calendars}

1. 在管理控制台中，按一下「服務」>「表單工作流」>「業務日曆」。
1. 按一下導出並保存XML檔案。

### 導入業務日曆 {#import-business-calendars}

1. 在管理控制台中，按一下「服務」>「表單工作流」>「業務日曆」。
1. 按一下「導入」。
1. 選擇包含導出的業務日曆的XML檔案，然後按一下「開啟」。

## 刪除業務日曆 {#delete-a-business-calendar}

您可以刪除組織不再需要的任何業務日曆。 如果刪除仍映射到用戶和組的業務日曆，則將使用預設日曆。

1. 在管理控制台中，按一下「服務」>「Forms」工作流>「業務日曆」。
1. 選擇日曆。
1. 按一下刪除。
