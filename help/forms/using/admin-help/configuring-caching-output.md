---
title: 配置輸出快取
seo-title: Configuring caching for Output
description: 輸出服務會快取表單設計、片段和影像。 了解如何設定輸出的快取。
seo-description: The Output service caches the form designs, fragments and images. Learn how to configure the caching for output.
uuid: 00bffeb5-c9c4-4a46-98b5-e14ec9f4514e
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/configuring_output
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: e5398abd-f62c-485d-9f4b-a316c0de2b6b
exl-id: 1015f5c9-6ab8-4656-a5c8-40f82b9938b9
source-git-commit: b220adf6fa3e9faf94389b9a9416b7fca2f89d9d
workflow-type: tm+mt
source-wordcount: '1440'
ht-degree: 0%

---

# 配置輸出快取  {#configuring-caching-for-output}

輸出服務將XML表單資料與在設計器中建立的表單設計合併，以建立各種格式的文檔輸出流。

管理控制台中的「輸出」頁包含控制輸出服務快取項目的方式的設定。 您可以調整這些設定以最佳化輸出服務的效能。

輸出服務快取以下項：

* **表單設計：** 輸出服務會快取從存放庫或HTTP來源擷取的表單設計。 此快取可改善效能，因為對於後續的轉譯請求，輸出服務會從快取（而非從存放庫）擷取表單設計。
* **片段和影像：** 輸出服務可快取表單設計中使用的片段和影像。 當輸出服務快取這些物件時，會改善效能，因為片段和影像只會在第一個請求時從存放庫讀取。

輸出將快取儲存在兩個位置：

* **記憶體中：** 項儲存在記憶體中以便快速訪問。 記憶體內快取的大小有限，當您重新啟動伺服器時會刪除該快取。
* **磁碟上：** 項儲存在伺服器的檔案系統中。 磁碟快取的容量比記憶體內快取大，當您重新啟動伺服器時，它會保留。 磁碟快取的位置取決於您的應用程式伺服器。 有關更改磁碟快取位置的資訊，請參見 [指定輸出的檔案位置](/help/forms/using/admin-help/specify-file-locations-output.md#specify-file-locations-for-output).

## 指定快取模式 {#specifying-the-cache-mode}

輸出支援兩種快取模式：

* 無條件
* 使用快取檢查點

如果在快取模式之間切換，請重新啟動輸出服務，使更改生效。 若要重新啟動此服務，請使用Workbench或參閱 [啟動或停止與AEM表單模組相關聯的服務](/help/forms/using/admin-help/starting-stopping-services.md#start-or-stop-the-services-associated-with-aem-forms-modules) 的說明。

在模式之間切換時，快取檢查點時間會自動重置。

### 使用無條件快取 {#using-unconditional-caching}

在此模式中，輸出服務收到要求時，會驗證所需的資源（表單設計和任何相關資產，例如片段和影像）。 輸出服務會比較儲存庫中資源的時間戳與快取中資源的時間戳。 如果快取中的資源較舊，則輸出服務會更新它。

此快取模式可保證使用最新的資源。 但是，效能會受到影響，因為輸出服務會根據儲存庫的每個要求來驗證快取項目。 此快取模式適用於資源經常更新且效能不是主要考量的開發和預備環境。

**指定無條件快取**

1. 在管理控制台中，按一下「服務>輸出」。
1. 在「輸出快取控制設定」下，選擇「無條件」，然後按一下「保存」。

### 使用快取檢查點 {#use-the-cache-check-point}

在此模式中，當快取資源的時間戳早於快取檢查點時間時，輸出服務僅檢查儲存庫中是否有較新版本的資源。 最後一個快取檢查點時間顯示在管理控制台的「輸出」頁上。

在效能是問題且資源變更不頻繁的高效能生產環境中使用此快取模式。 當要部署對儲存庫資源所做的任何更改時，可以重置快取檢查點時間。

**指定快取檢查點的使用**

1. 在管理控制台中，按一下「服務」>「輸出」。
1. 在「輸出快取控制設定」下，僅在快取檢查點時間之前完成其上次驗證時選擇，然後按一下「保存」。

**重置快取檢查點**

1. 在管理控制台中，按一下「服務>輸出」。
1. 在輸出快取控制設定下，按一下快取檢查點。

### 重置快取內容 {#reset-the-cache-contents}

您可以隨時清除快取的內容。 快取重設後，每個表單的第一個請求會變慢，因為輸出服務會執行完整轉譯並建立新的快取內容。

1. 在管理控制台中，按一下「服務>輸出」。
1. 在「輸出快取控制設定」下，按一下「重置快取」。

## 配置快取設定 {#configuring-cache-settings}

您可以指定「輸出」用於快取的設定，以便最佳化AEM表單環境的效能。

若要存取這些設定，請在管理控制台中按一下「服務>輸出」 。

>[!NOTE]
>
>快取的磁碟要求應等於儲存庫。

### 指定全局快取設定 {#specifying-global-cache-settings}

中的設定 **全局快取設定** 區域會影響所有類型的快取。 如果更改了其中一項設定，請重新啟動輸出服務，使更改生效。 若要重新啟動此服務，請使用Workbench或參閱 [啟動或停止與AEM表單模組相關聯的服務](/help/forms/using/admin-help/starting-stopping-services.md#start-or-stop-the-services-associated-with-aem-forms-modules) 的說明。

**最大快取文檔大小(KB):** 表單設計或其他資源的最大大小（以千位元組為單位），可以儲存在任何記憶體快取中。 此全局設定適用於所有記憶體內快取。 如果資源大於此值，則不會快取記憶體中的資源。 預設值為1024 KB。 此設定不影響磁碟快取。

**表單呈現快取已啟用：** 依預設，會選取此選項，這表示已轉譯的表單會快取以供後續擷取。 此設定對輸出服務的效能幾乎沒有影響，因為它不快取非互動式文檔。 當您將輸出服務用於在客戶端上呈現的非互動文檔時，此選項確實有效。

### 快取表單設計 {#caching-form-designs}

輸出服務收到轉譯請求時，會從存放庫或HTTP來源擷取表單設計並加以快取。 此快取可改善效能，因為對於後續的轉譯請求，輸出服務會從快取（而非從存放庫）擷取表單設計。

輸出服務始終在磁碟上快取表單設計。 如果表單設計儲存在伺服器上，則這些檔案將被視為磁碟快取。 輸出服務也根據 **記憶體模板快取** 的上界。 如果更改了其中的任何設定，請重新啟動輸出服務，使更改生效。 若要重新啟動此服務，請使用Workbench或參閱 [啟動或停止與AEM表單模組相關聯的服務](/help/forms/using/admin-help/starting-stopping-services.md#start-or-stop-the-services-associated-with-aem-forms-modules) 的說明。

**模板配置快取大小：** 要保留在記憶體中的模板配置對象的最大數量。 預設值為 100。建議您將此值設定為大於或等於「範本快取大小」值。 此設定不影響磁碟快取。

**模板快取大小：** 要保留在記憶體中的模板內容對象的最大數量。 預設值為 100。此設定不影響磁碟快取。

**已啟用：** 依預設，會選取此核取方塊，表示表單範本會快取於記憶體中。 未選擇此選項時，僅快取磁碟上的表單模板。

### 快取片段和影像 {#caching-fragments-and-images}

輸出服務在磁碟上快取用於表單設計中的片段和影像。 這會改善效能，因為片段和影像只會從第一個要求的存放庫讀取。 接著，在後續的請求中，輸出服務會從磁碟快取中讀取片段和影像。 片段和影像僅快取在磁碟上，而不是記憶體中。

您可以使用下列設定來控製片段和影像的磁碟上快取。 這些設定位於 **模板資源快取設定** 區域：

**資源快取** 從清單中選取下列其中一個選項：

**為片段和影像啟用：** 輸出服務快取片段和影像。 這是預設選項。

**為片段啟用：** 輸出服務快取片段，但不快取影像。

**已禁用：** 輸出服務不會快取片段或影像。

**清理間隔（秒）:** 指定輸出服務刪除舊的無效快取檔案的頻率。 輸出服務未刪除有效的快取檔案。 如果您變更了清除間隔，請重新啟動輸出服務，讓變更生效。 若要重新啟動此服務，請使用Workbench或參閱啟動或停止與AEM表單模組相關聯的服務以取得指示。

## 快取的叢集考量事項 {#clustering-considerations-for-caches}

在群集環境中，每個節點都會維護其自己的記憶體和磁碟快取。 每個節點上的快取內容取決於在該節點上呈現的表單。

快取的位置在群集的每個節點上必須相同（磁碟和路徑相同）。 請勿將快取放置在共用儲存上。

如果您使用管理控制台中的「輸出」頁來更改特定節點的快取設定，則當請求發送到該節點時，其他節點上的快取設定會更新。 此行為也適用於「重設快取」按鈕。 如果按一下某個節點的「重置快取」按鈕，則會立即從該節點中刪除快取。 當請求傳至該節點時，會清除其他節點上的快取。
