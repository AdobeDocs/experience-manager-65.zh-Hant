---
title: 設定電子郵件端點
seo-title: 設定電子郵件端點
description: 瞭解如何設定電子郵件端點。
seo-description: 瞭解如何設定電子郵件端點。
uuid: d47bb45b-0e0e-43ca-9e25-e347d0e60206
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/managing_endpoints
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: dcf15c42-9ec6-4d1c-ad41-083aa0b8c7ae
translation-type: tm+mt
source-git-commit: 317fadfe48724270e59644d2ed9a90fbee95cf9f

---


# 設定電子郵件端點 {#configuring-email-endpoints}

電子郵件端點可讓使用者將一或多份檔案（以電子郵件附件形式）傳送至指定的電子郵件帳戶，以叫用服務。 電子郵件收件箱充當附件的收集點。 服務會監控收件箱並處理附件。 轉換結果被轉發給在端點中定義的用戶。

對於電子郵件端點，授權使用者可以透過電子郵件將檔案傳送至適當帳戶來叫用程式。 結果會傳回給提交使用者（依預設）或端點設定中定義的使用者。

在配置電子郵件端點之前，請建立POP3或IMAP電子郵件帳戶供端點使用。 為每種轉換類型設定個別帳戶。 例如，一個帳戶可設定為從傳入的檔案附件產生標準PDF檔案，而另一個帳戶則可設定為產生安全的PDF檔案。

>[!NOTE]
>
>每個電子郵件地址只能對應至一個電子郵件端點。 即使已停用其他電子郵件端點，您也無法將多個電子郵件端點設定為單一電子郵件地址。

所有電子郵件端點都已為電子郵件收件匣配置授權的使用者名稱和密碼，這是呼叫服務時所需的。 電子郵件帳戶受其所設定之郵件伺服器系統保護。

如果您的使用者以檔案和轉換路徑名稱傳送具有西歐語言字元的檔案，則必須使用支援必要編碼類型(Latin1 [ISO-8859-1]、西歐 [Windows]或UTF-8)的電子郵件應用程式。 如需詳細資訊，請參 *閱適用於您應用程式伺服器的安裝和部署AEM表格檔案* 。

在設定電子郵件端點之前，請先設定電子郵件服務。 (請參閱 [設定預設電子郵件端點設定](configuring-email-endpoints.md#configure-default-email-endpoint-settings))。電子郵件服務的設定參數有兩個用途：

* 要配置所有電子郵件端點的通用屬性
* 為所有電子郵件端點提供預設值

## 為電子郵件端點配置SSL {#configure-ssl-for-an-email-endpoint}

您可以配置POP3、IMAP或SMTP，以便為電子郵件端點使用安全套接字層(SSL)。

1. 在電子郵件伺服器上，根據製造商的說明檔案，為POP3、IMAP或SMTP啟用SSL。
1. 從電子郵件伺服器匯出用戶端憑證。
1. 使用keytool程式將用戶端憑證檔案匯入應用程式伺服器的Java Virtual Machine(JVM)憑證存放區。 此步驟的步驟將取決於JVM和客戶端安裝路徑。

   例如，如果您在Microsoft Windows Server® 2003上使用與JDK 1.5.0一起安裝的預設Oracle WebLogic Server，請在命令提示符下鍵入以下文本：

   `keytool -import -file client_certificate -alias myalias -keystore BEA_HOME\jdk150_04\jre\security\cacerts`

1. 出現提示時，輸入密碼(對於Java，預設密碼為 `changeit`)。 您會收到訊息，指出憑證已成功匯入。
1. 使用管理控制台將電子郵件端點新增至服務。
1. 在管理控制台中建立電子郵件端點。 配置端點設定時，請為傳入消息選擇「POP3/IMAP SSL Enabled」（POP3/IMAP SSL已啟用），為傳出消息選擇「SMTP SSL Enabled」（SMTP SSL已啟用），並相應地更改埠屬性。

>[!NOTE]
>
>提示：如果您在使用SSL時遇到問題，請使用電子郵件用戶端（例如Microsoft Outlook）來檢查它是否可以使用SSL存取電子郵件伺服器。 如果電子郵件客戶端無法訪問電子郵件伺服器，則此問題與證書或電子郵件伺服器的配置有關。

## 設定預設電子郵件端點設定 {#configure-default-email-endpoint-settings}

您可以使用「服務管理」頁來配置所有電子郵件端點的通用屬性，並為所有電子郵件端點提供預設值。

要使表單工作流程接收和處理來自用戶的傳入電子郵件，您需要為「完成任務」服務建立一個電子郵件端點。 此電子郵件端點需要其他設定，如「為完 [成任務服務建立電子郵件端點」中所述](configuring-email-endpoints.md#create-an-email-endpoint-for-the-complete-task-service)。

### 變更電子郵件端點的預設值 {#change-the-default-values-for-email-endpoints}

1. 在管理控制台中，按一下「服務>應用程式與服務>服務管理」。
1. 在「服務管理」頁面上，按一下「電子郵件：1.0（元件ID為com.adobe.idp.dsc.provider.service.email.Email）。
1. 在「設定」標籤上，指定預設的電子郵件端點設定，然後按一下「儲存」。

### 預設電子郵件端點設定 {#default-email-endpoint-settings}

**Cron運算式：** 石英用於調度輸入目錄的輪詢的cron表達式。

**重複間隔：** 重複目錄輪詢的次數。 如果端點配置中未指定此值，則預設重複間隔為秒。 預設值為10。 此值不能小於10。

**重複計數：** 輪詢輸入目錄的次數。 如果端點配置中未指定此值，則使用的預設重複計數。 值-1表示目錄的無限掃描。 預設值為-1。

**作業啟動時延遲：** 作業開始掃描端點之前的延遲的預設值（秒）。 預設值為0。

**批大小：** 接收者在每次掃描中處理的電子郵件數，以獲得最佳效能。 值-1表示所有電子郵件。 預設值為2。

**非同步：** 將調用類型標識為非同步或同步。 瞬態和同步進程只能同步調用。 預設值為非同步。

**網域模式：** 用於篩選傳入電子郵件的網域名稱模式。 例如，若使用adobe.com，則只會處理來自adobe.com的電子郵件；會忽略其他網域的電子郵件。

**檔案模式：** 提供程式接受的傳入檔案附件模式。 這包括具有特定副檔名(&amp;ast;.dat、&amp;ast;.xml)、特定名稱（資料）的檔案，以及名稱和副檔名(.[dD][aA]&#39;port&#39;)。 預設值為&amp;ast;。&amp;ast;。

**成功工作的收件者：** 一或多個電子郵件地址，用於傳送電子郵件以指出工作成功。 預設情況下，成功的作業消息始終發送給初始作業的發送者。 支援最多100個收件者。 若要關閉此設定，請將此欄位留空。

**失敗的工作收件者：** 用來傳送電子郵件以指出工作失敗的一或多個電子郵件地址。 預設情況下，系統始終會向發送初始作業的發送者發送失敗的作業消息。 支援最多100個收件者。 若要關閉此設定，請將此欄位留空。

**收件箱主機：** 要掃描的電子郵件提供者的收件箱主機名或IP地址。

**收件箱埠：** 要掃描的電子郵件提供者的收件箱埠號。 如果值為0，則使用預設的IMAP或POP3埠。

**收件箱協定：** 用於掃描收件箱的電子郵件端點的電子郵件協定。 可選擇IMAP或POP3。 收件箱主機郵件伺服器必須支援這些協定。

**收件箱超時：** 指定端點在嘗試連接到收件箱時在取消之前等待的時間。 如果在到達超時值之前未獲取連接，則不會輪詢收件箱。

**收件箱用戶：** 登入電子郵件帳戶所需的使用者名稱。 根據電子郵件伺服器和設定，此名稱可能只是電子郵件的使用者名稱部分，或可能是完整的電子郵件地址。

**收件箱密碼：** 收件箱用戶的密碼。

**POP3/IMAP SSL已啟用：** 選中後，啟用SSL。

**SMTP主機：** 電子郵件提供者用來傳送結果和錯誤訊息的郵件伺服器主機名稱。 例如，mail.corp.example.com。

**SMTP埠：** 用於連接到郵件伺服器的埠。 預設值為25。

**SMTP用戶：** 電子郵件提供者在傳送電子郵件以取得結果和錯誤時要使用的使用者帳戶。

**SMTP密碼：** SMTP帳戶的口令。 某些郵件伺服器不需要SMTP密碼。

**寄件者：** 用於傳送結果和錯誤之電子郵件通知的電子郵件地址(例如user@company.com)。 如果未指定「發送方」值，則電子郵件伺服器將嘗試結合「SMTP用戶」設定中指定的值和在電子郵件伺服器上配置的預設域來確定電子郵件地址。 如果您的電子郵件伺服器沒有預設網域，且您未指定「傳送自」的值，則可能會發生錯誤。 為確保電子郵件的寄件地址正確，請為「寄件者」設定指定值。

**啟用SMTP SSL:** 選中後，通過SMTP啟用SSL。

**將原始電子郵件內文作為附件加入：** 依預設，當您傳送電子郵件至表單伺服器時，訊息的原始文字會包含在訊息的正文中。 要改為將文本作為附件包含，請選擇此選項。

**使用原始主旨行來傳送結果電子郵件：** 依預設，Forms伺服器會在傳送結果電子郵件訊息時，使用「成功電子郵件主旨」和「錯誤電子郵件主旨」設定中指定的值做為主旨行。 若要改用傳送至伺服器的原始電子郵件的相同主旨行，請選取此選項。

**成功電子郵件主旨：** 在您傳送電子郵件至電子郵件端點以開始或繼續處理程式後，會收到來自AEM表單伺服器的回覆電子郵件訊息。 如果您的電子郵件成功，您會收到成功的電子郵件。 如果您的電子郵件失敗，您會收到一封失敗的電子郵件，告知其失敗原因。 此設定可讓您指定為此端點傳送的成功電子郵件訊息的主旨行。

**成功電子郵件內文：** 可讓您指定為此端點傳送的成功電子郵件訊息正文文字。

**錯誤電子郵件主旨首碼：** 可讓您指定在此端點所傳送失敗電子郵件訊息主旨行開頭所使用的文字。

**錯誤電子郵件主題：** 可讓您指定為此端點傳送的失敗電子郵件訊息的主旨行。 此文字會顯示在「錯誤電子郵件主題首碼」後面。

**錯誤電子郵件正文：** 使您能夠指定為此端點發送的失敗電子郵件消息正文中的第一行。

**電子郵件摘要資訊：** 每則成功或失敗訊息都包含一節，其中包含您傳送至表單伺服器的原始電子郵件文字。 此設定指定該部分上方顯示的文本。

**在建立／更新此端點之前驗證收件箱：** 選中此選項後，表單伺服器在建立端點之前檢查SMTP/POP3設定是否正確。 當您按一下「新增」時，會顯示訊息，指出收件匣帳戶是否有效。 如果未選取此選項，AEM Forms伺服器會建立端點，而不會驗證收件匣。

**字元集編碼：** 用於電子郵件的編碼格式。 預設值為UTF-8，大部分日本以外的使用者都會使用。 日文環境的使用者可選擇ISO2022-JP。

**失敗的電子郵件傳送資料夾：** 指定在SMTP郵件伺服器不工作時儲存結果的目錄。

## 電子郵件端點設定 {#email-endpoint-settings}

使用下列設定來設定電子郵件端點。

**名稱：** 標識端點的必備設定。 請勿包含&lt;字元，因為它會截斷顯示在「工作區」中的名稱。 如果輸入URL作為端點的名稱，請確保它符合RFC1738中指定的語法規則。

**說明：** 端點的說明。 請勿包含&lt;字元，因為它會截斷「工作區」中顯示的說明。

**Cron運算式：** 如果電子郵件必須使用cron運算式來排程，請輸入cron運算式。

**重複計數：** 電子郵件端點掃描資料夾或目錄的次數。 值-1表示無限掃描。 預設值為-1。

**重複間隔：** 接收方用於檢查傳入郵件的掃描速率。

**作業啟動時延遲：** 排程器啟動後等待掃描的時間。

**批大小：** 接收者在每次掃描中處理的電子郵件數，以獲得最佳效能。 值-1表示所有電子郵件。 預設值為2。

**用戶名：** 強制設定，此為從電子郵件叫用目標服務時所使用的使用者名稱。 預設值為SuperAdmin。

**域名：** 強制設定，即使用者的網域。 預設值為DefaultDom。

**網域模式：** 指定提供者接受的傳入電子郵件的網域模式。 例如，若使用adobe.com，則只會處理來自adobe.com的電子郵件；會忽略其他網域的電子郵件。

**檔案模式：** 指定提供程式接受的傳入檔案附件模式。 這包括具有特定副檔名(&amp;ast;.dat、&amp;ast;.xml)、特定名稱（資料）或副檔名(&amp;ast;)的複合表達式的檔案。[dD][aA]&#39;port&#39;)。

**成功工作的收件者：** 傳送訊息以指出成功工作的電子郵件地址。 預設情況下，成功的作業消息始終發送給發送者。 如果您鍵入sender，則電子郵件結果會發送到發件人。 支援最多100個收件者。 使用電子郵件地址指定其他收件者，並以逗號(,)分隔。

若要關閉此設定，請將設定留空。 在某些情況下，您會想要觸發程式，而不想收到結果的電子郵件通知。

**失敗的工作收件者：** 發送消息以指示失敗作業的電子郵件地址。 預設情況下，將始終向發送者發送失敗的作業消息。 如果您鍵入sender，則電子郵件結果會發送到發件人。 支援最多100個收件者。 使用電子郵件地址指定其他收件者，並以逗號(,)分隔。

若要關閉此設定，請將設定留空。 在某些情況下，您會想要觸發程式，而不想收到結果的電子郵件通知。

**收件箱主機：** 要掃描的電子郵件提供者的收件箱主機名或IP地址。

**收件箱埠：** 電子郵件伺服器使用的埠。 POP3的預設值為110,IMAP的預設值為143。 如果啟用SSL，則POP3的預設值為995,IMAP的預設值為993。

**收件箱協定：** 用於掃描收件箱的電子郵件端點的電子郵件協定。 值為IMAP或POP3。 收件箱主機郵件伺服器必須支援這些協定。

**收件箱超時：** 電子郵件提供者等待收件匣回應的逾時（以秒為單位）。

**收件箱用戶：** 登入電子郵件帳戶所需的使用者名稱。 視電子郵件伺服器和設定而定，此值可能只是電子郵件的使用者名稱部分，也可能是完整的電子郵件地址。

**收件箱密碼：** 收件箱用戶的密碼。

**POP3/IMAP SSL已啟用：** 選取此設定，強制電子郵件提供者使用SSL來掃描收件匣。 確保郵件伺服器支援SSL。

**SMTP主機：** 電子郵件提供者用來傳送結果和錯誤訊息的郵件伺服器主機名稱。

**SMTP埠：** SMTP埠的預設值為25。

**SMTP用戶：** 電子郵件提供者在傳送結果和錯誤的電子郵件通知時要使用的使用者帳戶。

**SMTP密碼：** SMTP帳戶的口令。 某些郵件伺服器不需要SMTP密碼。

**寄件者：** 用於傳送結果和錯誤之電子郵件通知的電子郵件地址(例如user@company.com)。 如果未指定「發送方」值，則電子郵件伺服器將嘗試結合「SMTP用戶」設定中指定的值和在電子郵件伺服器上配置的預設域來確定電子郵件地址。 如果您的電子郵件伺服器沒有預設網域，且您未指定「傳送自」的值，則可能會發生錯誤。 為確保電子郵件的寄件地址正確，請為「寄件者」設定指定值。

**啟用SMTP SSL:** 選取此設定，強制電子郵件提供者使用SSL來掃描收件匣。 確保郵件伺服器支援SSL。

**失敗的電子郵件傳送資料夾：** 指定在SMTP郵件伺服器不工作時儲存結果的目錄。

**非同步：** 設為同步時，會處理所有輸入檔案並傳回單一回應。 設為非同步時，會針對每個處理的檔案傳送回應。

例如，會為接受單一Word檔案並將該檔案傳回為PDF檔案的服務建立電子郵件端點。 您可以將電子郵件傳送至包含多(3)份Word檔案的端點收件匣。 在處理所有三份檔案時，如果端點設定為同步，則會傳送單一回應電子郵件，並附上所有三份檔案。 如果端點為非同步，則會在每個Word檔案轉換為PDF後傳送回覆電子郵件。 結果會產生三封電子郵件，每封都附有單一PDF附件。

預設值為非同步。

**將原始電子郵件內文作為附件加入：** 依預設，當您傳送電子郵件至表單伺服器時，訊息的原始文字會包含在訊息的正文中。 要改為將文本作為附件包含，請選擇此選項。

**對結果電子郵件使用原始主旨：** 依預設，Forms伺服器會在傳送結果電子郵件訊息時，使用「成功電子郵件主旨」和「錯誤電子郵件主旨」設定中指定的值做為主旨行。 若要改用傳送至伺服器的原始電子郵件的相同主旨行，請選取此選項。

**成功電子郵件主旨：** 在您傳送電子郵件至電子郵件端點以開始或繼續處理程式後，會收到來自AEM表單伺服器的回覆電子郵件訊息。 如果您的電子郵件成功，您會收到成功的電子郵件。 如果您的電子郵件失敗，您會收到一封失敗的電子郵件，告知其失敗原因。 此設定可讓您指定為此端點傳送的成功電子郵件訊息的主旨行。

**成功電子郵件內文：** 可讓您指定為此端點傳送的成功電子郵件訊息正文文字。

**錯誤電子郵件主旨首碼：** 可讓您指定在此端點所傳送失敗電子郵件訊息主旨行開頭所使用的文字。

**錯誤電子郵件主題：** 可讓您指定為此端點傳送的失敗電子郵件訊息的主旨行。 此文字會顯示在「錯誤電子郵件主題首碼」後面。

**錯誤電子郵件正文：** 使您能夠指定為此端點發送的失敗電子郵件消息正文中的第一行。

**電子郵件摘要資訊：** 每則成功或失敗訊息都包含一節，其中包含您傳送至表單伺服器的原始電子郵件文字。 此設定指定該部分上方顯示的文本。

**在建立／更新此端點之前驗證收件箱：** 選中此選項後，表單伺服器在建立端點之前檢查SMTP/POP3設定是否正確。 當您按一下「新增」時，會顯示訊息，指出收件匣帳戶是否有效。 如果未選取此選項，AEM Forms伺服器會建立端點，而不會驗證收件匣。

**操作名稱：** 此設定為強制性。 可指派給電子郵件端點的操作清單。 您在此處選擇的操作將決定在「輸入參數映射」和「輸出參數映射」部分中顯示哪些欄位。

**輸入參數映射：** 用於配置處理服務和操作所需的輸入。 輸入的兩種類型為常值和變數：

**常值：** 電子郵件會使用在顯示欄位中輸入的值。

**變數：** 您可以從電子郵件主旨、內文、標題或寄件者的電子郵件地址映射字串。 若要這麼做，請使用下列其中一個關鍵字：%SUBJECT%、%BODY%、%HEADER%或%SENDER%。 例如，如果您使用%SUBJECT%，則電子郵件主旨內容會用作輸入參數。 要提取附件，請輸入電子郵件端點可用於選擇附件的檔案模式。 例如，輸入&amp;ast;.pdf會選取副檔名為。pdf的附加檔案。 進入&amp;ast;選擇任何附加的文檔。 輸入example.pdf會選取任何附加的檔案，名為example.pdf。

**輸出參數映射：** 用於配置服務和操作的輸出。 輸出參數映射值中的以下字元將在附件檔案名中展開：

**%F代表來源檔案的檔案名稱（不含副檔名）。**

**%E代表** 來源檔案的副檔名。

反斜線(\)的任何出現都會以%%取代。

***注意&#x200B;**:如果服務請求消息包含多個檔案附件，則不能將%F和%E參數用於端點的「輸出參數映射」屬性。 如果服務響應返回多個檔案附件，則不能為多個附件指定相同的檔案名。 如果您未遵循這些建議，則調用的服務會為返回的檔案建立名稱，而且這些名稱是無法預測的。*

下列值可用：

**單一物件：** 電子郵件提供者沒有來源資料夾目標；結果會以附件的形式傳回。 模式為Result/%F.ps，並返回Result%%sourcefilename.ps作為檔案名附件。

**清單：** 模式為Result/%F/，並返回Result%%sourcefilename%%file1作為檔案名附件。

**地圖：** 模式為Result/%F/，源目標為Result%%sourcefilename%%file1和Result%%%sourcefilename%%file2。 如果映射包含多個對象且模式為Result/%F.ps，則響應檔案附件為Result%%%sourcefilename1.ps（輸出1）和Result%%%sourcefilename2.ps（輸出2）。

## 為完成任務服務建立電子郵件端點 {#create-an-email-endpoint-for-the-complete-task-service}

要使表單工作流程接收和處理來自用戶的傳入電子郵件，您需要為「完成任務」服務建立一個電子郵件端點。

1. 在管理控制台中，按一下「服務>應用程式與服務>服務管理」。
1. 在「服務管理」頁上，按一下「完成任務」服務。
1. 在「端點」標籤上，從下拉式清單中選取「電子郵件」，然後按一下「新增」。
1. 在「收件箱主機」框中，鍵入郵件伺服器的主機名或IP地址。
1. 在「收件箱用戶」框中，鍵入登錄到您為處理表單提交而建立的電子郵件帳戶所需的用戶名。 根據電子郵件伺服器和設定，此名稱可能只是電子郵件的使用者名稱部分，也可能是完整的電子郵件地址。
1. 在「收件箱密碼」框中，鍵入「收件箱用戶」的密碼。
1. 在「SMTP主機」框中，鍵入電子郵件提供程式從中發送結果和錯誤消息的郵件伺服器的主機名或IP地址。
1. 在「SMTP用戶」框中，鍵入電子郵件提供程式在發送電子郵件以查找結果和錯誤時要使用的用戶帳戶。 此用戶帳戶可以是您用於收件箱用戶的相同值。
1. 在「SMTP密碼」框中，鍵入SMTP帳戶的密碼。
1. 在「操作名稱」清單中，選擇調用。
1. 在attachmentMap清單中，選取「變數」並在相 `*.*` 鄰方塊中輸入。 這會將入站郵件中的所有附件發送到「完成任務」流程的映射變數。
1. 在mailBody清單中，選擇變數並在相 `%BODY%` 鄰框中鍵入。
1. 在mailFrom清單中，選擇「變數」並在相 `%SENDER%` 鄰框中鍵入。 這會將傳送者地址映射至「完成任務」流程資料。
1. 在結果框中，鍵入 `results`。 這會使「完成任務」或「啟動進程」返回結果字串。
1. 按一下「新增」。

