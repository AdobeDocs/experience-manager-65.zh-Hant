---
title: 配置電子郵件終結點
seo-title: Configuring email endpoints
description: 瞭解如何配置電子郵件終結點。
seo-description: Learn how to configure email endpoints.
uuid: d47bb45b-0e0e-43ca-9e25-e347d0e60206
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/managing_endpoints
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: dcf15c42-9ec6-4d1c-ad41-083aa0b8c7ae
exl-id: 33583a12-4f20-4146-baa4-c9854e454bbf
source-git-commit: 1cdd15800548362ccdd9e70847d9df8ce93ee06e
workflow-type: tm+mt
source-wordcount: '3757'
ht-degree: 0%

---

# 配置電子郵件終結點 {#configuring-email-endpoints}

電子郵件終結點使用戶能夠通過將一個或多個文檔（作為電子郵件附件）發送到指定的電子郵件帳戶來調用服務。 電子郵件收件箱充當附件的收集點。 服務監視收件箱並處理附件。 轉換結果被轉發到端點中定義的用戶。

對於電子郵件終結點，授權用戶可以通過將檔案通過電子郵件發送到相應帳戶來調用進程。 結果將返回給提交用戶（預設情況下）或端點設定中定義的用戶。

在配置電子郵件終結點之前，請建立POP3或IMAP電子郵件帳戶供終結點使用。 為每種轉換類型設定單獨的帳戶。 例如，可以將一個帳戶配置為從傳入的檔案附件生成標準PDF文檔，而將另一個帳戶配置為生成安全PDF文檔。

>[!NOTE]
>
>每個電子郵件地址必須只映射到一個電子郵件終結點。 您無法將多個電子郵件端點配置為單個電子郵件地址，即使其他電子郵件端點被禁用。

所有電子郵件終結點都配置了電子郵件收件箱的授權用戶名和密碼，在調用服務時需要這些用戶名和密碼。 電子郵件帳戶受其上配置的郵件伺服器系統保護。

如果用戶在檔案和轉換路徑名稱中發送帶有西歐語言字元的文檔，則他們必須使用支援所需編碼類型的電子郵件應用程式(Latin1) [ISO-8859-1]，西歐 [窗口]或UTF-8)。 有關詳細資訊，請參見 *安裝和部署表AEM單* 文檔。

在配置電子郵件終結點之前，請配置電子郵件服務。 (請參閱 [配置預設電子郵件終結點設定](configuring-email-endpoints.md#configure-default-email-endpoint-settings)。) 電子郵件服務的配置參數有兩個用途：

* 配置所有電子郵件終結點的公用屬性
* 為所有電子郵件終結點提供預設值

## 為電子郵件終結點配置SSL {#configure-ssl-for-an-email-endpoint}

可以將POP3、IMAP或SMTP配置為對電子郵件終結點使用安全套接字層(SSL)。

1. 在電子郵件伺服器上，根據製造商的文檔為POP3、IMAP或SMTP啟用SSL。
1. 從電子郵件伺服器導出客戶端證書。
1. 使用keytool程式將客戶端證書檔案導入到應用程式伺服器的Java虛擬機(JVM)證書儲存。 此步驟的過程將取決於JVM和客戶端安裝路徑。

   例如，如果您在MicrosoftWindows Server® 2003上使用預設OracleWebLogic Server安裝與JDK 1.5.0配合使用，請在命令提示符下鍵入以下文本：

   `keytool -import -file client_certificate -alias myalias -keystore BEA_HOME\jdk150_04\jre\security\cacerts`

1. 當出現提示時，輸入口令(對於Java，預設口令為 `changeit`)。 您將收到一條消息，指出已成功導入證書。
1. 使用管理控制台將電子郵件終結點添加到服務。
1. 在管理控制台中建立電子郵件終結點。 配置終結點設定時，為傳入郵件選擇POP3/IMAP SSL Enabled（已啟用POP3/IMAP SSL），為傳出郵件選擇SMTP SSL Enabled（已啟用SSL），並相應更改埠屬性。

>[!NOTE]
>
>提示：如果您在使用SSL時遇到問題，請使用電子郵件客戶端(如MicrosoftOutlook)檢查它是否可以使用SSL訪問電子郵件伺服器。 如果電子郵件客戶端無法訪問電子郵件伺服器，則此問題與您的證書或電子郵件伺服器的配置有關。

## 配置預設電子郵件終結點設定 {#configure-default-email-endpoint-settings}

可以使用「服務管理」頁配置所有電子郵件端點的公用屬性，並為所有電子郵件端點提供預設值。

要使表單工作流接收和處理來自用戶的傳入電子郵件，您需要為「完成任務」服務建立電子郵件終結點。 此電子郵件終結點需要其他設定，如中所述 [為「完成任務」服務建立電子郵件終結點](configuring-email-endpoints.md#create-an-email-endpoint-for-the-complete-task-service)。

### 更改電子郵件終結點的預設值 {#change-the-default-values-for-email-endpoints}

1. 在管理控制台中，按一下「服務」>「應用程式和服務」>「服務管理」。
1. 在「服務管理」頁上，按一下「電子郵件：1.0（元件ID是com.adobe.idp.dsc.provider.service.email.Email）。
1. 在「配置」頁籤上，指定預設電子郵件終結點設定，然後按一下「保存」。

### 預設電子郵件終結點設定 {#default-email-endpoint-settings}

**Cron表達式：** 石英用於調度輸入目錄的輪詢的cron表達式。

**重複間隔：** 重複目錄輪詢的次數。 如果未在端點配置中指定此值，則預設重複間隔以秒為單位。 預設值為 10。此值不能小於10。

**重複計數：** 輪詢輸入目錄的次數。 如果未在端點配置中指定此值，則使用的預設重複計數。 值–1表示對目錄的無限掃描。 預設值為–1。

**作業啟動時延遲：** 作業開始掃描終結點之前的延遲的預設值（秒）。 預設值為 0。

**批大小：** 每次掃描接收方處理的電子郵件數以獲得最佳效能。 值–1表示所有電子郵件。 預設值為 2。

**非同步：** 將調用類型標識為非同步或同步。 只能同步調用瞬態和同步進程。 預設值為非同步。

**域模式：** 用於篩選傳入電子郵件的域名模式。 例如，如果使用adobe.com，則只處理adobe.com的電子郵件；忽略來自其他域的電子郵件。

**檔案模式：** 提供程式接受的傳入檔案附件模式。 這包括具有特定副檔名(&amp;ast;.dat、&amp;ast;.xml)、特定名稱（資料）和名稱和副檔名(...[dD][aA]「port」)。 預設值為&amp;ast;。&amp;ast;。

**成功作業的收件人：** 一個或多個電子郵件地址，用於發送電子郵件以指示成功的作業。 預設情況下，成功的作業消息始終發送給初始作業的發送者。 最多支援100個收件人。 要關閉此設定，請將此欄位留空。

**失敗作業的收件人：** 一個或多個電子郵件地址，用於發送電子郵件以指示失敗的作業。 預設情況下，失敗的作業消息始終發送給發送初始作業的發件人。 最多支援100個收件人。 要關閉此設定，請將此欄位留空。

**收件箱主機：** 要掃描的電子郵件提供程式的收件箱主機名或IP地址。

**收件箱埠：** 要掃描的電子郵件提供程式的收件箱埠號。 如果值為0，則將使用預設的IMAP或POP3埠。

**收件箱協定：** 用於掃描收件箱的電子郵件終結點的電子郵件協定。 選擇是IMAP或POP3。 收件箱主機郵件伺服器必須支援這些協定。

**收件箱超時：** 指定在嘗試連接到收件箱時終結點在取消之前等待的時間。 如果在到達超時值之前未獲取連接，則不會輪詢收件箱。

**收件箱用戶：** 登錄到電子郵件帳戶所需的用戶名。 根據電子郵件伺服器和配置的不同，此名稱可能只是電子郵件的用戶名部分，也可能是完整的電子郵件地址。

**收件箱密碼：** 收件箱用戶的密碼。

**已啟用POP3/IMAP SSL:** 選中後，啟用SSL。

**SMTP主機：** 電子郵件提供程式用於發送結果和錯誤消息的郵件伺服器的主機名。 例如，mail.example.com。

**SMTP埠：** 用於連接到郵件伺服器的埠。 預設值為 25。

**SMTP用戶：** 電子郵件提供程式在發送電子郵件以查找結果和錯誤時要使用的用戶帳戶。

**SMTP密碼：** SMTP帳戶的密碼。 某些郵件伺服器不需要SMTP密碼。

**發送方：** 用於發送結果和錯誤的電子郵件通知的電子郵件地址(例如user@company.com)。 如果未指定「發送自」值，則電子郵件伺服器將嘗試通過將SMTP用戶設定中指定的值與電子郵件伺服器上配置的預設域相結合來確定電子郵件地址。 如果您的電子郵件伺服器沒有預設域，並且您沒有為「發送自」指定值，則可能會發生錯誤。 要確保電子郵件具有正確的發件人地址，請為「發件人」設定指定一個值。

**已啟用SMTP SSL:** 選中後，通過SMTP啟用SSL。

**將原始電子郵件正文作為附件包括：** 預設情況下，當您向表單伺服器發送電子郵件時，消息的原始文本將包含在消息的正文中。 要將文本作為附件包含，請選擇此選項。

**使用結果電子郵件的原始主題行：** 預設情況下，Forms伺服器在發送結果電子郵件時使用「成功電子郵件主題」和「錯誤電子郵件主題」設定中指定的值作為主題行。 要改為使用與發送到伺服器的原始電子郵件相同的主題行，請選擇此選項。

**成功電子郵件主題：** 在向電子郵件終結點發送電子郵件以啟動或繼續進程後，您會收到來自表單伺服器的返回電AEM子郵件。 如果電子郵件成功，您將收到一封成功的電子郵件。 如果電子郵件失敗，您將收到一封失敗的電子郵件，告知其失敗的原因。 此設定允許您指定為此終結點發送的成功電子郵件的主題行。

**成功電子郵件正文：** 允許您指定為此終結點發送的成功電子郵件的正文文本。

**錯誤電子郵件主題前置詞：** 允許您指定在為此終結點發送的失敗電子郵件主題行開頭使用的文本。

**錯誤電子郵件主題：** 允許您指定為此終結點發送的失敗電子郵件的主題行。 此文本顯示在錯誤電子郵件主題前置詞之後。

**錯誤電子郵件正文：** 使您可以指定為此終結點發送的失敗電子郵件正文文本中的第一行。

**電子郵件摘要資訊：** 每個成功或失敗消息都包含一個包含您發送到表單伺服器的原始電子郵件文本的部分。 此設定指定該節上方顯示的文本。

**建立/更新此終結點之前驗證收件箱：** 選擇此選項後，在建立終結點之前，表單伺服器會檢查SMTP/POP3設定是否正確。 按一下「添加」時，將顯示一條消息，說明收件箱帳戶是否有效。 如果未選擇此選項，則表單服AEM務器將建立終結點，而不驗證收件箱。

**字元集編碼：** 用於電子郵件的編碼格式。 預設值為UTF-8，大多數日本以外用戶都會使用它。 日本環境中的用戶可以選擇ISO2022-JP。

**失敗的電子郵件發送資料夾：** 指定在SMTP郵件伺服器無法運行時儲存結果的目錄。

## 電子郵件終結點設定 {#email-endpoint-settings}

使用以下設定配置電子郵件終結點。

**名稱：** 標識終結點的強制設定。 不要包括&lt;字元，因為它會截斷Workspace中顯示的名稱。 如果輸入URL作為終結點的名稱，請確保它符合RFC1738中指定的語法規則。

**描述：** 終結點的說明。 不要包括&lt;字元，因為它會截斷在Workspace中顯示的說明。

**Cron表達式：** 如果必須使用cron表達式來調度電子郵件，請輸入cron表達式。

**重複計數：** 電子郵件終結點掃描資料夾或目錄的次數。 值為–1表示無限掃描。 預設值為–1。

**重複間隔：** 接收方用於檢查傳入郵件的掃描速率。

**作業啟動時延遲：** 計畫程式啟動後等待掃描的時間。

**批大小：** 每次掃描接收方處理的電子郵件數以獲得最佳效能。 值–1表示所有電子郵件。 預設值為 2。

**用戶名：** 強制設定，即從電子郵件調用目標服務時使用的用戶名。 預設值為SuperAdmin。

**域名：** 必需設定，即用戶的域。 預設值為DefaultDom。

**域模式：** 指定提供程式接受的傳入電子郵件的域模式。 例如，如果使用adobe.com，則只處理adobe.com的電子郵件；忽略來自其他域的電子郵件。

**檔案模式：** 指定提供程式接受的傳入檔案附件模式。 這包括具有特定副檔名(&amp;ast;.dat、&amp;ast;.xml)、特定名稱（資料）或名稱和副檔名(&amp;ast;)中的複合表達式的檔案。[dD][aA]「port」)。

**成功作業的收件人：** 發送郵件以指示成功作業的電子郵件地址。 預設情況下，成功的作業消息始終發送給發件人。 如果鍵入sender，則電子郵件結果將發送到發件人。 最多支援100個收件人。 指定其他電子郵件地址，用逗號(,)分隔。

要關閉此設定，請將設定留空。 在某些情況下，您希望觸發進程，而不希望收到結果的電子郵件通知。

**失敗作業的收件人：** 發送郵件以指示失敗作業的電子郵件地址。 預設情況下，失敗的作業消息始終發送給發件人。 如果鍵入sender，則電子郵件結果將發送到發件人。 最多支援100個收件人。 指定其他電子郵件地址，用逗號(,)分隔。

要關閉此設定，請將設定留空。 在某些情況下，您希望觸發進程，而不希望收到結果的電子郵件通知。

**收件箱主機：** 要掃描的電子郵件提供程式的收件箱主機名或IP地址。

**收件箱埠：** 電子郵件伺服器使用的埠。 POP3的預設值為110,IMAP的預設值為143。 如果啟用了SSL，則POP3的預設值為995,IMAP的預設值為993。

**收件箱協定：** 用於掃描收件箱的電子郵件終結點的電子郵件協定。 值為IMAP或POP3。 收件箱主機郵件伺服器必須支援這些協定。

**收件箱超時：** 電子郵件提供程式等待收件箱響應的超時（秒）。

**收件箱用戶：** 登錄到電子郵件帳戶所需的用戶名。 根據電子郵件伺服器和配置的不同，此值可能只是電子郵件的用戶名部分，也可能是完整的電子郵件地址。

**收件箱密碼：** 收件箱用戶的密碼。

**已啟用POP3/IMAP SSL:** 選擇此設定可強制電子郵件提供程式使用SSL掃描收件箱。 確保郵件伺服器支援SSL。

**SMTP主機：** 電子郵件提供程式用於發送結果和錯誤消息的郵件伺服器的主機名。

**SMTP埠：** SMTP埠的預設值為25。

**SMTP用戶：** 電子郵件提供程式在發送結果和錯誤的電子郵件通知時要使用的用戶帳戶。

**SMTP密碼：** SMTP帳戶的密碼。 某些郵件伺服器不需要SMTP密碼。

**發送方：** 用於發送結果和錯誤的電子郵件通知的電子郵件地址(例如user@company.com)。 如果未指定「發送自」值，則電子郵件伺服器將嘗試通過將SMTP用戶設定中指定的值與電子郵件伺服器上配置的預設域相結合來確定電子郵件地址。 如果您的電子郵件伺服器沒有預設域，並且您沒有為「發送自」指定值，則可能會發生錯誤。 要確保電子郵件具有正確的發件人地址，請為「發件人」設定指定一個值。

**已啟用SMTP SSL:** 選擇此設定可強制電子郵件提供程式使用SSL掃描收件箱。 確保郵件伺服器支援SSL。

**失敗的電子郵件發送資料夾：** 指定在SMTP郵件伺服器無法運行時儲存結果的目錄。

**非同步：** 設定為同步時，將處理所有輸入文檔並返回單個響應。 設定為非同步時，會為每個處理的文檔發送響應。

例如，為採用單個Word文檔並將該文檔作為PDF檔案返回的服務建立電子郵件終結點。 可以向包含多(3)個Word文檔的終結點收件箱發送電子郵件。 處理所有三個文檔時，如果端點配置為同步，則會發送一封包含所有三個文檔的響應電子郵件。 如果端點是非同步的，則在將每個Word文檔轉換為PDF後發送響應電子郵件。 結果是三封電子郵件，每封都帶有一個PDF附件。

預設值為非同步。

**將原始電子郵件正文作為附件包括：** 預設情況下，當您向表單伺服器發送電子郵件時，消息的原始文本將包含在消息的正文中。 要將文本作為附件包含，請選擇此選項。

**將原始主題行用於結果電子郵件：** 預設情況下，Forms伺服器在發送結果電子郵件時使用「成功電子郵件主題」和「錯誤電子郵件主題」設定中指定的值作為主題行。 要改為使用與發送到伺服器的原始電子郵件相同的主題行，請選擇此選項。

**成功電子郵件主題：** 在向電子郵件終結點發送電子郵件以啟動或繼續進程後，您會收到來自表單伺服器的返回電AEM子郵件。 如果電子郵件成功，您將收到一封成功的電子郵件。 如果電子郵件失敗，您將收到一封失敗的電子郵件，告知其失敗的原因。 此設定允許您指定為此終結點發送的成功電子郵件的主題行。

**成功電子郵件正文：** 允許您指定為此終結點發送的成功電子郵件的正文文本。

**錯誤電子郵件主題前置詞：** 允許您指定在為此終結點發送的失敗電子郵件主題行開頭使用的文本。

**錯誤電子郵件主題：** 允許您指定為此終結點發送的失敗電子郵件的主題行。 此文本顯示在錯誤電子郵件主題前置詞之後。

**錯誤電子郵件正文：** 使您可以指定為此終結點發送的失敗電子郵件正文文本中的第一行。

**電子郵件摘要資訊：** 每個成功或失敗消息都包含一個包含您發送到表單伺服器的原始電子郵件文本的部分。 此設定指定該節上方顯示的文本。

**在建立/更新此終結點之前驗證收件箱：** 選擇此選項後，在建立終結點之前，表單伺服器會檢查SMTP/POP3設定是否正確。 按一下「添加」時，將顯示一條消息，說明收件箱帳戶是否有效。 如果未選擇此選項，則表單服AEM務器將建立終結點，而不驗證收件箱。

**操作名稱：** 此設定是必需的。 可分配給電子郵件終結點的操作的清單。 此處選擇的操作將確定在「輸入參數映射」和「輸出參數映射」部分中顯示哪些欄位。

**輸入參數映射：** 用於配置處理服務和操作所需的輸入。 輸入的兩種類型是文本和變數：

**文字：** 電子郵件使用在顯示時在欄位中輸入的值。

**變數：** 您可以從電子郵件主題、正文、標題或發件人的電子郵件地址映射字串。 要執行此操作，請使用以下關鍵字之一：%SUBJECT%、%BODY%、%HEADER%或%SENDER%。 例如，如果使用%SUBJECT%，則電子郵件主題內容將用作輸入參數。 要提取附件，請輸入電子郵件終結點可用於選擇附加文檔的檔案模式。 例如，輸入&amp;ast;.pdf將選擇任何附加的具有.pdf檔案名副檔名的文檔。 輸入&amp;ast;選擇任何附加文檔。 輸入example.pdf將選擇名為example.pdf的任何附加文檔。

**輸出參數映射：** 用於配置服務和操作的輸出。 輸出參數映射值中的以下字元在附件檔案名中展開：

**%F** 表示源檔案的檔案名（不包括副檔名）。

**%E** 表示源檔案的副檔名。

反斜線(\)的任何出現都將替換為%%。

***附註&#x200B;**:如果服務請求消息包含多個檔案附件，則不能將%F和%E參數用於終結點的「輸出參數映射」屬性。 如果服務響應返回多個檔案附件，則不能為多個附件指定相同的檔案名。 如果不遵循這些建議，調用的服務將為返回的檔案建立名稱，並且這些名稱不可預測。*

以下值可用：

**單個對象：** 電子郵件提供程式沒有源資料夾目標；結果作為附件返回。 模式為Result/%F.ps，並返回Result%%sourcefilename.ps作為檔案名附件。

**清單：** 模式為Result/%F/，並返回Result%%sourcefilename%%file1作為檔案名附件。

**映射：** 模式為Result/%F/，源目標為Result%%ssourcefilename%%file1和Result%%ssourcefilename%%file2。 如果映射包含多個對象且模式為Result/%F.ps，則響應檔案附件為Result%%sourcefilename1.ps（輸出1）和Result%%sourcefilename2.ps（輸出2）。

## 為「完成任務」服務建立電子郵件終結點 {#create-an-email-endpoint-for-the-complete-task-service}

要使表單工作流接收和處理來自用戶的傳入電子郵件，您需要為「完成任務」服務建立電子郵件終結點。

1. 在管理控制台中，按一下「服務」>「應用程式和服務」>「服務管理」。
1. 在「服務管理」頁上，按一下「完成任務」服務。
1. 在端點頁籤上，從下拉清單中選擇電子郵件，然後按一下添加。
1. 在「收件箱主機」框中，鍵入郵件伺服器的主機名或IP地址。
1. 在「收件箱用戶」框中，鍵入登錄您為處理表單提交而建立的電子郵件帳戶所需的用戶名。 根據電子郵件伺服器和配置的不同，此名稱可能只是電子郵件的用戶名部分，也可能是完整的電子郵件地址。
1. 在「收件箱密碼」框中，鍵入「收件箱用戶」的密碼。
1. 在「SMTP主機」框中，鍵入電子郵件提供程式從中發送結果和錯誤消息的郵件伺服器的主機名或IP地址。
1. 在「SMTP用戶」框中，鍵入電子郵件提供程式在發送電子郵件以查找結果和錯誤時要使用的用戶帳戶。 此用戶帳戶可以是您用於收件箱用戶的相同值。
1. 在「SMTP密碼」框中，鍵入SMTP帳戶的密碼。
1. 在「操作名稱」清單中，選擇「調用」。
1. 在attachmentMap清單中，選擇變數並鍵入 `*.*` 在相鄰的框中。 這會將入站郵件中的所有附件發送到「完成任務」流程的映射變數。
1. 在mailBody清單中，選擇變數並鍵入 `%BODY%` 在相鄰的框中。
1. 在mailFrom清單中，選擇變數並鍵入 `%SENDER%` 在相鄰的框中。 這會將發件人地址映射到「完成任務」流程資料。
1. 在結果框中，鍵入 `results`。 這將導致「完成任務」或「啟動進程」返回結果字串。
1. 按一下「添加」。
