---
title: 設定電子郵件端點
seo-title: Configuring email endpoints
description: 了解如何設定電子郵件端點。
seo-description: Learn how to configure email endpoints.
uuid: d47bb45b-0e0e-43ca-9e25-e347d0e60206
contentOwner: admin
content-type: reference
geptopics: SG_AEMFORMS/categories/managing_endpoints
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: dcf15c42-9ec6-4d1c-ad41-083aa0b8c7ae
exl-id: 33583a12-4f20-4146-baa4-c9854e454bbf
source-git-commit: 1cdd15800548362ccdd9e70847d9df8ce93ee06e
workflow-type: tm+mt
source-wordcount: '3757'
ht-degree: 0%

---

# 設定電子郵件端點 {#configuring-email-endpoints}

電子郵件端點可讓使用者將一或多份檔案（作為電子郵件附件）傳送至指定的電子郵件帳戶，借此叫用服務。 電子郵件收件匣可作為附件的收集點。 服務會監控收件匣並處理附件。 轉換的結果會轉送至端點中定義的使用者。

對於電子郵件端點，獲授權的使用者可以將檔案以電子郵件傳送至適當的帳戶，以叫用程式。 結果將返回給提交用戶（預設情況下）或終結點設定中定義的用戶。

配置電子郵件端點之前，請建立POP3或IMAP電子郵件帳戶供端點使用。 為每種轉換類型設定個別帳戶。 例如，一個帳戶可以配置為從傳入的檔案附件生成標準PDF文檔，而另一個帳戶可以配置為生成安全PDF文檔。

>[!NOTE]
>
>每個電子郵件地址只能對應至一個電子郵件端點。 即使已停用其他電子郵件端點，您也無法將多個電子郵件端點設定為單一電子郵件地址。

所有電子郵件端點都使用電子郵件收件匣的授權使用者名稱和密碼設定，叫用服務時需要這些名稱和密碼。 電子郵件帳戶受其配置所在的郵件伺服器系統保護。

如果您的使用者在檔案和轉換路徑名稱中傳送含有西歐語言字元的檔案，他們必須使用支援所需編碼類型（Latin1 [ISO-8859-1]、西歐[Windows]或UTF-8）的電子郵件應用程式。 如需詳細資訊，請參閱應用程式伺服器的&#x200B;*安裝和部署AEM表單*&#x200B;檔案。

設定電子郵件端點之前，請設定電子郵件服務。 （請參閱[設定預設電子郵件端點設定](configuring-email-endpoints.md#configure-default-email-endpoint-settings)。） 電子郵件服務的設定參數有兩個用途：

* 配置所有電子郵件端點通用的屬性
* 為所有電子郵件端點提供預設值

## 為電子郵件端點設定SSL {#configure-ssl-for-an-email-endpoint}

您可以配置POP3、IMAP或SMTP以使用安全套接字層(SSL)作為電子郵件端點。

1. 在電子郵件伺服器上，根據製造商的文檔為POP3、IMAP或SMTP啟用SSL。
1. 從電子郵件伺服器匯出用戶端憑證。
1. 使用keytool程式將客戶端證書檔案導入應用程式伺服器的Java虛擬機(JVM)證書儲存。 此步驟的步驟取決於JVM和客戶端安裝路徑。

   例如，如果您在Microsoft Windows Server® 2003上使用帶有JDK 1.5.0的預設OracleWebLogic Server安裝，請在命令提示符下鍵入以下文本：

   `keytool -import -file client_certificate -alias myalias -keystore BEA_HOME\jdk150_04\jre\security\cacerts`

1. 提示時，輸入密碼（對於Java，預設密碼為`changeit`）。 您會收到訊息，指出憑證已成功匯入。
1. 使用管理控制台將電子郵件端點新增至服務。
1. 在管理控制台中建立電子郵件端點。 配置端點設定時，請為傳入郵件選擇「POP3/IMAP SSL已啟用」 ，為傳出郵件選擇「SMTP SSL已啟用」 ，並相應地更改埠屬性。

>[!NOTE]
>
>提示：如果您在使用SSL時遇到問題，請使用電子郵件用戶端(例如Microsoft Outlook)來檢查它是否可以使用SSL存取電子郵件伺服器。 如果電子郵件用戶端無法存取電子郵件伺服器，則此問題與憑證或電子郵件伺服器的設定有關。

## 配置預設電子郵件端點設定 {#configure-default-email-endpoint-settings}

您可以使用「服務管理」頁來配置所有電子郵件端點通用的屬性，並為所有電子郵件端點提供預設值。

要使表單工作流接收和處理來自用戶的傳入電子郵件，您需要為「完成任務」服務建立電子郵件端點。 如[為完成任務服務](configuring-email-endpoints.md#create-an-email-endpoint-for-the-complete-task-service)建立電子郵件端點中所述，此電子郵件端點需要其他設定。

### 變更電子郵件端點的預設值 {#change-the-default-values-for-email-endpoints}

1. 在管理控制台中，按一下「服務」>「應用程式和服務」>「服務管理」。
1. 在「服務管理」頁上，按一下「電子郵件：1.0（元件ID為com.adobe.idp.dsc.provider.service.email.Email）。
1. 在「配置」頁簽上，指定預設的電子郵件端點設定，然後按一下「保存」。

### 預設電子郵件端點設定 {#default-email-endpoint-settings}

**Cron運算式：** 用於調度輸入目錄輪詢的Cron運算式。

**重複間隔：** 重複目錄輪詢的次數。如果未在端點設定中指定此值，預設重複間隔為秒。 預設值為 10。此值不能小於10。

**重複計數：** 輪詢輸入目錄的次數。如果未在端點配置中指定此值，則使用的預設重複計數。 值–1表示對目錄進行了無限掃描。 預設值為–1。

**作業開始時的延遲：** 作業開始掃描端點之前的預設值（以秒為單位）。預設值為 0。

**批次大小：** 接收者每次掃描處理的電子郵件數量，以獲得最佳效能。值–1表示所有電子郵件。 預設值為 2。

**非同步：** 將呼叫類型識別為非同步或同步。只能同步調用瞬態和同步進程。 預設值為非同步。

**網域模式：** 用於篩選傳入電子郵件的網域名稱模式。例如，若使用adobe.com，則只會處理來自adobe.com的電子郵件；會忽略來自其他網域的電子郵件。

**檔案模式：** 提供程式接受的傳入檔案附件模式。這包括具有特定副檔名(&amp;ast;.dat、&amp;ast;.xml)、特定名稱（資料），以及名稱和副檔名(.[dD][aA]&#39;port&#39;)。預設值為&amp;ast;。&amp;ast;。

**成功工作的收件者：** 一或多個電子郵件地址，用於傳送電子郵件以指出成功工作。預設情況下，成功的作業消息將始終發送給初始作業的發件人。 最多支援100個收件者。 若要關閉此設定，請將此欄位留空。

**失敗作業的收件者：** 一或多個電子郵件地址，用於傳送電子郵件以指出失敗作業。預設情況下，將始終向發送初始作業的發件人發送失敗的作業消息。 最多支援100個收件者。 若要關閉此設定，請將此欄位留空。

**收件匣主機：** 要掃描之電子郵件提供者的收件匣主機名稱或IP位址。

**收件匣埠：** 要掃描之電子郵件提供者的收件匣埠號。如果值為0，則使用預設的IMAP或POP3埠。

**收件匣通訊協定：** 電子郵件端點用來掃描收件匣的電子郵件通訊協定。選項為IMAP或POP3。 收件箱主機郵件伺服器必須支援這些協定。

**收件匣逾時：** 指定端點在嘗試連線至收件匣時，在取消之前將等候的時間長度。如果在達到逾時值之前未取得連線，則不會輪詢收件匣。

**收件匣使用者：** 登入電子郵件帳戶所需的使用者名稱。根據電子郵件伺服器和設定，此名稱可能只是電子郵件的使用者名稱部分，或可能是完整的電子郵件地址。

**收件匣密碼：** 收件匣使用者的密碼。

**POP3/IMAP SSL已啟用：** 選取此選項時，啟用SSL。

**SMTP主機：** 電子郵件提供程式用於傳送結果和錯誤訊息的郵件伺服器的主機名。例如， mail.example.com。

**SMTP埠：** 用於連接到郵件伺服器的埠。預設值為 25。

**SMTP使用者：** 電子郵件提供者在傳送電子郵件以取得結果和錯誤時要使用的使用者帳戶。

**SMTP密碼：** SMTP帳戶的密碼。某些郵件伺服器不需要SMTP密碼。

**寄件者：** 用來傳送結果和錯誤之電子郵件通知的電子郵件地址(例如，user@company.com)。如果未指定「發送方」值，則電子郵件伺服器將SMTP用戶設定中指定的值與電子郵件伺服器上配置的預設域相結合，以嘗試確定電子郵件地址。 如果您的電子郵件伺服器沒有預設網域，且您未指定「寄件者」的值，則可能會發生錯誤。 若要確保電子郵件的寄件者地址正確，請為「寄件者」設定指定值。

**SMTP SSL已啟用：** 選取此選項後，請透過SMTP啟用SSL。

**包含原始電子郵件內文作為附件：** 依預設，當您傳送電子郵件至表單伺服器時，訊息的原始文字會包含在訊息內文中。要將文本作為附件包含，請選擇此選項。

**使用結果電子郵件的原始主旨行：** 依預設，Forms伺服器會在傳送結果電子郵件訊息時，使用「成功電子郵件主旨」和「錯誤電子郵件主旨」設定中指定的值做為主旨行。若要改用與傳送至伺服器的原始電子郵件相同的主旨行，請選取此選項。

**成功電子郵件主旨：** 您傳送電子郵件至電子郵件端點以開始或繼續處理程式後，會從AEM表單伺服器收到傳回的電子郵件訊息。如果您的電子郵件成功，您會收到成功電子郵件。 如果您的電子郵件失敗，您會收到失敗電子郵件，告知失敗的原因。 此設定可讓您指定為此端點傳送的成功電子郵件訊息的主旨行。

**成功電子郵件內文：** 可讓您指定為此端點傳送的成功電子郵件訊息的內文。

**錯誤電子郵件主旨首碼：** 可讓您指定在針對此端點傳送之失敗電子郵件訊息主旨行開頭所使用的文字。

**錯誤電子郵件主旨：** 可讓您指定為此端點傳送之失敗電子郵件訊息的主旨行。此文字會顯示在「錯誤電子郵件主旨首碼」後面。

**錯誤電子郵件內文：** 可讓您指定針對此端點傳送之失敗電子郵件訊息內文的第一行。

**電子郵件摘要資訊：** 每則成功或失敗訊息都包含您傳送至表單伺服器的原始電子郵件文字的區段。此設定指定出現在該部分上方的文本。

**建立/更新此端點之前驗證收件箱：** 選取此選項時，表單伺服器會在建立端點之前檢查您的SMTP/POP3設定是否正確。按一下「添加」後，將顯示一條消息，告知收件箱帳戶是否有效。 如果未選中此選項，AEM Forms伺服器將建立端點，而不驗證收件箱。

**字元集編碼：** 用於電子郵件訊息的編碼格式。預設為UTF-8，日本以外的大部分使用者都會使用。 日文環境中的使用者可選擇ISO2022-JP。

**失敗的電子郵件已發送資料夾：** 指定在SMTP郵件伺服器無法運行時要儲存結果的目錄。

## 電子郵件端點設定 {#email-endpoint-settings}

使用下列設定來設定電子郵件端點。

**名稱：** 識別端點的必要設定。請勿包含&lt;字元，因為它會截斷工作區中顯示的名稱。 如果您輸入URL作為端點的名稱，請確保它符合RFC1738中指定的語法規則。

**說明：** 端點的說明。請勿包含&lt;字元，因為它會截斷工作區中顯示的說明。

**Cron運算式：** 如果必須使用cron運算式排程電子郵件，請輸入cron運算式。

**重複計數：** 電子郵件端點掃描資料夾或目錄的次數。值–1表示掃描不確定。 預設值為–1。

**重複間隔：** 接收者用於檢查傳入郵件的掃描速率。

**作業開始時的延遲：** 排程器啟動後等待掃描的時間。

**批次大小：** 接收者每次掃描處理的電子郵件數量，以獲得最佳效能。值–1表示所有電子郵件。 預設值為 2。

**使用者名稱：** 強制設定，從電子郵件叫用目標服務時會使用的使用者名稱。預設值為SuperAdmin。

**網域名稱：** 必填設定，即使用者的網域。預設值為DefaultDom。

**網域模式：** 指定提供者接受之傳入電子郵件的網域模式。例如，若使用adobe.com，則只會處理adobe.com的電子郵件；會忽略來自其他網域的電子郵件。

**檔案模式：** 指定提供程式接受的傳入檔案附件模式。這包括具有特定副檔名(&amp;ast;.dat、&amp;ast;.xml)、特定名稱（資料），或名稱和副檔名(&amp;ast;)中的複合運算式的檔案。[dD][aA]&#39;port&#39;)。

**成功作業的收件者：** 傳送訊息以指出成功作業的電子郵件地址。預設情況下，成功的作業消息始終發送給發件人。 如果鍵入sender，則電子郵件結果將發送給發件人。 最多支援100個收件者。 使用電子郵件地址指定其他收件者，並以逗號(,)分隔。

若要關閉此設定，請將設定留空。 在某些情況下，您會想要觸發程式，而不想要結果的電子郵件通知。

**失敗作業的收件者：** 傳送訊息至的電子郵件地址，用以指出失敗的作業。預設情況下，將始終向發件人發送失敗的作業消息。 如果鍵入sender，則電子郵件結果將發送給發件人。 最多支援100個收件者。 使用電子郵件地址指定其他收件者，並以逗號(,)分隔。

若要關閉此設定，請將設定留空。 在某些情況下，您會想要觸發程式，而不想要結果的電子郵件通知。

**收件匣主機：** 要掃描之電子郵件提供者的收件匣主機名稱或IP位址。

**收件匣埠：** 電子郵件伺服器使用的埠。POP3的預設值為110,IMAP的預設值為143。 如果啟用了SSL，則POP3的預設值為995，而IMAP的預設值為993。

**收件匣通訊協定：** 電子郵件端點用來掃描收件匣的電子郵件通訊協定。值為IMAP或POP3。 收件箱主機郵件伺服器必須支援這些協定。

**收件匣逾時：** 電子郵件提供者等待收件匣回應的逾時（以秒為單位）。

**收件匣使用者：** 登入電子郵件帳戶所需的使用者名稱。視電子郵件伺服器和設定而定，此值可能只是電子郵件的使用者名稱部分，或可能是完整的電子郵件地址。

**收件匣密碼：** 收件匣使用者的密碼。

**POP3/IMAP SSL已啟用：** 選取此設定，以強制電子郵件提供者使用SSL掃描收件匣。確保郵件伺服器支援SSL。

**SMTP主機：** 電子郵件提供程式用於發送結果和錯誤消息的郵件伺服器的主機名。

**SMTP埠：** SMTP埠的預設值為25。

**SMTP使用者：** 電子郵件提供者在傳送結果和錯誤的電子郵件通知時要使用的使用者帳戶。

**SMTP密碼：** SMTP帳戶的密碼。某些郵件伺服器不需要SMTP密碼。

**寄件者：** 用來傳送結果和錯誤之電子郵件通知的電子郵件地址(例如，user@company.com)。如果未指定「發送方」值，則電子郵件伺服器將SMTP用戶設定中指定的值與電子郵件伺服器上配置的預設域相結合，以嘗試確定電子郵件地址。 如果您的電子郵件伺服器沒有預設網域，且您未指定「寄件者」的值，則可能會發生錯誤。 若要確保電子郵件的寄件者地址正確，請為「寄件者」設定指定值。

**SMTP SSL已啟用：** 選取此設定，以強制電子郵件提供者使用SSL掃描收件匣。確保郵件伺服器支援SSL。

**失敗的電子郵件已發送資料夾：** 指定在SMTP郵件伺服器無法運行時要儲存結果的目錄。

**非同步：** 設為同步時，會處理所有輸入檔案並傳回單一回應。設為非同步時，會針對每個處理的檔案傳送回應。

例如，會為採用單一Word文檔並將該文檔作為PDF檔案返回的服務建立電子郵件端點。 可以向端點的收件箱發送電子郵件，該收件箱包含多個(3)Word文檔。 處理所有三個檔案時，如果端點設定為同步，則會傳送單一回應電子郵件，並附加所有三個檔案。 如果端點為非同步，則在將每個Word文檔轉換為PDF後發送響應電子郵件。 結果是三封電子郵件，每封都附有單一PDF附件。

預設值為非同步。

**將原始電子郵件內文包含為附件：** 依預設，當您傳送電子郵件至表單伺服器時，訊息的原始文字會包含在訊息內文中。要將文本作為附件包含，請選擇此選項。

**使用結果電子郵件的原始主旨行：** 依預設，Forms伺服器會在傳送結果電子郵件訊息時，使用「成功電子郵件主旨」和「錯誤電子郵件主旨」設定中指定的值做為主旨行。若要改用與傳送至伺服器的原始電子郵件相同的主旨行，請選取此選項。

**成功電子郵件主旨：** 您傳送電子郵件至電子郵件端點以開始或繼續處理程式後，會收到AEM表單伺服器傳回的電子郵件訊息。如果您的電子郵件成功，您會收到成功電子郵件。 如果您的電子郵件失敗，您會收到失敗電子郵件，告知失敗的原因。 此設定可讓您指定為此端點傳送的成功電子郵件訊息的主旨行。

**成功電子郵件內文：** 可讓您指定為此端點傳送的成功電子郵件訊息的內文。

**錯誤電子郵件主旨首碼：** 可讓您指定在針對此端點傳送之失敗電子郵件訊息主旨行開頭所使用的文字。

**錯誤電子郵件主旨：** 可讓您指定為此端點傳送之失敗電子郵件訊息的主旨行。此文字會顯示在「錯誤電子郵件主旨首碼」後面。

**錯誤電子郵件內文：** 可讓您指定針對此端點傳送之失敗電子郵件訊息內文的第一行。

**電子郵件摘要資訊：** 每則成功或失敗訊息都包含您傳送至表單伺服器的原始電子郵件文字的區段。此設定指定出現在該部分上方的文本。

**建立/更新此端點之前驗證收件箱：** 選取此選項時，在建立端點之前，表單伺服器會檢查您的SMTP/POP3設定是否正確。按一下「添加」後，將顯示一條消息，告知收件箱帳戶是否有效。 如果未選中此選項，AEM Forms伺服器將建立端點，而不驗證收件箱。

**操作名稱：** 此設定為必填。可指派給電子郵件端點的作業清單。 您在此處選擇的操作將確定「輸入參數映射」和「輸出參數映射」部分中顯示的欄位。

**輸入參數對應：** 用於配置處理服務和操作所需的輸入。兩種輸入類型為常值和變數：

**常值：** 電子郵件使用在顯示時輸入的欄位值。

**變數：** 您可以對應來自電子郵件主旨、內文、標題或寄件者電子郵件地址的字串。若要這麼做，請使用下列其中一個關鍵字：%SUBJECT%、%BODY%、%HEADER%或%SENDER%。 例如，如果使用%SUBJECT%，則電子郵件主題內容將用作輸入參數。 要提取附件，請輸入電子郵件端點可用於選擇附加文檔的檔案模式。 例如，輸入&amp;ast;.pdf會選取副檔名為.pdf的附加檔案。 進入&amp;ast;選擇任何附加的文檔。 輸入example.pdf會選擇名為example.pdf的任何附加文檔。

**輸出參數對應：** 用來設定服務和操作的輸出。輸出參數映射值中的以下字元在附件檔案名中展開：

**%** FR顯示源檔案的檔案名（不包括副檔名）。

**%** ER顯示源檔案的副檔名。

任何反斜線(\)的出現都會取代為%%。

***注意&#x200B;**:如果服務請求消息包含多個檔案附件，則不能將%F和%E參數用於終結點的「輸出參數映射」屬性。如果服務響應返回多個檔案附件，則不能為多個附件指定相同的檔案名。 如果您沒有遵循這些建議，則調用的服務會為返回的檔案建立名稱，並且這些名稱不可預測。*

可使用下列值：

**單一物件：** 電子郵件提供者沒有來源資料夾目的地；結果會以附件的形式傳回。模式為Result/%F.ps，並返回Result%%sourcefilename.ps作為檔案名附件。

**清單：** 模式為Result/%F/，並返回Result%%sourcefilename%%file1作為檔案名附件。

**映射：** 模式為Result/%F/，源目標為Result%%sourcefilename%%file1，而Result%%%sourcefilename%%file2。如果映射包含多個對象且模式為Result/%F.ps，則響應檔案附件為Result%%sourcefilename1.ps(output 1)和Result%%sourcefilename2.ps(output 2)。

## 為完成任務服務建立電子郵件端點 {#create-an-email-endpoint-for-the-complete-task-service}

要使表單工作流接收和處理來自用戶的傳入電子郵件，您需要為「完成任務」服務建立電子郵件端點。

1. 在管理控制台中，按一下「服務」>「應用程式和服務」>「服務管理」。
1. 在「服務管理」頁上，按一下「完成任務」服務。
1. 在「端點」索引標籤中，從下拉式清單中選取「電子郵件」，然後按一下「新增」。
1. 在「收件箱主機」框中，鍵入郵件伺服器的主機名或IP地址。
1. 在「收件匣使用者」方塊中，輸入登入您建立以處理表單提交作業的電子郵件帳戶所需的使用者名稱。 視電子郵件伺服器和設定而定，此名稱可能只是電子郵件的使用者名稱部分，或可能是完整的電子郵件地址。
1. 在「收件箱密碼」框中，鍵入收件箱用戶的密碼。
1. 在「SMTP主機」框中，鍵入電子郵件提供程式從中發送結果和錯誤消息的郵件伺服器的主機名或IP地址。
1. 在「SMTP用戶」框中，鍵入電子郵件提供程式在發送電子郵件以獲取結果和錯誤時要使用的用戶帳戶。 此用戶帳戶可以是用於收件箱用戶的相同值。
1. 在「SMTP密碼」框中，鍵入SMTP帳戶的密碼。
1. 在「操作名稱」清單中，選擇調用。
1. 在attachmentMap清單中，選擇「變數」，並在相鄰框中鍵入`*.*`。 這會將入站郵件中的所有附件發送到完成任務流程的映射變數。
1. 在mailBody清單中，選擇變數，並在相鄰框中鍵入`%BODY%`。
1. 在mailFrom清單中，選擇變數，並在相鄰框中鍵入`%SENDER%`。 這會將發送者地址映射到完成任務進程資料。
1. 在結果框中，鍵入`results`。 這會使「完成任務」或「啟動進程」返回結果字串。
1. 按一下「新增」。
