---
title: 緩解Experience Manager Forms的Log4j2漏洞
description: 緩解Experience Manager Forms的Log4j2漏洞
content-type: reference
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: Security
geptopics: SG_AEMFORMS/categories/jee
role: Admin
solution: Experience Manager, Experience Manager Forms
feature: Adaptive Forms
source-git-commit: c9d9a4d83a00587ee7b223e328abdef1bdd7438b
workflow-type: tm+mt
source-wordcount: '720'
ht-degree: 2%

---

# 緩解Experience Manager Forms的Log4j2漏洞

## 問題

已報告Apache Log4j2 （Java型應用程式的常用記錄程式庫）的嚴重安全漏洞。 已分析下列漏洞：

<table border="1">
  <tr>
    <th>漏洞</th>
    <th>受影響的專案</th>
    <th>哪些專案未受影響？</th>
    <th>狀態</th>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44228">CVE-2021-44228</a></td>
    <td rowspan="2">
      <ul>
        <li>JEE版Experience Manager 6.5 Forms （6.5 GA至6.5.11的所有版本）</li>
        <li>JEE版Experience Manager 6.4 Forms （6.4 GA至6.4.8的所有版本）</li>
        <li>JEE版Experience Manager 6.3 Forms （6.3 GA至6.3.3的所有版本）</li>
        <li>Experience Manager 6.5 Forms Designer</li>
        <li>Experience Manager 6.4 Forms Designer</li>
        <li>自動化表單轉換服務</li>
      </ul>
    </td>
    <td rowspan="2">
      <ul>
        <li>Experience Manager Forms Workbench （所有版本）</li>
        <li>OSGi上的Experience Manager Forms （所有版本）</li>
      </ul>
    </td>
    <td rowspan="2">
      這些問題已修正。 請參閱<strong>解決方法</strong>區段以取得修正和緩解步驟。
    </td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-45046">CVE-2021-45046</a></td>
  </tr>
  <tr>
    <td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-45105">CVE-2021-45105</a></td>
    <td rowspan="9" colspan="2">
      現成可用的記錄設定不影響任何Experience Manager Forms版本。 如果您有任何其他記錄設定，請檢查這些設定是否有這些漏洞。
    </td>
  </tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-44832">CVE-2021-44832</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=2021-4104">CVE-2021-4104</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22963">CVE-2022-22963</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22965">CVE-2022-22965</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2020-9488">CVE-2020-9488</a></td><td></td></tr>
  <tr><td><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-23302">CVE-2022-23307</a></td><td></td></tr>
</table>

>[!NOTE]
> 
> AEM 6.5.13.0 Forms及舊版包含這兩個Log4j程式庫（1.x和2.17.1）。 AEM 6.5.13.0 Forms及舊版中的AEM Forms Log4j 1.x程式庫不屬於所回報的弱點的一部份，也未在由Adobe執行的AEM Forms程式碼掃描中標註為易受攻擊。 不過，所有Log4j 1.x程式庫都會在6.5.14版本中移除。 如需安裝AEM 6.5.14.0或更新版本的指示，請參閱[發行說明](https://experienceleague.adobe.com/zh-hant/docs/experience-manager-65/content/release-notes/release-notes)。

## 解決方法

您可以使用下列其中一種方法來降低此漏洞的風險：

* 安裝最新Service Pack
* 使用手動緩解步驟

**安裝最新的Service Pack**

>[!CAUTION]
> 
> 如果您已在Experience Manager Forms Service Pack 6.3.3.8或Experience Manager Forms Service Pack 6.4.8.4環境中套用Hotfix，請勿安裝包含漏洞修正的Service Pack （如下所示）。 安裝這些Service Pack可能會覆寫Hotfix。 Adobe建議在此情況下使用&#x200B;**手動緩解步驟**。

<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>發行</th>
      <th>版本</th>
      <th>下載連結/使用者動作</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>JEE上的Experience Manager 6.5 Forms</td>
      <td>AEMForms-6.5.0-0038 (log4jv2.16)</td>
      <td rowspan="5">從<a href="https://auth.services.adobe.com/en_US/index.html?callback=https%3A%2F%2Fims-na1.adobelogin.com%2Fims%2Fadobeid%2Fexc_app%2FAdobeID%2Ftoken%3Fredirect_uri%3Dhttps%253A%252F%252Fexperience.adobe.com%252F%2523old_hash%253Dold_hash%253D%252523%25252Fdownloads%2526from_ims%253Dtrue%253Fclient_id%253Dexc_app%2526api%253Dauthorize%2526scope%253Dab.manage%252Caccount_cluster.read%252Cadditional_info%252Cadditional_info.job_function%252Cadditional_info.projectedProductContext%252Cadditional_info.roles%252CAdobeID%252Cadobeio.appregistry.read%252Cadobeio_api%252Caudiencemanager_api%252Ccreative_cloud%252Cmps%252Copenid%252Corg.read%252Cpps.read%252Cread_organizations%252Cread_pc%252Cread_pc.acp%252Cread_pc.dma_tartan%252Csession%26state%3D%257B%2522jslibver%2522%253A%2522v2-v0.31.0-2-g1e8a8a8%2522%252C%2522nonce%2522%253A%25223811059492261787%2522%257D%26code_challenge_method%3Dplain%26use_ms_for_expiry%3Dtrue&amp;client_id=exc_app&amp;scope=ab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&amp;state=%7B%22jslibver%22%3A%22v2-v0.31.0-2-g1e8a8a8%22%2C%22nonce%22%3A%223811059492261787%22%7D&amp;relay=2cf36844-ac87-4b40-a6fe-9a06cd0a01b8&amp;locale=en_US&amp;flow_type=token&amp;dctx_id=v%3A2%2Cs%2Cf%2Cb8e64530-b013-11ee-a6c1-e721bdec0171&amp;idp_flow_type=login&amp;response_type=token&amp;profile_filter=%7B%22findFirst%22%3Atrue%2C+%22fallbackToAA%22%3Atrue%2C+%22preferForwardProfile%22%3Atrue%2C+%22searchEntireCluster%22%3Afalse%7D%3B+hasPC%28%22dma_tartan%22%29&amp;code_challenge_method=plain&amp;redirect_uri=https%3A%2F%2Fexperience.adobe.com%2F%23old_hash%3Dold_hash%3D%2523%252Fdownloads%26from_ims%3Dtrue%3Fclient_id%3Dexc_app%26api%3Dauthorize%26scope%3Dab.manage%2Caccount_cluster.read%2Cadditional_info%2Cadditional_info.job_function%2Cadditional_info.projectedProductContext%2Cadditional_info.roles%2CAdobeID%2Cadobeio.appregistry.read%2Cadobeio_api%2Caudiencemanager_api%2Ccreative_cloud%2Cmps%2Copenid%2Corg.read%2Cpps.read%2Cread_organizations%2Cread_pc%2Cread_pc.acp%2Cread_pc.dma_tartan%2Csession&amp;use_ms_for_expiry=true#/">軟體發佈</a>下載。</td>
    </tr>
    <tr>
      <td>JEE上的Experience Manager 6.4 Forms</td>
      <td>AEMForms-6.4.0-0027</td>
    </tr>
    <tr>
      <td>JEE上的Experience Manager 6.3 Forms</td>
      <td>AEMForms-6.3.0-0047</td>
    </tr>
    <tr>
      <td>Experience Manager 6.5 Forms Designer</td>
      <td>AEM Forms Designer v650.019</td>
    </tr>
    <tr>
      <td>Experience Manager 6.4 Forms Designer</td>
      <td>AEM Forms Designer v640.012</td>
    </tr>
    <tr>
      <td>自動化表單轉換服務</td>
      <td>已識別緩解步驟並修補服務。</td>
      <td>沒有使用者動作。</td>
    </tr>
  </tbody>
</table>

## 使用手動緩解步驟

若要針對Experience Manager 6.5 Forms （log4j-core 2.10版和更新版本）、Experience Manager 6.4 Forms （2.10以前的log4j-core版本）和Experience Manager 6.3 Forms （2.10以前的log4j-core版本）緩解此問題，請執行以下步驟：

1. 關閉所有伺服器執行個體和定位器。

1. 從下列位置可用的易受攻擊的`log4j-core-2.xx.jar`中移除`org/apache/logging/log4j/core/lookup/JndiLookup.class`：

   * **可部署EAR：**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/configurationManager/export/adobe-livecycle-[jboss|weblogic|websphere].ear
   ```

   * **GemFire或Geode定位器：**

   ```javascript
   <FORMS_INSTALLATION_DIRECTORY>/lib/caching/lib
   ```

   若要根據您的作業系統更新可部署的EAR，您可以使用下列其中一種方法，從易受攻擊的`log4j-core-2.xx.jar`移除`JndiLookup.class`：

   * (具有Oracle WebLogic或Redhat JBoss的Linux)：執行以下命令。 在執行下列命令之前，請先更新`version`和應用程式伺服器資訊：

   ```javascript
   unzip adobe-livecycle-<weblogic|jboss>.ear lib/log4j-core-<version>.jar
   ```

   ```javascript
   zip -d lib/log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.  class
   ```

   ```javascript
   zip -ru adobe-livecycle-jboss.ear lib/log4j-core-<version>.jar
   ```

   * (具有IBM WebSphere的Linux)：執行下列命令。 在執行下列命令之前，請先更新`version`和應用程式伺服器資訊：

   ```javascript
   unzip adobe-livecycle-websphere.ear log4j-core-<version>.jar
   ```

   ```javascript
   zip -d log4j-core-xxx.jar org/apache/logging/log4j/core/lookup/JndiLookup.class
   ```

   * (Microsoft Windows)：使用[7-Zip](https://www.7-zip.org/)之類的GUI工具移除類別檔案。
1. 對每個應用程式伺服器執行個體（節點）和所有位置（如果超過一個）重複步驟2。

1. 更新jar後，重新部署修改過的EAR並重新啟動所有定位器處理程式和伺服器執行個體。

>[!NOTE]
> 
> * 將log4j-core-2.xx jar的原始副本替換為更新後的副本。 不需要進行其他變更。
> * 再次執行組態管理員時，可以覆寫`<FORMS_INSTALLATION_DIRECTORY/configurationManager/export`的內容。   為避免每次發生此情況時都重新執行上述變更，請在`<FORMS_INSTALLATION_DIRECTORY>/deploy/adobe-core-[jboss|weblogic|websphere].ear`中更新jar。 這可確保組態管理員產生的`adobe-livecycle-[jboss|weblogic|websphere].ear`已經更新`log4j-core-2.xx jar`。
> * 修補/升級時，可以覆寫對可部署成品進行的手動修改。 如果發生此情況，請重新套用程式。

## 參考

[https://logging.apache.org/log4j/2.x/security.html](https://logging.apache.org/security.html)

**如果我執行緩解步驟時遇到其他問題或任何問題，應該聯絡誰？**

您可以聯絡[Adobe支援](https://experienceleague.adobe.com/?lang=en&amp;support-solution=Experience+Manager#support)或提出[支援票證](https://experienceleague.adobe.com/en/docs/customer-one/using/home#submit-ticket)。

**如果我在執行緩解步驟時遇到其他問題或任何問題，應該聯絡誰？**
[法律注意事項](https://helpx.adobe.com/legal/legal-notices.html)    |    [線上隱私權原則](https://www.adobe.com/tw/privacy.html)