---
title: OSGi上的表單導向工作流程——步驟參考
seo-title: OSGi上的表單導向工作流程——步驟參考
description: OSGi步驟上的表單導向工作流程可讓您快速建立以表單為基礎的調適性工作流程。
seo-description: OSGi步驟上的表單導向工作流程可讓您快速建立以表單為基礎的調適性工作流程。
uuid: 6f791c45-0e35-4c55-9106-5340caab94b7
contentOwner: null
products: SG_EXPERIENCEMANAGER/6.5/FORMS
topic-tags: publish
discoiquuid: f0a5588d-f210-4f04-bc35-b62834f90ab1
docset: aem65
translation-type: tm+mt
source-git-commit: 86649ccfd494435038da06e72fbfed544a7aaf12

---


# OSGi上的表單導向工作流程——步驟參考{#forms-centric-workflow-on-osgi-step-reference}

## 表單工作流程步驟 {#forms-workflow-steps}

表單工作流程步驟會在AEM工作流程中執行AEM Forms特定作業。 這些步驟可讓您在OSGi上快速建立以表單為中心的調適性表單。 這些工作流程可用於開發基本的審閱與核准工作流程、內部和防火牆間的業務流程。 您也可以使用「表單工作流程」步驟來啟動檔案服務、與Adobe Sign簽名工作流程整合，以及執行其他AEM Forms作業。 您需要 [AEM Forms附加元件](https://www.adobe.com/go/learn_aemforms_documentation_63) ，才能在工作流程中使用這些步驟。

## Assign task step {#assign-task-step}

分配任務步驟將建立一個任務並將其分配給用戶或組。 除了指定任務外，該元件還為任務指定最適化表單或非互動式PDF。 需要有最適化表單才能接受使用者的輸入，而非互動式PDF或唯讀最適化表單則用於僅審核工作流程。

您也可以使用元件來控制任務的行為。 例如，建立自動記錄文檔、將任務分配給特定用戶或組、指定提交資料的路徑、指定要預填充的資料路徑，以及指定預設操作。 「分配任務」(Assign Task)步驟具有以下屬性：

* **標題：** 任務的標題。 標題會顯示在「AEM收件匣」中。
* **說明：** 對任務中正在執行的操作的說明。 當您在共用開發環境中工作時，這項資訊對於其他流程開發人員非常有用。

* **縮圖路徑：** 任務縮圖的路徑。 如果未指定路徑，則顯示最適化表單的預設縮圖，而「記錄檔案」則顯示預設圖示。
* **工作流階段：** 工作流程可以有多個階段。 這些階段會顯示在「AEM收件匣」中。 您可以在模型屬性中定義這些階段（「側腳>頁面>頁面屬性>階段」）。
* **優先順序：** 選取的優先順序會顯示在「AEM收件匣」中。 可用的選項有高、中和低。 預設值為「中」。
* **到期日：** 指定任務被標籤為逾期的天數或小時數。 如果您選擇「 **關閉**」，則不會將任務標籤為過期。 您也可以指定逾時處理常式，以在工作逾時後執行特定工作。

* **天數：** 要完成任務的天數。 在將任務指派給用戶後，會計算天數。 如果任務未完成，且超過「天數」欄位中指定的天數，則如果選取此選項，則會在到期日後觸發逾時處理常式。
* **小時數：** 任務完成前的小時數。 在指派任務給使用者後，會計算小時數。 如果任務未完成，且超過「小時」欄位中指定的小時數，則如果選中此選項，則會在到期小時後觸發超時處理程式。
* **到期日後逾時：** 選擇此選項可啟用「逾時處理常式」選取欄位。
* **逾時處理常式：** 選擇在分配任務步驟跨越到期日期時要執行的指令碼。 置於CRX-repository中apps []/fd/dashboard/scripts/timeoutHandler的指令碼可供選擇。 crx-repository中不存在指定的路徑。 管理員在使用路徑之前建立路徑。
* **在Task Details（任務詳細資訊）中突出顯示最後一個任務中的操作和注釋：** 選擇此選項可顯示上次執行的操作以及在任務的任務詳細資訊部分收到的注釋。
* **類型：** 選擇啟動工作流時要填充的文檔類型。 您可以選擇最適化表單、唯讀最適化表單、非互動式PDF檔案、互動式通訊代理UI或互動式通訊網路頻道檔案。
* **使用最適化表單：** 指定要定位輸入自適應表單的方法。 如果從「類型」(Type)下拉清單中選擇「最適化表單」(Adaptive form)或「只讀自適應表單」(Read-only adaptive form)，則此選項可用。 您可以使用提交至工作流程的最適化表單、以絕對路徑提供，或以變數的路徑提供。 您可以使用「字串」類型的變數來指定路徑。\
   您可以將多個調適性表單與工作流程建立關聯。 因此，您可以使用可用的輸入方法，在執行時期上指定最適化表單。

* **使用互動式通訊：** 指定定位輸入互動式通訊的方法。 您可以使用提交至工作流程的互動式通訊，以絕對路徑提供，或以變數的路徑提供。 您可以使用「字串」類型的變數來指定路徑。 如果您從「類型」下拉式清單中選取「互動式通訊代理UI」或「互動式通訊Web頻道檔案」，就可使用此選項。\
   **注意：** 您必須有cm-agent-users和workflow-users群組指派，才能存取AEM收件匣中的Interactive Communications Agent UI。

* **最適化表單或互動式通訊路徑**:指定最適化表單或互動式通訊的路徑。 您可以使用提交到工作流的自適應表單或互動式通信（在絕對路徑上可用），或從儲存在字串資料類型變數中的路徑檢索自適應表單。
* **使用下列方式選擇輸入PDF:** 指定非互動式PDF檔案的路徑。 當您在「類型」欄位中選擇非互動式PDF檔案時，此欄位即可使用。 您可以使用相對於裝載的路徑、儲存在絕對路徑上，或使用「檔案」資料類型的變數來選取輸入PDF。 例如， [Payload_Directory]/Workflow/PDF/credit-card.pdf。 crx-repository中不存在路徑。 管理員在使用路徑之前建立路徑。 您需要啟用記錄檔案選項或以表單範本為基礎的最適化表單，才能使用PDF路徑選項。
* **對於完成的任務，請將最適化表單渲染為**:當任務標籤完成時，您可以將最適化表單轉換為唯讀最適化表單或PDF檔案。 您需要啟用「記錄檔案」選項或基於表單範本的最適化表單，才能將最適化表單轉譯為「記錄檔案」。
* **預先填入：** 下列欄位可做為工作的輸入：

   * **使用下列方式選擇輸入資料檔案：** 輸入資料檔案的路徑(.json,. xml、.doc或表單資料模型)。 您可以使用與裝載相關的路徑來擷取輸入資料檔案，或擷取儲存在「檔案」、「XML」或「JSON」資料類型變數中的檔案。 例如，檔案包含透過AEM Inbox應用程式提交表單的資料。 範例路徑為 [Payload_Directory]/workflow/data。
   * **使用以下方法選擇輸入附件：** 該位置可用的附件將附加到與任務相關聯的表單。 路徑始終相對於有效載荷。 示例路徑是 [Payload_Directory]/attachments/
   * **選擇輸入JSON:** 使用相對於裝載或儲存在「檔案」、「JSON」或「表單資料模型」資料類型變數中的路徑，選取輸入JSON檔案。 如果您從「類型」下拉式清單中選取「互動式通訊代理UI」或「互動式通訊Web頻道檔案」，就可使用此選項。
   * **選擇自訂的預填服務：** 選擇預填充服務以檢索資料並預填充互動式通信Web頻道文檔或代理UI。

   * **使用上述互動式通訊的預填服務：** 使用此選項可使用「使用互動式通訊」下拉式清單中定義之互動式通訊的預填服務。
   * **請求屬性映射：** 使用「請求屬性映射」部分可定 [義請求屬性的名稱和值](../../forms/using/work-with-form-data-model.md#bindargument)。 根據請求中指定的屬性名稱和值，從資料源檢索詳細資訊。 您可以使用常值或字串資料類型的變數來定義請求屬性值。\
      只有從「類型」下拉式清單中選取「互動式通訊代理UI」或「互動式通訊網路頻道檔案」時，才能使用預先填寫服務和請求屬性對應選項。

* **已提交的資訊：** 以下列出的欄位用作任務的輸出位置：

   * **使用以下方式保存輸出資料檔案：** 儲存資料檔案(.json,。 xml、.doc或表單資料模型)。 資料檔案包含透過關聯表單提交的資訊。 您可以使用與裝載相關的路徑來儲存輸出資料檔案，或將它儲存在檔案、XML或JSON資料類型的變數中。 例如， [Payload_Directory]/Workflow/data，其中data是檔案。
   * **使用以下方式保存附件：** 保存任務中提供的表單附件。 您可以使用相對於裝載的路徑來保存附件，或將其儲存在「文檔」資料類型的陣列變數中。
   * **使用下列方式保存記錄文檔：** 保存記錄文檔檔案的路徑。 例如， [Payload_Directory]/DocumentofRecord/credit-card.pdf。 您可以使用相對於裝載的路徑來儲存記錄檔案，或將它儲存在「檔案」資料類型的變數中。 如果您選 **取「相對於裝載** 」選項，路徑欄位保留空白時，不會產生記錄檔案。 僅當從「類型」(Type)下拉清單中選擇「最適化表單」(Adaptive form)時，此選項才可用。

   * **使用下列方式儲存Web頻道資料：** 使用與裝載相關的路徑儲存網路頻道資料檔案，或將它儲存在「檔案」、「JSON」或「表單資料模型」資料類型的變數中。 僅當從「類型」下拉清單中選擇「Interactive Communication Agent UI」時，此選項才可用。
   * **使用下列功能儲存PDF檔案：** 使用與裝載相關的路徑儲存PDF檔案，或將其儲存在「檔案」資料類型的變數中。 僅當從「類型」下拉清單中選擇「Interactive Communication Agent UI」時，此選項才可用。
   * **使用下列項目儲存版面範本：** 使用與裝載相關的路徑儲存版面範本，或將其儲存在「檔案」資料類型的變數中。 版 [面範本](../../forms/using/layout-design-details.md) ，是指您使用Forms Designer建立的XDP檔案。 僅當從「類型」下拉清單中選擇「Interactive Communication Agent UI」時，此選項才可用。

* **受託人>指派選項：** 指定指派任務給用戶的方法。 您可以使用「參與者選擇器」指令碼，將工作動態指派給使用者或群組，或將工作指派給特定的AEM使用者或群組。
* **參與者選擇器：** 當在「指派選項」欄位中 **選取「動態對使用者或群組** 」選項時，此選項即可用。 您可以使用ECMAScript或服務來動態選取使用者或群組。 如需詳細資訊，請 [參閱動態指派工作流程給使用者](https://helpx.adobe.com/experience-manager/kb/HowToAssignAWorkflowDynamicallyToParticipants.html) , [以及建立自訂Adobe Experience Manager動態參與者步驟。](https://helpx.adobe.com/experience-manager/using/dynamic-steps.html)

* **參與者：** 在「參與者選擇器」( **[!UICONTROL Participant Chooser]** )欄位中選擇 **com.adobe.granite.workflow.core.process.RandomParticipantChooser** 選項時，該欄位可用。 該欄位允許您為RandomParticipantChooser選項選擇用戶或組。

* **受託人：** 在「參與者選擇器」 **[!UICONTROL 欄位中選取com.adobe.fd.workspace.step.service.VariableParticipantChooser]** 時，此欄位 **即可使用** 。 此欄位可讓您選取「字串」資料類型的變數，以定義受託人。

* **引數：** 在「參與者選擇器」(Participant Choose)欄位中選擇了RandomParticipantChoose指令碼以外的指令碼時，該欄位可用。 該欄位允許您為在「參與者選擇器」欄位中選擇的指令碼提供逗號分隔參數的清單。

* **使用者或群組：** 任務被指派給選定的用戶或組。 當在「指派選項」欄位中選 **取「至特定使用者或群組** 」選項時， **此選項可用** 。 此欄位會列出工作流程使用者群組的所有使用者和群組。\
   「使 **用者或群組** 」下拉式功能表會列出登入使用者可存取的使用者和群組。 用戶名顯示取決於您是否對crx-repository中的 **用戶節點** （對於該特定用戶）具有訪問權限。

* **以電子郵件通知受託人：** 選取此選項，可傳送電子郵件通知給受託人。 這些通知會在指派任務給使用者時傳送。 在使用選項之前，請先從AEM Web Console啟用通知。 如需逐步指示，請參閱為指派 [任務步驟設定電子郵件通知](../../forms/using/aem-forms-workflow.md)

* **HTML電子郵件範本**:為通知電子郵件選擇電子郵件範本。 要編輯模板，請修改位於crx-repository中/libs/fd/dashboard/templates/email/htmlEmailTemplate.txt的檔案。
* **允許委派至：** AEM收件匣提供選項給登入的使用者，以將指派的工作流程委派給其他使用者。 您可以委派給相同群組或其他群組的工作流程使用者。 如果將任務指派給單個用戶，並且選 **擇了「允許委派給受託人組** 」選項，則無法將任務委派給其他用戶或組。
* **共用設定：** AEM Inbox提供選項，可讓其他使用者共用收件匣中的單一或所有工作：
   * 當選取「 **允許受託人明確在收件匣中共用** 」選項時，使用者可以按一下工作，並與其他AEM使用者共用。
   * 當選擇「 **允許受託人通過收件箱共用** 」選項，並且用戶共用其收件箱項目或允許其他用戶訪問其收件箱項目時，只有啟用上述選項的任務才會與其他用戶共用。

* **動作>預設動作：** 現成可用的「送出」、「儲存」和「重設」動作。 預設情況下，所有預設操作都處於啟用狀態。
* **路由變數：** 路由變數的名稱。 路由變數會擷取使用者在AEM收件匣中選取的自訂動作。
* **路由：** 任務可以分支到不同的路由。 在「AEM收件匣」中選取時，路由會傳回值，並根據選取的路由來分支工作流程。 您可以將路由儲存在字串資料類型陣列的變數中，或選擇 **Literal** 以手動添加路由。

* **標題**:指定路由的標題。 它會顯示在「AEM收件匣」中。
* **珊瑚圖示**:指定珊瑚圖示的HTML屬性。 Adobe CorelUI程式庫提供一組大量的觸控優先圖示。 您可以選擇並使用路由的表徵圖。 它會與「AEM收件匣」中的標題一起顯示。 如果您將路由儲存在變數中，則路由會使用預設的「標籤」珊瑚圖示。
* **允許受託人新增留言**:選擇此選項可為任務啟用注釋。 受託人可以在提交工作時從AEM收件匣中新增注釋。
* **在變數中儲存註解：** 將注釋儲存在字串資料類型的變數中。 只有在您選取「允許受託人新增注 **釋」核取方塊時，才會顯示此選項** 。

* **允許受託人將附件添加到任務**:選擇此選項可為任務啟用附件。 受託人可以在提交工作時從AEM收件匣新增附件。
* **使用以下方法保存輸出任務附件**:指定附件資料夾的位置。 您可以使用相對於裝載的路徑或文檔資料類型陣列的變數保存輸出任務附件。 僅當從 **Oracle Type Drop-down最適化Oracle Daptive Or Daptive Or Daptive Tab中選中****Allow to addattment(s)到任務**，並選擇 **Form**、 **Read-onlyForm********** 或Non-In-In-Interactive Dopd Dopdicocumentative文檔複選框時，此選項才會顯示。

>[!NOTE]
>
>在運行時期間，使用代理UI中的「附件」頁籤將附件與交互通信關聯。 在「完成」狀態下開啟工作項目後，關聯的附件在側鏈中顯示為任務附件。

* **使用自訂中繼資料：** 選取此選項可啟用自訂中繼資料欄位。 自訂中繼資料會用於電子郵件範本。
* **自訂中繼資料：** 為電子郵件範本選擇自訂中繼資料。 自訂中繼資料可在apps/fd/dashboard/scripts/metadataScripts的crx-repository中使用。 crx-repository中不存在指定的路徑。 管理員在使用路徑之前建立路徑。 您也可以對自訂中繼資料使用服務。 您也可以擴充WorkitemUserMetadataService介面，以提供自訂中繼資料。
* **顯示前一步驟的資料**:選擇此選項可讓受分配者查看先前的受分配者、已對任務執行的操作、添加到任務的注釋，以及已完成任務的記錄文檔（如果可用）。
* **顯示後續步驟的資料：** 選擇此選項可讓目前受託人檢視後續受託人所採取的動作和新增至工作的註解。 它還允許當前受託人查看已完成任務的記錄文檔（如果可用）。
* **資料類型的可見性：** 根據預設，受託人可以檢視先前及後續受託人已新增的記錄檔案、受讓人、所採取的動作和注釋。 使用資料類型的可見性選項，限制受指派者可見的資料類型。

## 傳送電子郵件步驟 {#send-email-step}

使用電子郵件步驟傳送電子郵件，例如包含記錄檔案、最適化表單連結、互動式通訊連結或附加PDF檔案的電子郵件。 「傳送電子郵件」步驟支援 [HTML電子郵件](https://en.wikipedia.org/wiki/HTML_email)。 HTML電子郵件會回應，並會根據收件者的電子郵件用戶端和螢幕大小進行調整。 您可以使用HTML電子郵件範本來定義電子郵件的外觀、色彩配置和行為。

電子郵件步驟使用Day CQ Mail Service來傳送電子郵件。 在使用電子郵件步驟之前，請確定已 [設定電子郵件](../../forms/using/aem-forms-workflow.md) 服務。 電子郵件步驟包含下列屬性：

**標題：** 步驟的標題有助於在工作流程編輯器中識別步驟。

**說明：** 當您在共用開發環境中工作時，說明對其他流程開發人員非常有用。

**電子郵件主旨：** 您可從工作流程中繼資料擷取主題、手動指定主題，或從儲存在變數中的值擷取主題。 從下列選項中選擇：

* **常值-** 手動指定主題。
* **從工作流元資料中檢索** -從元資料屬性中檢索主題。
* **變數** -從儲存在字串資料類型變數中的值擷取主題。

**HTML電子郵件範本**:電子郵件的HTML範本。 您可以在電子郵件範本中指定變數。 「電子郵件步驟」會擷取並顯示範本中包含的所有變數，以供輸入。

**電子郵件範本中繼資料：** 電子郵件範本變數的值可以是使用者指定的值、作者或發佈伺服器上資產的路徑、影像或工作流程中繼資料屬性。

* **常值：** 當您知道要指定的確切值時，請使用此選項。 例如， [example@example.com](mailto:example@example.com)。

* **工作流程中繼資料：** 當要使用的值儲存在工作流程中繼資料屬性中時，請使用此選項。 在選取選項後，在「工作流元資料」選項下的空文本框中輸入元資料屬性名稱。 例如，emailAddress。
* **資產URL:** 使用選項將互動式通訊的Web連結內嵌至電子郵件。 選取選項後，瀏覽並選擇要內嵌的互動式通訊。 資產可以駐留在作者或發佈伺服器上。
* **影像：** 使用將影像內嵌至電子郵件的選項。 選取選項後，請瀏覽並選擇影像。 影像選項僅適用於電子郵件範本中的影像標籤(&lt;img src=&quot;*&quot;/>)。

**寄件者／收件者的電子郵件地址：** 選擇「常 **值** 」選項可手動指定電子郵件地址，或選擇「從工作流中檢索元資料 **** 」選項可從元資料屬性檢索電子郵件地址。 您也可以為「從工作流中檢索元資料」選項指定元數 **據屬性陣列的清單** 。 選擇「 **變數** 」選項，從字串資料類型變數中儲存的值中檢索電子郵件地址。

**檔案附件：** 指定位置的可用資產會附加至電子郵件。 資產的路徑可以是相對於裝載或絕對路徑。 示例路徑是 [Payload_Directory]/attachments/。

選取「 **變數** 」選項，以擷取儲存在「檔案」、「XML」或「JSON」資料類型變數中的檔案附件。

**檔案名：** 電子郵件附件檔案的名稱。 「電子郵件步驟」將附件的原始檔案名更改為指定的檔案名。 您可以手動指定名稱，或從工作流程中繼資料屬性或變數中擷取名稱。 當您知道 **要指定的確切值時** ，請使用「常值」選項。 使用「 **變數** 」選項，從字串資料類型變數中儲存的值擷取檔案名稱。 當要使用 **的值保存在工作流元資料屬性中時** ，請使用「從工作流元資料檢索」選項。

## Generate Document of Record step {#generate-document-of-record-step}

填寫或提交表格時，您可以以列印或檔案格式保存表格記錄。 這稱為記錄檔案(DoR)。 您可以使用「產生記錄檔案」步驟來建立可調式表單的唯讀或互動式PDF版本。 PDF版本包含填入表單的資訊以及最適化表單的版面配置。

「記錄文檔」(Document of Record)步驟具有以下屬性：

**使用最適化表單**:指定要定位輸入自適應表單的方法。 您可以使用提交至工作流程的最適化表單、以絕對路徑提供，或以變數的路徑提供。 您可以使用「字串」資料類型的變數，在「選取要解析的變數」欄位中 **指定路徑** 。\
您可以將多個調適性表單與工作流程建立關聯。 因此，您可以使用可用的輸入方法，在執行時期上指定最適化表單。

**最適化表單路徑**:指定最適化表單的路徑。 從「使用最適化表單」欄位中 **選擇「在絕對路徑上可用** 」選項 **** 時，該欄位可用。

**使用下列方式選擇「輸入資料」:** 最適化表單的輸入資料路徑。 您可以將資料保留在相對於裝載的位置、指定資料的絕對路徑，或擷取儲存在「檔案」、JSON或XML資料類型變數中的資料。 輸入資料與自適應表單合併以建立記錄文檔。

**選擇「輸入附件路徑」(Input attachment path using:):** 附件的路徑。 這些附件包含在記錄文檔中。 您可以將附件保持在相對於裝載的位置，指定附件的絕對路徑，或檢索儲存在「文檔」資料類型陣列變數中的附件。

如果指定資料夾的路徑（例如附件），則資料夾中直接可用的所有檔案都將附加到記錄文檔。 如果資料夾中有任何檔案直接位於指定的附件路徑中，則檔案將作為附件包括在記錄文檔中。 如果直接可用的資料夾中有任何資料夾，則會跳過這些資料夾。

**使用以下選項保存生成的記錄文檔：** 指定保留記錄檔案的位置。 您可以選擇覆寫裝載資料夾、將記錄檔案置於裝載目錄內的位置，或將記錄檔案儲存在「檔案」資料類型的變數中。

**地區**:指定記錄檔案的語言。 選擇 **常值** ，從下拉清單中選擇語言環境，或選擇 **Variable** ，從字串資料類型變數中儲存的值中檢索語言環境。 在變數中儲存地區設定值時，您必須定義地區設定代碼。 例如，請為英 **文指定en_US** ，為 **法文指定fr_FR** 。

## Invoke Form Data Model Service step {#invoke-form-data-model-service-step}

您可以使 [用AEM Forms Data Integration](../../forms/using/data-integration.md) ，來設定和連線到不同的資料來源。 這些資料來源可以是資料庫、Web服務、REST服務、OData服務和CRM解決方案。 AEM Forms Data Integration可讓您建立包含各種服務的表單資料模型，以對已設定的資料庫執行資料擷取、新增和更新作業。 您可以使用「調 **用資料模型服務」步驟來選擇表單資料模型** (FDM)，並使用FDM的服務來檢索、更新或向不同的資料源添加資料。

若要說明步驟欄位的輸入，請以下資料庫表格和JSON檔案為範例：

**CustomerDetails表示例**

<table>
 <tbody> 
  <tr> 
   <td>屬性</td> 
   <td>值<br /> </td> 
  </tr> 
  <tr> 
   <td>名字<br /> </td> 
   <td>莎拉<br /> </td> 
  </tr> 
  <tr> 
   <td>姓氏</td> 
   <td>玫瑰</td> 
  </tr> 
  <tr> 
   <td>客戶ID</td> 
   <td>1</td> 
  </tr> 
  <tr> 
   <td>電子郵件地址<br /> </td> 
   <td>srose@we.info</td> 
  </tr> 
 </tbody> 
</table>

**範例JSON檔案**

```
{ 
  customer: { 
   firstName: "Sarah", 
   lastName:"Rose", 
   customerId: "1", 
   emailAddress:"srose@we.info" 
 }, 
  insurance: {
   customerId: "1", 
  policyType: "Premium,
  policyNumber: "Premium-521499",
  customerDetails: { 
   firstName: "Sarah",
   lastName: "Rose",
   customerId: "1",
   emailAddress: "srose@we.info" 
  }
 }
}
```

「調用表單資料模型服務」步驟列出以下欄位，以便執行表單資料模型操作：

* **標題：** 步驟的標題。 它有助於識別工作流程編輯器中的步驟。
* **說明：** 當您在共用開發環境中工作時，此說明對其他流程開發人員非常有用。

* **表單資料模型路徑**:瀏覽並選取伺服器上顯示的表單資料模型。

* **服務**:所選表單資料模型提供的服務清單。
* **服務輸入>使用常值、變數或工作流程中繼資料和JSON檔案提供輸入資料**:服務可以有多個引數。 選擇從工作流元資料屬性、JSON對象、變數中獲取服務參數值的選項，或直接在提供的文本框中輸入值：

   * **常值：** 當您知道要指定的確切值時，請使用此選項。 例如，srose@we.info。
   * **變數：** 使用選項來擷取儲存在變數中的值。
   * **從工作流元資料中檢索：** 當要使用的值儲存在工作流程中繼資料屬性中時，請使用此選項。 例如，emailAddress。
   * **JSON點符號：** 當要使用的值在JSON檔案中時，請使用此選項。 例如，insurance.customerDetails.emailAddress。 JSON Dot Notation選項只有在選取「從輸入JSON選項對應輸入欄位」時才可用。
   * **從輸入JSON對應輸入欄位：** 指定JSON檔案的路徑，以從JSON檔案取得某些服務引數的輸入值。 JSON檔案的路徑可以是相對於裝載、絕對路徑，或者您可以使用JSON或表單資料模型類型的變數來選取輸入JSON檔案。

* **服務輸入>使用變數或JSON檔案提供輸入資料：** 選取選項，以從儲存在絕對路徑、相對於裝載的路徑或變數中的JSON檔案取得所有引數的值。
* **使用**:包含所有服務引數值的JSON檔案。 JSON檔案的路徑可以是相 **對於裝載** 或絕 **對路徑。** 您也可以使用JSON或表單資料模型資料類型的變數來擷取輸入JSON檔案。

* **JSON點符號：** 將欄位留空，以使用指定JSON檔案的所有物件做為服務引數的輸入。 若要從指定的JSON檔案讀取特定JSON物件作為服務引數的輸入，請為JSON物件指定點符號，例如，如果您有類似於區段開頭所列的JSON，請指定insurance.customerDetails，以提供客戶的所有詳細資料作為服務的輸入。
* **服務輸出>將輸出值映射並寫入變數或中繼資料：** 選擇將輸出值保存為crx-repository中工作流實例元資料節點的屬性的選項。 指定中繼資料屬性的名稱，並選取要與中繼資料屬性對應的對應服務輸出屬性，例如，將輸出服務傳回的phone_number與工作流程中繼資料的phone_number屬性對應。 同樣地，您也可以將輸出儲存在Long資料類型的變數中。
* **服務輸出>儲存輸出至變數或JSON檔案：** 選取選項，將輸出值儲存在JSON檔案的絕對路徑、相對於裝載的路徑或變數中。
* **使用下列選項儲存輸出JSON檔案：** 儲存輸出JSON檔案。 輸出JSON檔案的路徑可以是相對於裝載或絕對路徑。 您也可以使用JSON或表單資料模型資料類型的變數來儲存輸出JSON檔案。

## 簽署檔案步驟 {#sign-document-step}

「簽署檔案」步驟可讓您使用Adobe Sign來簽署檔案。 「簽署檔案」步驟包含下列屬性：

* **合約名稱：** 指定合約的標題。 合約名稱會成為傳送給簽署者之電子郵件的主旨和正文文字的一部分。 您可以將名稱儲存在String資料類型的變數中，或選取 **Literal** ，以手動新增名稱。

* **地區設定：** 指定電子郵件和驗證選項的語言。 您可以將地區設定儲存在字串資料類型的變數中，或選擇 **Literal** ，從可用選項清單中選擇地區設定。 在變數中儲存地區設定值時，您必須定義地區設定代碼。 例如，請為英 **文指定en_US** ，為 **法文指定fr_FR** 。

* **Adobe Sign Cloud設定**:選擇Adobe Sign Cloud設定。 如果您尚未針對AEM Forms設定Adobe Sign，請參閱「 [將Adobe Sign與AEM Forms整合](../../forms/using/adobe-sign-integration-adaptive-forms.md)」。

* **使用下列方式選擇要簽署的檔案：** 您可以從相對於裝載的位置選擇文檔、使用裝載作為文檔、指定文檔的絕對路徑或檢索儲存在「文檔」資料類型變數中的文檔。
* **截止日期：** 在任務上沒有「截止天數」欄位中指定的天數的活動後，文檔將標籤為「到期(已過 **期** )」。 在將記錄的日期指派給使用者進行簽署後，會計算天數。
* **提醒電子郵件頻率：** 您可以每日或每週間隔傳送提醒電子郵件。 該周會從檔案指定給使用者進行簽署的當天開始計算。
* **簽名程式：** 您可以選擇以循序或平行順序簽署檔案。 依循順序，一個簽署者會一次收到檔案進行簽署。 第一個簽署者完成檔案簽署後，檔案就會傳送給第二個簽署者，依此類推。 同時，多位簽署者可一次簽署檔案。
* **重新導向URL:** 指定重新導向URL。 簽署檔案後，您可以將受託人重新導向至URL。 通常，此URL會包含感謝訊息或進一步指示。
* **工作流階段：** 工作流程可以有多個階段。 這些階段會顯示在「AEM收件匣」中。 您可以在模型屬性中定義這些階段（「側腳>頁面>頁面屬性>階段」）。
* **選擇簽署者：** 指定檔案的簽署者選擇方法。 您可以動態指派工作流程給使用者或群組，或手動新增簽章者的詳細資訊。
* **選擇簽署者的指令碼或服務：** 只有在「選擇簽署者」欄位中選取「動態」選項時，此選項才可用。 您可以指定ECMAScript或服務來選擇檔案的簽署者和驗證選項。
* **簽署者詳細資訊：** 只有在「選擇簽署者」欄位中選取「手動」選項時，此選項才可用。 指定電子郵件地址並選擇可選的驗證機制。 在選取2步驟驗證機制之前，請確定已設定Adobe Sign帳戶的對應驗證選項已啟用。 您可以使用「字串」資料類型的變數來定義「電子郵 **[!UICONTROL 件]**」、「國 **[!UICONTROL 家代碼]**」和「電 **[!UICONTROL 話號碼]** 」欄位的值。 只有從 **** 2步驗證下拉式清單中選取「電話驗證」( **[!UICONTROL Phone Verification]** )時，才會顯示「國家／地區代碼」(Country ******** Code)和「電話號碼」(Phone Number)欄位。
* **狀態變數：** 啟用Adobe Sign的檔案會將檔案的簽署狀態儲存為字串資料類型的變數。 指定狀態變數的名稱(adobeSignStatus)。 例項的狀態變數可在CRXDE中取得，位址為/etc/workflow/instances/&lt;server>/&lt;date-time>/&lt;workflow model>/workItems/&lt;node>/metaData包含變數的狀態。
* **使用下列選項儲存已簽署的檔案：** 指定要保留已簽署檔案的位置。 您可以選擇覆寫裝載檔案、將已簽署的檔案置於裝載目錄內的位置，或將已簽署的檔案儲存在「檔案」類型的變數中。

## 檔案服務步驟 {#document-services-steps}

AEM檔案服務是一組用來建立、組合和保護PDF檔案的服務。 AEM Forms為每個檔案服務提供個別的AEM Workflow步驟。

與其他AEM Forms工作流程步驟類似，例如「指派工作」、「傳送電子郵件」和「簽署檔案」，您可以在所有AEM檔案服務步驟中使用變數。 如需建立和管理變數的詳細資訊，請參閱「AEM工 [作流程中的變數」](../../forms/using/variable-in-aem-workflows.md)。

### Apply Document Time Stamp step {#apply-document-time-stamp-step}

將時間戳記新增至檔案。 您提供檔案詳細資訊，例如輸入檔案路徑、輸入檔案名稱、儲存匯出資料的位置。 您可以選擇覆寫現有的裝載檔案、選擇不同的檔案名稱，將資料儲存在裝載檔案夾下的不同檔案中、提供資料的絕對路徑，或將資料儲存在「檔案」資料類型的變數中。

### 轉換為影像步驟 {#convert-to-image-step}

將PDF檔案轉換為影像清單。 支援的影像格式包括JPEG、JPEG2000、PNG和TIFF。 以下資訊適用於TIFF影像的轉換：

* 產生多頁TIFF檔案。
* TIFF影像中不包含某些註解。 不包含需要Acrobat產生外觀的註解。

### Convert to PDF/A step {#convert-to-pdf-a-step}

使用提供的選項，將PDF檔案轉換為PDF/A格式。 PDF/A版的可攜式檔案格式(PDF)專門用於檔案的封存和長期保存。

### 轉換為PS步驟 {#convert-to-ps-step}

將PDF檔案轉換為PostScript。 轉換為PostScript時，您可以使用轉換操作來指定來源檔案，以及轉換為PostScript第2層還是第3層。 您轉換為PostScript檔案的PDF檔案必須是非互動的。

### Create PDF from specified type step {#create-pdf-from-specified-type-step}

從輸入檔案產生PDF檔案。 輸入文檔可以相對於有效載荷、具有絕對路徑、可以有效載荷本身或儲存在文檔資料類型的變數中。

### Create PDF from URL/HTML/ZIP step {#create-pdf-from-url-html-zip-step}

從隨附的URL、HTML和ZIP檔案產生PDF檔案。

### 匯出資料步驟 {#export-data-step}

從PDF表單或XDP檔案匯出資料。 它要求您輸入「輸入文檔」和「導出資料格式」的檔案路徑。 「匯出資料格式」的選項有「自動」、「XDP」和「XmlData」。

### Export PDF to specified type step {#export-pdf-to-specified-type-step}

將PDF檔案轉換為選取的格式。

### 產生非互動式PDF步驟 {#generatenoninteractive}

產生非互動式PDF。 它提供各種自訂選項。

>[!NOTE]
>
>您可以使用變數來指定輸入檔案的範本檔案。 將範本檔案的路徑儲存在字串資料類型的變數中。

### 匯入資料步驟 {#import-data-step}

將表單資料合併為PDF表單。 您可以將表單資料匯入PDF表單。

### 叫用DDX步驟 {#invokeddx}

在指定的輸入檔案地圖上執行DDX檔案，並傳回已處理的PDF檔案。

>[!NOTE]
>
>您可以使用變數來指定輸入檔案的DDX檔案。 將DDX檔案儲存在檔案或XML資料類型的變數中。

### 最佳化PDF步驟 {#optimize-pdf-step}

借由縮減PDF檔案的大小，以最佳化PDF檔案。 此轉換的結果是PDF檔案可能會小於其原始版本。 此操作還可將PDF文檔轉換為優化參數中指定的PDF版本。

最佳化設定會指定檔案的最佳化方式。 以下是範例設定：

* 目標PDF版本
* 捨棄物件，例如JavaScript動作和內嵌的頁面縮圖
* 丟棄用戶資料，如注釋和檔案附件
* 放棄無效或未使用的設定
* 壓縮未壓縮的資料或使用更有效率的壓縮演算法
* 移除內嵌字型
* 設定透明度值

### 轉換PDF表單步驟 {#renderpdf}

將在表單設計器(XDP)中建立的表單轉譯為PDF表單。

>[!NOTE]
>
>您可以使用變數來指定輸入檔案的範本檔案。 將範本檔案的路徑儲存在字串資料類型的變數中。

### 保全檔案步驟 {#secure-document-step}

加密、簽署和認證檔案。 AEM Forms支援以密碼為基礎的加密和憑證基本加密。 您也可以選擇各種簽署檔案的演算法。 例如，SHA-256和SH-512。 您也可以使用工作流程步驟來讀取擴充PDF檔案。 工作流程步驟提供啟用條碼解碼、數位簽章、匯入和匯出PDF資料的選項，以及其他選項。

### 傳送至印表機步驟 {#send-to-printer-step}

將檔案直接傳送至印表機。 它支援以下打印訪問機制：

* **可直接存取的印表機**:安裝在同一台電腦上的打印機稱為直接可訪問的打印機，該電腦名為打印機主機。 此類型的打印機可以是直接連接到電腦的本地打印機。
* **間接可存取的印表機**:安裝在打印伺服器上的打印機可從其他電腦訪問。 通用的UNIX®打印系統(CUPS)和線型打印機守護程式(LPD)協定等技術可用於連接到網路打印機。 若要存取間接存取的印表機，請指定列印伺服器的IP或主機名稱。 使用此機制，當網路運行LPD時，可以將文檔發送到LPD URI。 此機制可讓您將檔案路由至任何連線至執行LPD之網路的印表機。

### 生成打印輸出步驟 {#generatePrintedOutput}

該步驟生成PCL、PostScript、ZPL、IPL、TPCL或DPL輸出（給定表單設計和資料檔案）。 資料檔案會與表單設計合併，並格式化以供列印。 由此步驟生成的輸出可直接發送到打印機或另存為檔案。 建議您在使用應用程式的表單設計或資料時，使用此步驟。 如果您的表單設計或表單設計位於網路、本機檔案系統或HTTP位置，請使用generatePrintedOutput作業。

例如，您的應用程式要求您將表單設計與資料檔案合併。 資料包含數百個記錄。 此外，它要求將輸出發送到支援ZPL的打印機。 表單設計和輸入資料都位於應用程式中。 使用generatePrintedOutput操作將每個記錄與表單設計合併，並將輸出發送到支援ZPL的打印機。

「生成打印輸出」(Generate Printed Output)步驟具有以下屬性：

**輸入屬性**

* **[!UICONTROL 使用]**:指定範本檔案的路徑。 您可以使用相對於裝載的路徑、以絕對路徑儲存或使用「檔案」資料類型的變數來選取範本檔案。 例如， [Payload_Directory]/Workflow/data.xml。 如果crx-repository中不存在路徑，管理員可以先建立該路徑，再使用該路徑。 此外，您也可以接受有效負載作為輸入資料檔案。

* **[!UICONTROL 使用下列方式選擇資料檔案]**:指定輸入資料檔案的路徑。 您可以使用相對於裝載的路徑、以絕對路徑儲存或使用「檔案」資料類型的變數來選取輸入資料檔案。 例如， [Payload_Directory]/Workflow/data.xml。 如果crx-repository中不存在路徑，管理員可以先建立該路徑，再使用該路徑。

* **[!UICONTROL 打印機格式]**:「打印格式」值，指定在未提供XDC檔案時用於生成輸出流的頁面描述語言。 如果您提供常值，請選取下列其中一個值：

   * **[!UICONTROL 自定義PCL]**:使用選項為PCL指定自定義XDC檔案。
   * **[!UICONTROL 自訂PostScript]**:使用選項來指定PostScript的自訂XDC檔案。
   * **[!UICONTROL 自訂ZPL]**:使用選項為ZPL指定自定義XDC檔案。
   * **[!UICONTROL 通用顏色PCL(5c)]**:使用通用顏色PCL(5c)。
   * **[!UICONTROL 一般PostScript層級3]**:使用一般PostScript Level 3。
   * **[!UICONTROL ZPL 300 DPI]**:使用ZPL 300 DPI。 使用zpl300.xdc。
   * **[!UICONTROL ZPL 600 DPI]**:使用ZPL 600 DPI。 使用zpl600.xdc檔案。
   * **[!UICONTROL 自訂IPL]**:使用選項為IPL指定自訂XDC檔案。
   * **[!UICONTROL IPL 300 DPI]**:使用IPL 300 DPI。 使用ipl300.xdc。
   * **[!UICONTROL IPL 400 DPI]**:使用IPL 400 DPI。 使用ipl400.xdc檔案。
   * **[!UICONTROL 自訂TPCL]**:使用選項為TPCL指定自定義XDC檔案。
   * **[!UICONTROL TPCL 305 DPI]**:使用TPCL 300 DPI。 使用tpcl305.xdc檔案。
   * **[!UICONTROL PCL 600 DPI]**:使用TPCL 600 DPI。 使用tpcl600.xdc檔案。
   * **[!UICONTROL 自訂DPL]**:使用選項指定自訂XDC檔案DPL。
   * **[!UICONTROL DPL300DPI]**:使用DPL 300 DPI。 使用dpl300.xdc檔案。
   * **[!UICONTROL DPL406DPI]**:使用DPL 400 DPI。 使用dpl406.xdc。
   * **[!UICONTROL DPL600DPI]**:使用DPL 600 DPI。 使用dpl600.xdc。

**輸出屬性**

* **[!UICONTROL 使用下列方式儲存輸出檔案]**:指定儲存輸出檔案的位置。 您可以將輸出檔案儲存在與裝載相關的位置、變數中，或指定儲存輸出檔案的絕對位置。 如果crx-repository中不存在路徑，管理員可以先建立該路徑，再使用該路徑。

**進階屬性**

* **[!UICONTROL 使用下列項目選擇「內容根位置]**」:內容根是一個字串值，它指定URI、絕對引用或儲存庫中的位置，以檢索表單設計使用的相對資產。 例如，如果表單設計相對參照影像，例如../myImage.gif,myImage.gif必須位於repository://。 預設值為repository:// ，它指向儲存庫的根級別。

   當您從應用程式中挑選資產時，「內容根URI」路徑必須有正確的結構。 例如，如果從名為SampleApp的應用程式中挑選表單，並將其置於SampleApp/1.0/forms/Test.xdp，則「內容根URI」必須指定為repository://administrator@password/Applications/SampleApp/1.0/forms/，或儲存庫：/Applications/SampleApp/1.0/forms/（當權限為null時）。 以此方式指定內容根URI時，表單中所有參考資產的路徑都會針對此URI進行解析。

* **[!UICONTROL 使用]**:XCI檔案可用來說明用於表單設計元素的字型和其他屬性。 您可以將XCI檔案相對於裝載、保留在絕對路徑，或使用「檔案」資料類型的變數。

* **[!UICONTROL 地區]**:指定用於生成PDF文檔的語言。 如果您提供常值，請從清單中選取語言，或選取下列其中一個值：
   * **要使用伺服器預設值**:（預設）使用AEM Forms伺服器上設定的「地區設定」設定。 「地區設定」是使用「管理控制台」來設定。 (請參 [閱設計人員說明](http://www.adobe.com/go/learn_aemforms_designer_65)。)

   * **若要使用自訂值**:在常值方塊中輸入地區代碼，或選取包含地區代碼的字串變數。 如需支援地區設定代碼的完整清單，請參閱http://java.sun.com/j2se/1.5.0/docs/guide/intl/locale.doc.html。

* **[!UICONTROL 副本]**:一個整數值，它指定要為輸出生成的副本數。 預設值為1。

* **[!UICONTROL 雙面打印]**: 指定是使用雙面打印還是單面打印的分頁值。 支援PostScript和PCL的打印機使用此值。如果提供常值，請選擇以下值之一：
   * **[!UICONTROL 雙工長邊]**:使用長邊分頁功能，使用雙面列印和列印。
   * **[!UICONTROL 雙工短邊]**:使用短邊分頁功能，使用雙面列印和列印。
   * **[!UICONTROL 單純形]**:使用單面列印。