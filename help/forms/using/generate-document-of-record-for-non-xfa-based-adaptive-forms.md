---
title: 為最適化表單產生記錄檔案
seo-title: 為最適化表單產生記錄檔案
description: 說明如何為記錄檔案(DoR)產生範本以用於最適化表單。
seo-description: 說明如何為記錄檔案(DoR)產生範本以用於最適化表單。
uuid: 2dc7e0de-fff9-43fa-9426-e9b047eb2595
content-type: reference
topic-tags: develop
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: ce65cb5f-94ec-4423-9fa9-d617e9703091
docset: aem65
translation-type: tm+mt
source-git-commit: 14975f409a0e17183b3da6bdc5a42c8073080108

---


# 為最適化表單產生記錄檔案{#generate-document-of-record-for-adaptive-forms}

## 概覽 {#overview}

在提交表格後，您的客戶通常希望以列印或檔案格式記錄他們在表格中填入的資訊，以供日後參考。 這稱為記錄檔案。

本文說明如何為最適化表單產生記錄檔案。

>[!NOTE]
>
>基於XFA的自適應表單不支援自動產生記錄檔案。 不過，您可以使用用來建立最適化表單作為記錄檔案的XDP。

## 最適化表單類型及其記錄檔案 {#adaptive-form-types-and-their-documents-of-record}

建立自適應表單時，可以選擇表單模型。 您的選項包括：

* [表單範本](../../forms/using/creating-adaptive-form.md#create-an-adaptive-form-based-on-an-xfa-form-template)可讓您為最適化表單選取XFA範本。 當您選擇XFA範本時，可以如上所述，將相關的XDP檔案用於記錄檔案。

* [XML架構](../../forms/using/creating-adaptive-form.md#create-an-adaptive-form-based-on-xml-or-json-schema)可讓您為最適化表單選擇XML架構定義。 為最適化表單選擇XML架構時，您可以：

   * 將XFA範本關聯至記錄檔案。 確保關聯的XFA範本使用與最適化表單相同的XML架構
   * 自動產生記錄檔案

* 無可讓您建立沒有表單模型的最適化表單。 記錄檔案會針對您的最適化表單自動產生。

當您選擇表單模型時，請使用記錄文檔模板配置下的選項來配置記錄文檔。 See [Document of Record Template Configuration](#document-of-record-template-configuration).

## 自動產生的記錄檔案 {#automatically-generated-document-of-record}

記錄檔案可讓客戶保留已提交表單的副本，以供列印之用。 當您自動產生記錄檔案時，每次變更表格時，其記錄檔案都會立即更新。 例如，您會移除選擇美國作為其國家的客戶的年齡欄位。 當此類客戶產生記錄檔案時，記錄檔案中不會顯示年齡欄位。

自動產生的記錄檔案具有以下優點：

* 它負責資料系結。
* 它會自動隱藏在提交時標籤為不包含記錄檔案的欄位。 不需額外的努力。
* 它為記錄模板的文檔設計節省了時間。
* 它可讓您使用不同的基本範本來嘗試不同的樣式和外觀，並為記錄檔案選擇最佳樣式和外觀。 樣式外觀是可選的，如果不指定樣式，系統樣式將設定為預設樣式。
* 它可確保任何表格變更都立即反映在記錄檔案中。

## 自動產生記錄檔案的元件 {#components-to-automatically-generate-a-document-of-record}

要為自適應表單生成記錄文檔，您需要以下元件：

**最適化表單** ：您要為其產生記錄檔案的最適化表單。

**在AEM Designer中建立的基本範本（建議）** XFA範本（XDP檔案）。 基本模板用於指定記錄模板文檔的樣式和品牌資訊。

請參 [閱記錄文檔的基本模板](#base-template-of-a-document-of-record)

>[!NOTE]
>
>記錄文檔的基本模板也稱為記錄文檔的元模板。

**從最適化表單產生的記錄範本** XFA範本（XDP檔案）檔案。

See [Document of Record Template Configuration](#document-of-record-template-configuration).

**表單資料** ：使用者以最適化表單填入的資訊。 它與記錄文檔模板合併，生成記錄文檔。

## 最適化表單元素的對應 {#mapping-of-adaptive-form-elements}

以下各節將說明最適化表單元素在記錄檔案中的顯示方式。

### 欄位 {#fields}

<table>
 <tbody>
  <tr>
   <th>最適化表單元件</th>
   <th>對應的XFA元件</th>
   <th>記錄範本檔案預設包含？</th>
   <th>附註</th>
  </tr>
  <tr>
   <td>按鈕</td>
   <td>按鈕</td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>複選框</td>
   <td>核取方塊</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>日期選擇器</td>
   <td>日期／時間欄位</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>下拉式清單</td>
   <td>下拉式清單</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>草寫簽名</td>
   <td>簽名塗鴉</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>數值方塊</td>
   <td>數值欄位</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>密碼框</td>
   <td>密碼欄位</td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>選項按鈕</td>
   <td>選項按鈕</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>文字方塊</td>
   <td>文字欄位</td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>重設按鈕</td>
   <td>重設按鈕</td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>「提交」按鈕</td>
   <td><p>電子郵件提交按鈕</p> <p>HTTP提交按鈕</p> </td>
   <td>false</td>
   <td> </td>
  </tr>
  <tr>
   <td>條款與條件</td>
   <td> </td>
   <td>true</td>
   <td> </td>
  </tr>
  <tr>
   <td>檔案附件</td>
   <td> </td>
   <td>false</td>
   <td>記錄模板文檔中不提供。 僅通過附件在記錄文檔中可用。</td>
  </tr>
 </tbody>
</table>

### 容器 {#containers}

<table>
 <tbody>
  <tr>
   <th>最適化表單元件</th>
   <th>對應的XFA元件</th>
   <th>附註</th>
  </tr>
  <tr>
   <td>面板<br /> </td>
   <td>子表單<br /> </td>
   <td>可重複面板對應至可重複的子表單。</td>
  </tr>
 </tbody>
</table>

### 靜態元件 {#static-components}

| 最適化表單元件 | 對應的XFA元件 | 附註 |
|---|---|---|
| 影像 | 影像 | TextDraw和Image元件（無論系結或未系結）一律會出現在XSD式最適化表單的記錄檔案中，除非使用記錄設定檔案排除。 |
| 文字 | 文字 |

>[!NOTE]
>
>在傳統的UI中，您會取得不同的標籤來編輯欄位屬性。

### Tables {#tables}

自適應表單表元件（如頁首、頁尾和行映射）與對應的XFA元件。 您可以將可重複的面板映射至記錄檔案中的表格。

## 記錄檔案的基本範本 {#base-template-of-a-document-of-record}

基本範本為記錄檔案提供樣式和外觀資訊。 它可讓您自訂自動產生的記錄檔案的預設外觀。 例如，您想在標題中新增公司標誌，並在記錄檔案的頁尾中新增版權資訊。 基本模板的首頁用作記錄模板文檔的首頁。 主版頁面可以包含頁首、頁尾和頁碼等資訊，您可以套用至記錄檔案。 您可以使用基本範本將此類資訊套用至記錄檔案，以自動產生記錄檔案。 使用基本模板可以更改欄位的預設屬性。

設計基本 [範本時](#base-template-conventions) ，請遵循基本範本慣例。

## 基本範本慣例 {#base-template-conventions}

基本範本用於定義記錄檔案的頁首、頁尾、樣式和外觀。 頁首和頁尾可包含公司標誌和版權文字等資訊。 基本模板中的第一個首頁將被複製並用作記錄文檔的首頁，該首頁包含頁眉、頁腳、頁碼或記錄文檔中所有頁應顯示的任何其他資訊。 如果您使用不符合基本模板慣例的基本模板，則記錄模板文檔中仍使用基本模板的第一個首頁。 強烈建議您依其慣例設計基本範本，並使用它自動產生記錄檔案。

**主版頁面慣例**

* 在基本範本中，您應將根子表單命 `AF_METATEMPLATE` 名為，將主版頁命名為 `AF_MASTERPAGE`。

* 主版頁面的名稱位 `AF_MASTERPAGE` 於根子表 `AF_METATEMPLATE` 單下，優先擷取頁首、頁尾和樣式資訊。

* 如果 `AF_MASTERPAGE` 不存在，則使用基本模板中存在的第一主版頁面。

**欄位的樣式慣例**

* 要對記錄文檔中的欄位應用樣式，基本模板將提供位於根子表單下 `AF_FIELDSSUBFORM` 子表單中 `AF_METATEMPLATE` 的欄位。

* 這些欄位的屬性將應用於記錄文檔中的欄位。 這些欄位應遵循命 `AF_<name of field in all caps>_XFO` 名慣例。 例如，核取方塊的欄位名稱應為 `AF_CHECKBOX_XFO`。

若要建立基本範本，請在AEM Designer中執行下列動作。

1. 按一 **下「檔案>新增**」。
1. 選取「 **根據範本** 」選項。

1. 選擇「 **表單——記錄文檔」類** 。
1. 選擇 **DoR基本模板**。
1. 按一 **下** 「下一步」，並提供所需資訊。

1. （可選）修改要應用於記錄文檔中欄位的欄位的樣式和外觀。
1. 儲存表格。

您現在可以將儲存的表單當做記錄檔案的基本範本。
請勿修改或移除基本範本中的任何指令碼。

**修改基本模板**

* 如果您未對基本範本中的欄位套用任何樣式，建議您從基本範本移除這些欄位，以便自動擷取對基本範本的升級。
* 修改基本模板時，請勿刪除、添加或修改指令碼。

>[!NOTE]
>
>使用慣例設計基本範本，並嚴格遵循上述步驟。

## 記錄範本文件配置 {#document-of-record-template-configuration}

設定表單的記錄範本檔案，讓客戶下載已提交表單的易於列印副本。 XDP檔案用作記錄模板的文檔。 客戶下載的記錄檔案會根據XDP檔案中指定的版面進行格式化。

執行以下步驟，為最適化表單配置記錄文檔：

1. 在AEM作者例項中，按一下「表 **單>表單與檔案」。**
1. 選擇一個表單，然後按一下「查 **看屬性」**。
1. 在「屬性」窗口中，按一下「表 **單模型」**。
建立表單時，也可以選取表單模型。

   >[!NOTE]
   >
   >在「表單模型」頁籤中，確保從「 **選擇自** 」下拉 **式選** 項卡中選擇「方案」或「無 **** 」。 **[!UICONTROL 以表單範本為表單模型的XFA或最適化表單不支援記錄檔案。]**

1. 在「表單模型」頁籤的「記錄模板配置文檔」部分中，選擇以下選項之一。

   **無** ：如果您不想為表單配置記錄文檔，請選擇此選項。

   **將表單模板與記錄模板關聯** 如果您有要用作記錄文檔模板的XDP檔案，請選擇此選項。 選取此選項時，會顯示AEM Forms儲存庫中所有可用的XDP檔案。 選擇適當的檔案。

   選定的XDP檔案與最適化表單相關聯。

   **生成記錄文檔** ：選擇此選項可將XDP檔案用作定義記錄文檔的樣式和外觀的基本模板。 選取此選項時，會顯示AEM Forms儲存庫中所有可用的XDP檔案。 選擇適當的檔案。

   **[!UICONTROL 選擇此選項可將XDP檔案用作定義記錄文檔的樣式和外觀的基本模板。 選取此選項時，會顯示AEM Forms儲存庫中所有可用的XDP檔案。 選擇適當的檔案。]**

   **選擇表單模板作為基本模板以生成記錄文檔** 。選擇此選項可將XDP檔案用作基本模板以定義記錄文檔的樣式和外觀。 選取此選項時，會顯示AEM Forms儲存庫中所有可用的XDP檔案。 選擇適當的檔案。

   >[!NOTE]
   >
   >在下列情況下，確保用於建立XFA表單的自適應表單和模式（資料模式）的模式相同：
   >
   >
   >
   >    * 您的最適化表單是架構型表單
   >    * 您正在將「 **關聯表單模板」用作記錄文檔的「記錄模板** 」選項


1. 按一下「 **完成」。**

## 自訂記錄檔案中的品牌資訊 {#customize-the-branding-information-in-document-of-record}

在生成記錄文檔時，可以在「記錄文檔」頁籤上更改記錄文檔的品牌資訊。 「記錄檔案」索引標籤包含標誌、外觀、版面、頁首和頁尾、免責聲明，以及您是否要包含未選取的核取方塊和選項按鈕選項等選項。

若要本地化您在「記錄檔案」索引標籤中輸入的品牌資訊，您必須確保瀏覽器的地區設定正確。 要自定義記錄文檔的品牌資訊，請完成以下步驟：

1. 在記錄檔案中選取面板（根面板），然後點選「設 ![定」](assets/configure.png)。
1. 點選 ![dortab](assets/dortab.png)。 此時將顯示「記錄文檔」頁籤。
1. 選擇預設模板或自定義模板以呈現記錄文檔。 如果您選取預設範本，記錄檔案的縮圖預覽會顯示在「範本」下拉式清單下方。

   ![brandingtemplate](assets/brandingtemplate.png)

   如果您選擇選取自訂範本，請在AEM Forms伺服器上瀏覽選取的XDP。 如果您想要使用AEM Forms伺服器上尚未包含的範本，您必須先將XDP上傳至AEM Forms伺服器。

1. 根據您是選擇預設模板還是自定義模板，「記錄文檔」頁籤中將顯示以下部分或全部屬性。 請適當指定下列項目：

   * **標誌影像**:您可以選擇使用最適化表單中的標誌影像、從DAM中選擇一個，或從電腦上傳一個。
   * **表單標題**
   * **頁首文字**
   * **免責聲明標籤**
   * **免責聲明**
   * **免責聲明文字**
   * **重音顏色**:在文檔或記錄PDF中呈現標題文本和分隔線的顏色
   * **字型系列**:記錄PDF檔案中文字的字型系列
   * **對於「核取方塊」和「選項按鈕」元件，僅顯示選取的值**
   * **所選多個值的分隔符號**
   * **包含未綁定到資料模型的表單對象**
   * **從記錄檔案排除隱藏欄位**
   * **隱藏面板描述**
   >[!NOTE]
   >
   >如果您使用6.3之前由設計人員版本建立的最適化表單範本，以便「重音色彩」和「字型系列」屬性運作，請確定下列項目在根子表單下的最適化表單範本中：

   ```xml
   <proto>
   <font typeface="Arial"/>
   <fill>
   <color value="4,166,203"/>
   </fill>
   <edge>
   <color value="4,166,203"/>
   </edge>
   </proto>
   ```

1. 若要儲存品牌變更，請點選「完成」。

## 記錄檔案中面板的表格和欄版面 {#table-and-column-layouts-for-panels-in-document-of-record}

您的最適化表格可能是冗長的表格，包含數個表格欄位。 您可能不想將記錄文檔另存為最適化表單的精確副本。 現在，您可以選擇表格或欄版面配置，將一或多個最適化表單面板儲存在記錄PDF的檔案中。

在生成記錄文檔之前，在面板的設定中，選擇該面板的「記錄文檔的佈局」作為「表」或「列」。 在記錄檔案中，面板中的欄位會據以組織。

![在記錄文檔的表格佈局中呈現的面板中的欄位](assets/dortablelayout.png)

在記錄文檔的表格佈局中呈現的面板中的欄位

![在記錄檔案的欄版面中轉譯的面板中的欄位](assets/dorcolumnlayout.png)

在記錄檔案的欄版面中轉譯的面板中的欄位

## 記錄檔案設定 {#document-of-record-settings}

記錄文檔設定允許您選擇要包含在記錄文檔中的選項。 例如，銀行接受表單中的姓名、年齡、社會保障號碼和電話號碼。 表單會產生銀行帳號和分行詳細資訊。 您可以選擇只在記錄檔案中顯示姓名、社交保險號碼、銀行帳戶和分行詳細資料。

元件的記錄設定文檔可在其屬性下使用。 若要存取元件的屬性，請選取元件，然後按一 ![下覆蓋](assets/cmppr.png) 中的cmppr。 這些屬性列在側欄中，您可在其中找到下列設定。

**欄位層級設定**

* **從記錄檔案排除**:將屬性設為true會將欄位從記錄檔案中排除。 這是名為的可指令碼屬性 `excludeFromDoR`。 其行為取決於隱藏 **的表單層級屬性時** ，從DoR排除欄位。

* **** 將面板顯示為表格：如果面板中的欄位少於6個，將屬性設定為記錄檔案中的表格。 僅適用於面板。
* **** 從記錄檔案排除標題：設定屬性會從記錄檔案中排除面板／表格的標題。 僅適用於面板和表格。
* **** 從記錄檔案排除說明：設定屬性會從記錄文檔中排除面板／表的說明。 僅適用於面板和表格。

**表單層級設定**

* **** 在DoR中包含未系結的欄位：設定屬性時，記錄文檔中包含基於模式的自適應表單的未綁定欄位。 依預設為true。
* **** 如果隱藏，則從DoR排除欄位：設定屬性會覆寫「從記錄檔案排除」欄位層級屬性的行為（若非真）。 如果在表單提交時隱藏欄位，如果屬性設為true，則這些欄位將從記錄檔案中排除，但不要設定「從記錄檔案排除」屬性。

## 使用記錄檔案時的主要考量 {#key-considerations-when-working-with-document-of-record}

在處理適應性表單的記錄檔案時，請記住下列考量與限制。

* 記錄範本檔案不支援RTF。 因此，靜態自適應格式或最終用戶填寫的資訊中的任何富文本都顯示為記錄文檔中的純文字檔案。
* 最適化表單中的檔案片段不會出現在記錄檔案中。 不過，支援最適化表單片段。
* 記錄檔案僅用於列印用途。
* 不支援在為基於XML Schema的自適應表單生成的記錄文檔中的內容綁定。
* 不支援在為基於XML Schema的自適應表單生成的記錄文檔中的內容綁定。
* 當用戶請求呈現記錄文檔時，會根據地區設定的要求建立記錄文檔的本地化版本。 記錄文檔的定位與適應性表單的定位同時發生。 如需記錄檔案與最適化表單本地化的詳細資訊，請參閱「使用 [AEM轉換工作流程來本地化最適化表單與記錄檔案」](/help/forms/using/using-aem-translation-workflow-to-localize-adaptive-forms.md)。

