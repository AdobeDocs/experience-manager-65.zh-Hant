---
title: 版面設計
description: 版面配置設計詳細資訊說明如何建立用於信函或互動式通訊的版面。
content-type: reference
topic-tags: correspondence-management, interactive-communications
products: SG_EXPERIENCEMANAGER/6.5/FORMS
docset: aem65
feature: Correspondence Management
exl-id: 9e1b0067-c7dc-4bbb-a209-d674592be858
source-git-commit: 38f0496d9340fbcf383a2d39dba8efcbdcd20c6f
workflow-type: tm+mt
source-wordcount: '2171'
ht-degree: 0%

---

# 版面設計{#layout-design}

XFA表單範本或XDP是適用於下列專案的範本：

* [字母](/help/forms/using/create-letter.md)
* [列印管道](/help/forms/using/web-channel-print-channel.md#printchannel) 之 [互動式通訊](/help/forms/using/interactive-communications-overview.md)

* 布局片段

XDP的設計採用AdobeForms Designer。 本文提供如何設計您的XDP以建立有效對應/互動式通訊的詳細資訊，例如應在何處使用表單欄位或目標區域，以及何時使用佈局片段。

## 建立信函或互動式通訊列印頻道的版面配置 {#creating-a-layout-for-letters-or-for-interactive-communications-print-channel}

佈局定義互動式通訊的信件/列印頻道的圖形佈局。 版面配置可包含一般表單欄位，例如「地址」和「參考號碼」。 其中也包含空白的子表單，表示目標區域。 在表單設計工具中建立版面，並在完成後，應用程式專員將其上傳到AEM伺服器。 從那裡，當您建立互動式通訊的通訊範本或列印管道時，可以選取版面。

![設計工具：建立版面](assets/claimsubrogationlayout.png)

請依照下列步驟，為互動式通訊的字母/列印通道建立版面配置：

1. 分析版面並決定所有頁面重複的內容；通常頁首和頁尾適合此類別。 此內容會放置在配置的主版頁面上。 剩餘的內容會移至版面配置的內文頁面。 在原則夾克中，標誌和公司地址可以新增到主版頁首和頁尾。 例如，「取消通知」使用相同的配置。
1. 在設計內文頁面時，將頁面內容劃分為多個區段。 每個區段都設計為內嵌在版面本身的子表單或片段版面配置。 如果區段包含表格，則將區段模型化為佈局片段。
1. 版面配置可依下列方式設計：

   1. 將每個區段設為包含區段所有元素的個別子表單。
   1. 將每個區段子表單設為相同父項子表單的子項。 父項子表單的版面設定為「流量」，允許在先前區段中合併大型資料時區段移至下方。
   1. Section Primary Residence也可跨其他版面重複使用。 將其建立為片段佈局。
   1. 區段其他興趣詳細資料只包含兩個元素，一個放在另一個之下，可以包含大型資料，且設計為流程式。
   1. 其他區段則包含特定位置的元素，因此設計成位置版面。
   1. 如果區段包含位於特定位置的元素，且這些元素包含大量資料，請將區段分割為子表單。 然後排列子表單以獲得所需的行為。
   1. 針對主要居住區段，新增預留位置目標區域。 此預留位置繫結至信件/互動式通訊設計時的主要居住區片段。
   1. 將版面（以及使用該版面的片段，如果有的話）上傳到AEM Forms伺服器。

### 在XDP範本中使用子表單 {#usesubformxdp}

分析建立互動式通訊所需的版面配置後，您就可以使用Forms Designer在XDP範本中建立子表單。 XDP範本中使用的空白子表單元件會在互動式通訊的「列印」管道中顯示目標區域。

>[!NOTE]
>
>新增內容至互動式通訊的Print channel，而非新增內容至XDP範本中的子表單元件。 使用將內容新增到列印管道的目標區域 [檔案片段、圖表、影像](create-interactive-communication.md#step2)、和佈局片段。

執行以下步驟以在XDP範本中使用子表單：

1. 開啟Forms Designer，選取 **檔案** > **新增** > **使用空白表單**，點選 **下一個**，然後點選 **完成** 開啟表單以建立範本。

   確保 **物件庫** 和 **物件** 選項是從 **視窗** 功能表。

1. 拖放 **子表單** 元件來自 **物件庫** 至表單。

   ![元件設計工具](assets/subform_component_designer_new.png)

1. 選取子表單，以在 **物件** 視窗的右側。
1. 選取 **子表單** 標籤並選取 **已流動** 從 **內容** 下拉式清單。 拖曳子表單的左側端點以調整長度。

   ![流程子表單](assets/object_subform_flowed_new.png)

1. 在 **繫結** 標籤：

   1. 在中指定子表單的名稱 **名稱** 欄位。
   1. 選取 **無資料繫結** 從 **資料繫結** 下拉式清單。

1. 同樣地，從左窗格中選取根子表單。

   ![根子表單](assets/root_subform_designer_new.png)

1. 選取 **子表單** 標籤並選取 **已流動** 從 **內容** 下拉式清單。 在 **繫結** 標籤：

   1. 在中指定子表單的名稱 **名稱** 欄位。
   1. 選取 **無資料繫結** 從 **資料繫結** 下拉式清單。

   重複步驟2至5，將更多子表單新增至XDP範本。 新增 [文字、檔案片段、影像和圖表](create-interactive-communication.md#step2) 只有在編寫互動式通訊時才會移至目標區域。

1. 選取 **檔案** > **另存為** 若要將檔案儲存在本機檔案系統上：

   1. 瀏覽至儲存檔案的位置，並指定XDP範本的名稱。
   1. 選取 **.xdp** 從 **另存為型別** 下拉式清單。

   1. 點選 **儲存**.

### 在XDP範本中使用影像欄位元件 {#use-image-field-component-in-an-xdp-template}

使用XDP範本中的「影像欄位」或「子表單」元件，並在編寫互動式通訊時新增影像。

>[!NOTE]
>
>將影像新增至互動式通訊的「列印」色版，而非將影像新增至XDP範本中的「影像欄位」或「子表單」元件。 如需詳細資訊，請參閱 [新增內容至互動式通訊](../../forms/using/create-interactive-communication.md#step2).

執行以下步驟，在XDP範本中使用「影像欄位」元件：

1. 拖放 **影像欄位** 元件來自 **物件庫** 至表單。
1. 選取子表單，以在 **物件** 視窗的右側。
1. 在 **繫結** 標籤：

   1. 在中指定影像欄位的名稱 **名稱** 欄位。
   1. 選取 **無資料繫結** 從 **資料繫結** 下拉式清單。

### 為佈局片段建立XDP範本 {#xdplayoutfragments}

使用Forms Designer中的「表格」元件來建立版面片段，然後在編寫互動式通訊的列印管道時使用它們來建立表格。 使用版面片段建立表格可確保當使用列印管道自動產生Web管道時，表格內容仍保持結構。

>[!NOTE]
>
>在表格儲存格中輸入文字，或 [建立與表單資料模型物件的繫結](create-interactive-communication.md#step2) 只有在編寫互動式通訊時。

若要使用Forms Designer在XDP範本中使用「表格」元件，請執行下列步驟：

1. 拖放 **表格** 元件來自 **物件庫** 至表單。
1. 在 **插入表格** 對話方塊：

   1. 指定表格的列數和欄數。
   1. 選取 **在表格中包含標題列** 核取方塊來包含表格標題的列。
   1. 點選 **確定**.

1. 點選 **+** 在表格名稱旁的左窗格中，以滑鼠右鍵按一下包含在標題與其他列中的儲存格名稱，然後選取 **重新命名物件** 重新命名表格儲存格。
1. 按一下「 」中的「 」表格標題文字欄位 **設計檢視** 並重新命名。
1. 拖放 **文字欄位** 元件來自 **物件庫** 至每個表格儲存格 **設計檢視**. 執行此步驟，以便在編寫互動式通訊時，能夠將表格儲存格與表單資料模型物件繫結。

   ![表格中的文字欄位](assets/text_fields_table_new.png)

1. 從左窗格中選取列的名稱，然後選取 **物件** > **繫結** > **重複每個資料專案的列**. 執行此步驟，以確保若此資料列的表格儲存格與集合型別的表單資料模型物件之間已建立繫結，則會針對資料庫中可用的每個資料專案，自動重複表格資料列。

   在表格儲存格中輸入文字，或 [建立與表單資料模型物件的繫結](create-interactive-communication.md#step2) 只有在編寫互動式通訊時。

1. 選取 **檔案** > **另存為** 若要將檔案儲存在本機檔案系統上：

   1. 瀏覽至儲存檔案的位置，並指定XDP範本的名稱。
   1. 選取 **.xdp** 從 **另存為型別** 下拉式清單。

   1. 點選 **儲存**.

### 將XDP範本上傳至AEM Forms伺服器 {#uploadxdptemplate}

使用Forms Designer建立XDP範本後，您必須將其上傳到AEM Forms伺服器，以便該範本可在建立互動式通訊時使用。

1. 選取 **Forms** > **Forms與檔案**.
1. 點選 **建立** > **檔案上傳**.
1. 導覽至本機檔案系統上XDP範本的位置，然後點選 **開啟** 將XDP範本匯入AEM Forms伺服器。

## 使用結構描述 {#using-schema}

您可以在版面配置或版面片段中使用結構描述，但並非必要。 如果您使用結構描述，請確定以下事項：

1. 版面配置以及信函/互動式通訊中使用的所有片段版面配置都會使用與信函/互動式通訊相同的結構描述。
1. 需要填入資料的所有欄位都會與結構描述繫結。

## 建立可關聯欄位 {#creating-relatable-fields}

依預設，所有欄位都視為與各種其他資料來源相關。 如果您的版面配置包含任何與資料來源不相關的欄位，請以「_int」（內部）尾碼為欄位命名；例如pageCount_int。

可關聯的欄位必須：

* 成為XFA &lt;field> 或 &lt;exclgroup>
* 具有XFA繫結參考
* 如果它是 &lt;exclgroup>，則必須有至少一個子選項按鈕欄位；否則，無法判斷其值型別

可關聯的欄位必須：

* 有名稱

可關聯欄位不得：

* 在其名稱中加入「_int」尾碼
* 已將繫結設定為「無」
* 為的子項 &lt;exclgroup> 元素

只要可關聯欄位符合上述條件，它就可以在版面中的任何位置和任何巢狀深度。 您可以在主版頁面中使用可關聯的欄位。

欄位的版面配置比目標區域子表單更靈活；但是這些欄位會繫結到單一值型別。 您可以讓欄位變大，或將其設定為固定的寬度和高度等等。 解析的模組或規則結果會推送至欄位。

## 決定何時使用子表單和文字欄位 {#deciding-when-to-use-subforms-and-text-nbsp-fields}

如果您想要以由上而下的垂直流程版面配置擷取多個模組內容（多個段落或影像），請使用子表單。 您的版面配置必須處理子表單高度增加以容納其內容的事實。 如果您不確定與子表單/目標相關聯的內容長度永遠不會超過版面配置中為子表單保留的空間，請在流程的子表單容器中將子表單建立為子表單。 此程式會確保子表單下方的版面配置物件會隨著子表單的增長而向下流動。

如果您想要將模組資料或資料字典元素資料擷取到版面配置的結構描述中（因為欄位會繫結至資料），或想要在主版頁面上顯示模組內容，請使用欄位。 請記住，主版頁面中的內容不能與正文頁面內容一起流動，因此您必須確保將影像欄位用作頁首標誌。 此表格提供決定在版面配置中何時使用子表單或欄位的更多條件。

<table>
 <tbody>
  <tr>
   <td><p><strong>使用子表單，當</strong></p> </td>
   <td><p><strong>使用文字欄位的時機</strong></p> </td>
  </tr>
  <tr>
   <td><p>它包含元素的組合，例如「姓氏」和「名字」</p> </td>
   <td><p>它包含單一元素，例如原則編號。</p> </td>
  </tr>
  <tr>
   <td><p>其中包含多個段落</p> </td>
   <td><p>文字會換行並左右對齊</p> </td>
  </tr>
  <tr>
   <td><p>重複、選用和條件式資料群組會繫結至子表單，以降低使用指令碼取得相同結果時可能發生設計錯誤的風險</p> </td>
   <td><p>組織的標誌和地址等元素會出現在信件/互動式通訊的所有頁面上。 在這種情況下，請為這些元素建立表單欄位，並將它們放在主版頁面上。 如果將欄位繫結設為「無資料繫結」，則信函/互動式通訊編輯器中不會出現可關聯欄位的欄位。 如果您想要將某些型別的內容關聯到這些欄位，它們必須有繫結。</p> <p>如果您的公司地址包含多行資料，請使用文字欄位搭配「允許多行」選項來代表版面配置上的地址。</p> <p>如果文字欄位的資料型別設定為純文字，則會使用模組輸出的純文字版本，而非RTF版本（捨棄所有格式）。 若要保留格式，請將文字欄位的資料型別設定為RTF文字。</p> </td>
  </tr>
  <tr>
   <td><p>文字已流動</p> </td>
   <td><p>主版頁面上會使用文字欄位和影像欄位。 主版頁面無法使用子表單作為目標區域。</p> </td>
  </tr>
  <tr>
   <td><p>物件會分組和組織，而不會將子表單繫結到資料元素</p> </td>
   <td><p> </p> </td>
  </tr>
  <tr>
   <td><p>子表單內有文字欄位。 子表單在版面配置中可以增大，且不會覆寫其下方的其他物件。</p> </td>
   <td><p>在發佈程式中，您需要輕鬆存取其資料。</p> </td>
  </tr>
 </tbody>
</table>

## 設定重複式要素 {#setting-up-repetitive-elements}

當諸如您組織的標誌和地址等元素出現在信件/互動式通訊的所有頁面上時，請為這些元素建立表單欄位，並將其放在主版頁面上。 為這些欄位使用名稱（欄位名稱）繫結。

## 指定伺服器轉譯器格式 {#specify-the-server-nbsp-render-format}

使用配置的伺服器轉譯格式為動態XML表單；否則，任何以此配置為基礎的字母/互動式通訊將無法正確轉譯。 依預設，Forms Designer中的伺服器轉譯器格式會設為動態XML表單。 為確保您使用正確的格式：

* 在Designer中按一下 **檔案** > **表單屬性** > **預設值**，並確定「PDF轉譯/格式」設定已設為「動態XML表單」。
