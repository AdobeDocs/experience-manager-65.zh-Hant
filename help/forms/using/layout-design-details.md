---
title: 佈局設計
seo-title: Layout Design
description: 佈局設計詳細資訊說明了如何建立用於字母或互動式通信的佈局。
seo-description: Layout Design Details explains how you can create layouts to be used for your letters or Interactive Communications.
uuid: 469a8a71-88f7-4102-bb02-38ed05390f6c
content-type: reference
topic-tags: correspondence-management, interactive-communications
products: SG_EXPERIENCEMANAGER/6.5/FORMS
discoiquuid: 683809ac-089b-49bf-a72c-67d32439081f
docset: aem65
feature: Correspondence Management
exl-id: 9e1b0067-c7dc-4bbb-a209-d674592be858
source-git-commit: 9d142ce9e25e048512440310beb05d762468f6a2
workflow-type: tm+mt
source-wordcount: '2170'
ht-degree: 0%

---

# 佈局設計{#layout-design}

XFA表單模板或XDP是以下模板：

* [字母](/help/forms/using/create-letter.md)
* [打印通道](/help/forms/using/web-channel-print-channel.md#printchannel) 共 [互動式通信](/help/forms/using/interactive-communications-overview.md)

* 布局片段

XDP是在AdobeForms設計師中設計的。 本文詳細介紹了如何設計XDP以建立有效的對應/交互通信，如在何處使用表單域或目標區域以及何時使用佈局片段。

## 為字母或Interactive Communications的打印通道建立佈局 {#creating-a-layout-for-letters-or-for-interactive-communications-print-channel}

佈局定義互動式通信的字母/打印通道的圖形佈局。 佈局可包含典型的表單域，如「地址」和「引用編號」。 它還包含表示目標區域的空子窗體。 在窗體設計器中建立佈局，並在完成後，Application Specialit將其上載到服AEM務器。 從中，可以在建立交互通信的對應模板或打印通道時選擇佈局。

![設計器：建立佈局](assets/claimsubrogationlayout.png)

按照以下步驟為互動式通信的信函/打印通道建立佈局：

1. 分析佈局並確定所有頁面上重複的內容；通常頁眉和頁腳適合此類別。 此內容放置在佈局的母版頁上。 其餘內容將進入佈局的正文頁面。 在策略夾克中，徽標和公司地址可以添加到母版頁眉和頁腳。 例如，「取消通知」使用相同的佈局。
1. 設計正文頁面時，將頁面內容分為幾部分。 每個部分設計為嵌入在佈局本身中的子窗體或作為片段佈局。 如果節包含表，則將節建模為佈局片段。
1. 佈局可設計如下：

   1. 將每個節作為包含節的所有元素的單獨子窗體。
   1. 使每個節子窗體都為同一父子窗體的子窗體。 父子窗體的佈局設定為「流」，以便在前幾節合併大資料時，允許各節在下方移動。
   1. 節主住宅也可跨其他佈局重複使用。 建立為片段佈局。
   1. Section Additional Interest詳細資訊僅包含兩個位於另一個下方的元素，可包含大資料，並設計為流。
   1. 其它部分在特定位置包含元素，因此它們設計為定位佈局。
   1. 如果節包含特定位置的元素，並且這些元素包含大量資料，則將節分為子表單。 然後排列子表單以達到期望的行為。
   1. 對於「主要居住區」部分，添加佔位符目標區域。 此佔位符將綁定到在設計字母/互動式通信時分段主住宅。
   1. 將佈局(以及使用佈局的片段（如果有）)上載到AEM Forms伺服器。

### 在XDP模板中使用子窗體 {#usesubformxdp}

分析建立交互通信所需的佈局後，可以使用Forms設計器在XDP模板中建立子表單。 在XDP模板中使用的空白子表單元件導致在交互通信的打印通道中顯示目標區域。

>[!NOTE]
>
>將內容添加到交互通信的打印通道，而不是將內容添加到XDP模板中的子表單元件。 使用 [文檔片段、圖表和影像](create-interactive-communication.md#step2)、和佈局片段。

執行以下步驟以在XDP模板中使用子表單：

1. 開啟Forms設計器，選擇 **檔案** > **新建** > **使用空白窗體**&#x200B;按一下 **下一個**，然後按一下 **完成** 開啟表單以建立模板。

   確保 **對象庫** 和 **對象** 選項 **窗口** 的子菜單。

1. 拖放 **子窗體** 元件 **對象庫** 的下界。

   ![元件設計器](assets/subform_component_designer_new.png)

1. 選擇子窗體以在 **對象** 的上界。
1. 選擇 **子窗體** 頁籤 **流** 從 **內容** 的子菜單。 拖動子窗體的左端點以調整長度。

   ![流子窗體](assets/object_subform_flowed_new.png)

1. 在 **綁定** 頁籤：

   1. 指定中子窗體的名稱 **名稱** 的子菜單。
   1. 選擇 **無資料綁定** 從 **資料綁定** 的子菜單。

1. 同樣，從左窗格中選擇根子窗體。

   ![根子窗體](assets/root_subform_designer_new.png)

1. 選擇 **子窗體** 頁籤 **流** 從 **內容** 的子菜單。 在 **綁定** 頁籤：

   1. 指定中子窗體的名稱 **名稱** 的子菜單。
   1. 選擇 **無資料綁定** 從 **資料綁定** 的子菜單。

   重複步驟2至5，向XDP模板添加更多子表單。 添加 [文本、文檔片段、影像和圖表](create-interactive-communication.md#step2) 僅在創作交互通信時，才會到達目標區域。

1. 選擇 **檔案** > **另存為** 將檔案保存到本地檔案系統：

   1. 導航到要保存檔案的位置並指定XDP模板的名稱。
   1. 選擇 **.xdp** 從 **另存為類型** 的子菜單。

   1. 點擊 **保存**。

### 在XDP模板中使用影像欄位元件 {#use-image-field-component-in-an-xdp-template}

使用XDP模板中的「影像欄位」或「子表單」元件，在創作交互通信時添加影像。

>[!NOTE]
>
>將影像添加到交互通信的打印通道，而不是將影像添加到XDP模板中的「影像欄位」或「子表單」元件。 有關詳細資訊，請參見 [向交互通信添加內容](../../forms/using/create-interactive-communication.md#step2)。

執行以下步驟以在XDP模板中使用「影像欄位」元件：

1. 拖放 **影像欄位** 元件 **對象庫** 的下界。
1. 選擇子窗體以在 **對象** 的上界。
1. 在 **綁定** 頁籤：

   1. 為中的影像欄位指定名稱 **名稱** 的子菜單。
   1. 選擇 **無資料綁定** 從 **資料綁定** 的子菜單。

### 為佈局片段建立XDP模板 {#xdplayoutfragments}

使用Forms設計器中的「表」元件建立佈局片段，然後在創作互動式通信的打印通道時使用它們建立表。 使用佈局片段建立表，確保當使用打印通道自動生成Web通道時，表內容保留結構。

>[!NOTE]
>
>在表格單元格或 [建立與表單資料模型對象綁定](create-interactive-communication.md#step2) 僅在創作互動式通信時。

執行以下步驟，使用Forms設計器在XDP模板中使用表元件：

1. 拖放 **表格** 元件 **對象庫** 的下界。
1. 在 **插入表格** 對話框：

   1. 指定表的行數和列數。
   1. 選擇 **在表中包括標題行** 複選框，以包含表標題的行。
   1. 點擊 **確定**。

1. 點擊 **+** 在表名稱旁的左窗格中，按一下右鍵標題和其他行中包含的單元格名稱，然後選擇 **更名對象** 的子菜單。
1. 按一下 **設計視圖** 並更名。
1. 拖放 **文本欄位** 元件 **對象庫** 到 **設計視圖**。 執行此步驟，可以在創作交互通信時將表格單元格與表單資料模型對象綁定。

   ![表中的文本欄位](assets/text_fields_table_new.png)

1. 從左窗格中選擇行的名稱，然後選擇 **對象** > **綁定** > **為每個資料項重複行**。 執行此步驟，以確保如果在此行的表單元格之間建立了具有集合類型的表單資料模型對象的綁定，則會自動為資料庫中可用的每個資料項重複表行。

   在表格單元格或 [建立與表單資料模型對象綁定](create-interactive-communication.md#step2) 僅在創作互動式通信時。

1. 選擇 **檔案** > **另存為** 將檔案保存到本地檔案系統：

   1. 導航到要保存檔案的位置並指定XDP模板的名稱。
   1. 選擇 **.xdp** 從 **另存為類型** 的子菜單。

   1. 點擊 **保存**。

### 將XDP模板上載到AEM Forms伺服器 {#uploadxdptemplate}

使用Forms設計器建立XDP模板後，必須將其上載到AEM Forms伺服器，以便在建立交互通信時使用該模板。

1. 選擇 **Forms** > **Forms和文檔**。
1. 點擊 **建立** > **檔案上載**。
1. 導航到本地檔案系統上XDP模板的位置，然後點擊 **開啟** 將XDP模板導入到AEM Forms伺服器。

## 使用架構 {#using-schema}

可以在佈局或佈局片段中使用架構，但不是必需的。 如果使用架構，請確保：

1. 字母/互動式通信中使用的佈局和所有片段佈局使用與字母/互動式通信相同的模式。
1. 使用資料填充所需的所有欄位都綁定到架構。

## 建立可關聯欄位 {#creating-relatable-fields}

預設情況下，所有欄位都被視為與各種其他資料源相關。 如果您的佈局包含任何與資料源不相關的欄位，請用「_int」（內部）尾碼命名該欄位；例如pageCount_int。

可關聯欄位必須：

* 是XFA &lt;field> 或 &lt;exclgroup>
* 具有XFA綁定引用
* 如果 &lt;exclgroup>，必須至少有一個子單選按鈕欄位；否則，無法確定其值類型

可關聯欄位必須：

* 有名字

可關聯欄位不能：

* 在其名稱中包括「_int」尾碼
* 將綁定設定為&quot;none&quot;
* 是 &lt;exclgroup> 元素

只要可關聯欄位滿足上述條件，它就可以位於佈局中的任何位置和任何嵌套深度。 可以在母版頁中使用可關聯欄位。

欄位的佈局配置比目標區域子表單更靈活；但是，它們與單個值類型相關聯。 可以使欄位變大，或將其設定為固定的寬度和高度等。 解析的模組或規則結果被推入到欄位中。

## 決定何時使用子窗體和文本欄位 {#deciding-when-to-use-subforms-and-text-nbsp-fields}

如果要在自上而下垂直流佈局（多個段落或影像）中捕獲多個模組內容，請使用子表單。 您的佈局必須處理子窗體高度增長以容納其內容的事實。 如果無法確定與子表單/目標關聯的內容的長度永遠不會超過佈局中為子表單保留的空間，請將子表單建立為子表單容器中的子表單。 此過程確保子窗體下的佈局對象隨著子窗體的增長而向下流動。

如果要將模組資料或資料字典元素資料捕獲到佈局的架構中（因為欄位綁定到資料），或在母版頁上顯示模組內容，請使用欄位。 請記住，首頁中的內容不能與正文頁面內容一起流動，因此必須確保影像欄位用作頁眉徽標。 此表提供了更多標準，用於決定何時在佈局中使用子窗體或欄位。

<table>
 <tbody>
  <tr>
   <td><p><strong>在</strong></p> </td>
   <td><p><strong>在</strong></p> </td>
  </tr>
  <tr>
   <td><p>它包含元素的組合，如姓氏和名</p> </td>
   <td><p>它包含單個元素，如策略編號。</p> </td>
  </tr>
  <tr>
   <td><p>它包括多個段落</p> </td>
   <td><p>文本已換行並對齊</p> </td>
  </tr>
  <tr>
   <td><p>重複、可選和條件資料組綁定到子表單，以降低在使用指令碼獲得相同結果時可能出現設計錯誤的風險</p> </td>
   <td><p>您組織的徽標和地址等元素將出現在字母/互動式通信的所有頁面中。 在這種情況下，為這些元素建立表單域並將其置於母版頁上。 如果將欄位綁定設定為「無資料綁定」，則「字母/交互通信編輯器」中的「無」欄位將顯示為可關聯欄位。 如果要將某種類型的內容與這些欄位關聯，它們必須具有綁定。</p> <p>如果公司地址包含多行資料，請使用帶「允許多行」選項的文本欄位來表示佈局上的地址。</p> <p>如果文本欄位的資料類型設定為純文字檔案，則使用模組輸出的純文字檔案版本而不是富文本版本（所有格式都被丟棄）。 要保留格式，請將文本欄位的資料類型設定為富格文本。</p> </td>
  </tr>
  <tr>
   <td><p>文本流</p> </td>
   <td><p>文本欄位和影像欄位用於母版頁。 母版頁不能將子表單用作目標區域。</p> </td>
  </tr>
  <tr>
   <td><p>對象進行分組和組織，而不將子窗體綁定到資料元素</p> </td>
   <td><p> </p> </td>
  </tr>
  <tr>
   <td><p>子窗體內有一個文本欄位。 子窗體可以增長，但不能覆蓋佈局中其下的其他對象。</p> </td>
   <td><p>您需要在後處理中輕鬆訪問其資料。</p> </td>
  </tr>
 </tbody>
</table>

## 設定重複性要素 {#setting-up-repetitive-elements}

當組織的徽標和地址等元素出現在字母/互動式通信的所有頁面上時，請為這些元素建立表單域並將它們放置在母版頁上。 對這些欄位使用名稱（欄位名稱）綁定。

## 指定伺服器呈現格式 {#specify-the-server-nbsp-render-format}

將佈局的伺服器呈現格式用於動態XML表單；否則，基於此佈局的任何字母/互動式通信都無法正確呈現。 預設情況下，Forms設計器中的伺服器呈現格式設定為「動態XML表單」。 要確保您使用的格式正確：

* 在設計器中，按一下 **檔案** > **窗體屬性** > **預設值**，並確保「PDF呈現/格式」設定設定為「動態XML表單」。
